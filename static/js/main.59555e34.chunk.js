(this["webpackJsonpygocarder-v1"]=this["webpackJsonpygocarder-v1"]||[]).push([[0],{122:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},184:function(e,t,n){},194:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},322:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),i=n(29),o=n.n(i),l=(n(181),n(9)),s=n(26),u=n.n(s),d=n(43),f=n(10),h=(n(182),n(183),549),b=800,p={fillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1},v={frame:"fusion",foil:"normal",name:"Junko",nameStyleType:"auto",nameStyle:{fillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1},attribute:"LIGHT",subFamily:"NO ICON",star:6,picture:"https://i.imgur.com/h5kXZeC.png",pictureCrop:{x:0,y:12,width:269,height:269,unit:"px",aspect:1},linkMap:["1","3","7","9"],isPendulum:!1,pendulumEffect:"Once per turn: You can pay 800 LP, increase this card's Pendulum Scale by 1.",pendulumScaleRed:"4",pendulumScaleBlue:"4",typeAbility:["Fairy","Fusion","Effect"],effectStyle:{condenseTolerant:"strict"},effect:"[2+ Effect Monsters on your field]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter.",setId:"YGOC-EN001",atk:"2000",def:"2000",passcode:"18111996",sticker:"holo5",isFirstEdition:!0,creator:"\xa92020 Studio Dice/SHUEISHA TV TOKYO, KONAMI"},j=[{name:"normal",labelColor:"#fff",labelBackgroundColor:"#c49c5e"},{name:"effect",labelColor:"#fff",labelBackgroundColor:"#b96c49"},{name:"fusion",labelColor:"#fff",labelBackgroundColor:"#8948a4"},{name:"synchro",labelColor:"#000",labelBackgroundColor:"#efefef"},{name:"xyz",labelColor:"#fff",labelBackgroundColor:"#000"},{name:"link",labelColor:"#fff",labelBackgroundColor:"#0c8ac6"},{name:"ritual",labelColor:"#fff",labelBackgroundColor:"#5e85c9"},{name:"spell",labelColor:"#fff",labelBackgroundColor:"#1b8f83"},{name:"trap",labelColor:"#fff",labelBackgroundColor:"#c32a8c"},{name:"token",labelColor:"#fff",labelBackgroundColor:"#6f6c6b"}],m=["NO ICON","FIELD","CONTINUOUS","QUICK-PLAY","RITUAL","EQUIP","COUNTER"],g={gold:{fillStyle:"#b88c43",shadowColor:"#FCC400",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0},platinum:{fillStyle:"#CCCCCC",shadowColor:"#FFFFFF",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0}},x=[{name:"normal",color:"#747b95",textStyle:p},{name:"gold",color:"#cfa65f"},{name:"platinum",color:"#b1b1b1"}],O=function(e){return"xyz"===e.frame},w=function(e){return"link"===e.frame&&C(e)},C=function(e){return"spell"!==e.frame&&"trap"!==e.frame},y=function(e){var t,n;return null!==(t=null===(n=j.find((function(t){return t.name===e.toLowerCase()})))||void 0===n?void 0:n.name)&&void 0!==t?t:"effect"},S=n(337),k=n(147),N=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=[],a=127;--a;)(48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=a||"-_.!~*'()".includes(String.fromCharCode(a)))&&n.push(String.fromCharCode(a));for(a=32;255>a;++a){var r=String.fromCharCode(a);"\\"==r||n.includes(r)||n.unshift(r)}e=e.replace(/\u0001/g,""),e=R(e),a=n.length,r="";for(var c={},i=2;i<t;i++)for(var o=0;o<e.length-i;++o){var l=e.substr(o,i);if(!c[l]){var s=l.charCodeAt(0),u=l.charCodeAt(l.length-1);if(!(s=56320<=s&&57343>=s||55296<=u&&56319>=u)){for(s=1,u=e.indexOf(l,o+i);0<=u;++s)u=e.indexOf(l,u+i);1<s&&(c[l]=s)}}}for(;;){for(;a--&&e.includes(n[a]););if(0>a)break;t=n[a];var d=void 0;for(var f in i=0,o=encodeURI(encodeURIComponent(t)).replace(/%../g,"i").length,c)l=((l=c[f])-1)*encodeURI(encodeURIComponent(f)).replace(/%../g,"i").length-(l+1)*o,r.length||(l-=encodeURI(encodeURIComponent("\x01")).replace(/%../g,"i").length),0>=l?delete c[f]:l>i&&(d=f,i=l);if(!d)break;for(var h in e=e.split(d).join(t)+t+d,r=t+r,i={},c){for(c=h.split(d).join(t),o=0,l=e.indexOf(c);0<=l;++o)l=e.indexOf(c,l+c.length);1<o&&(i[c]=o)}c=i}return d=e,(n=r).length&&(d+="\x01"+n),encodeURIComponent(d+"_")},T=function(e){var t=(e=e.substring(0,e.length-1)).split("\x01");if(e=t[0],1<t.length){t=t[1];var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;e=(e=e.split(r)).join(e.pop())}}catch(c){a.e(c)}finally{a.f()}}return R(e,0)},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],a=function(e,t){return e.replace(new RegExp("".concat((t[2]?t[2]:"")+t[0],"|").concat((t[3]?t[3]:"")+t[1]),"g"),(function(e){return e===t[0]?t[1]:t[0]}))};if(t)for(t=0;t<n.length;++t)e=a(e,n[t]);else for(t=n.length;t--;)e=a(e,n[t]);return e},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=e,a=t,r=a,c=r,i=30,o=100,l=function(){return 1===o?j():(r+=o,r-=o/=10),Math.min(r,a)},s=function(){return i-=1,r-=o},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;n=e,a=t,r=t,i=30,o=100,c=t},d=function(){return r},f=function(e){return r=e},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return c=e},b=function(){return c},p=function(){return i=-1,r=c},v=function(){return i},j=function(){return i=-1};return{reset:u,searchDown:s,reverseSearch:l,finish:j,getMedian:d,setMedian:f,setLastEffective:h,getLastEffective:b,applyLastEffective:p,getIterateCount:v}},E={frame:"fr",foil:"fo",name:"na",nameStyleType:"nst",effectStyle:{_newKey:"es",condenseTolerant:"cdtl"},nameStyle:{_newKey:"ns",fillStyle:"nsfs",shadowColor:"nssc",shadowOffsetY:"nssoy",shadowOffsetX:"nssox",shadowBlur:"nssb",hasShadow:"nshs"},attribute:"at",subFamily:"sf",star:"st",picture:"pt",pictureCrop:{_newKey:"ptc",x:"ptx",y:"pty",width:"ptw",height:"pth",unit:"ptu",aspect:"pta"},linkMap:"lm",isPendulum:"ip",pendulumEffect:"pe",pendulumScaleRed:"rs",pendulumScaleBlue:"bs",typeAbility:"ta",effect:"ef",setId:"si",atk:"atk",def:"def",passcode:"pc",sticker:"sti",isFirstEdition:"ife",creator:"cr"},P=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r={};if(Object.keys(t).forEach((function(a){var c=t[a];if("object"!==typeof c||null===c||Array.isArray(c)){var i=n[a];"string"===typeof i&&(r[i]=c)}else{var o,l=null===(o=n[a])||void 0===o?void 0:o._newKey;l&&(r[l]=e(c,n[a],!1))}})),a){var c=N(JSON.stringify(r));return c}return r},F=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,a="string"===typeof t?JSON.parse(T(decodeURIComponent(t))):t,r={};return Object.keys(n).forEach((function(t){var c=n[t];if("object"!==typeof c||null===c||Array.isArray(c))a[c]&&(r[t]=a[c]);else{var i=null===c||void 0===c?void 0:c._newKey;i&&a[i]&&(r[t]=e(a[i],n[t]))}})),r},A=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=n?F(e):"string"===typeof e?JSON.parse(e):e,B(t)},B=function(e){var t=Object(S.a)(e);return void 0===t.effectStyle&&(t.effectStyle=Object(l.a)({},v.effectStyle)),void 0===t.version&&(t.version=1),t},L=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="",a=e.length,r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*a));return n},z=function(){return"".concat(L("ABCDEFGHIJKLMNOPQRSTUVWXYZ",4),"-EN").concat(L("0123456789",3))},M=function(){return"".concat(L("0123456789",8))},U=function(e){var t,n,a,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=e,i="",o=/^(\[([^\]]*)\]\s*)/m,l=null===(t=o.exec(c))||void 0===t?void 0:t[1],s=null===(n=o.exec(c))||void 0===n?void 0:n[2];s&&l?(i=s,c=c.replace(l,"")):i="";var u="",d=/(\n^[\r\t\f\v \u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]*\([\w\W]+\))\s*$/m,f=null===(a=d.exec(e))||void 0===a?void 0:a[1];return f&&r?(u=f,c=c.replace(f,"")):u="",{material:i,body:c,flavorCondition:u}},D=function(e){var t=null!==e&&void 0!==e?e:"";return t=t.replace(/(^|[-\u2014\s(["])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/[(\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/--/g,"\u2014")};function H(e,t){if(window.history.pushState){var n=new URLSearchParams(window.location.search);n.set(e,t);var a=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+n.toString();window.history.pushState({path:a},"",a)}}var Y=n(55),X=n(336),G=n(87),W=n(339),V=n(338),K=n(174),J=n(148),q=n.n(J),_=n(334),Q=(n(184),function(){return Object(a.jsx)(_.a,{})});Q.FullView=function(){return Object(a.jsx)("div",{className:"loading-fullview",children:Object(a.jsx)(_.a,{size:"large"})})};n(193),n(194);var Z=c.a.forwardRef((function(e,t){var n=e.noRedrawNumber,c=void 0===n?0:n,i=e.defaultExternalSource,o=void 0===i?"":i,s=e.previewCanvasRef,u=e.children,d=e.ratio,h=void 0===d?1:d,b=e.defaultCropInfo,p=e.onSourceChange,v=void 0===p?function(){}:p,j=e.onImageChange,m=void 0===j?function(){}:j,g=e.onTainted,x=void 0===g?function(){}:g,O=Object(r.useState)("anonymous"),w=Object(f.a)(O,2),C=w[0],y=w[1],S=Object(r.useState)("external"),k=Object(f.a)(S,2),N=k[0],T=k[1],R=Object(r.useState)(""),I=Object(f.a)(R,2),E=I[0],P=I[1],F=Object(r.useState)(!1),A=Object(f.a)(F,2),B=A[0],L=A[1],z=Object(r.useState)(o),M=Object(f.a)(z,2),U=M[0],D=M[1],H=Object(r.useRef)(null),Y=Object(r.useState)(b),G=Object(f.a)(Y,2),W=G[0],J=G[1],_=Object(r.useState)(null),Z=Object(f.a)(_,2),$=Z[0],ee=Z[1],te=Object(r.useCallback)((function(e){L(!1),H.current=e}),[]);return Object(r.useEffect)((function(){var e,t,n,a,r,c=H.current,i=s,o=$;if(o&&i&&c){var l=i.getContext("2d");if(l){var u=c.naturalWidth/c.width,d=c.naturalHeight/c.height,f=window.devicePixelRatio,h=Math.ceil(i.getBoundingClientRect().width),b=Math.ceil(i.getBoundingClientRect().height),p=null!==(e=o.aspect)&&void 0!==e?e:0;i.width=(null!==h&&void 0!==h?h:0)*f,i.height=(null!==b&&void 0!==b?b:0)*f,l.setTransform(f,0,0,f,0,0),l.imageSmoothingQuality="high",l.drawImage(c,(null!==(t=o.x)&&void 0!==t?t:0)*u,(null!==(n=o.y)&&void 0!==n?n:0)*d,(null!==(a=o.width)&&void 0!==a?a:0)*u,(null!==(r=o.height)&&void 0!==r?r:0)*d,0,0,null!==h&&void 0!==h?h:0,(null!==b&&void 0!==b?b:0)/(p>0?p:1)),m(o,N)}}}),[$,s,c]),Object(r.useImperativeHandle)(t,(function(){return{forceExternalSource:function(e,t){("internal"===N?E:U)!==e&&(L(!0),T("external"),v(e),D(e)),J(t)}}})),Object(r.useEffect)((function(){var e=null!==$&&void 0!==$?$:{},t=e.height,n=e.aspect,a=e.width;"number"===typeof t&&"number"===typeof n&&"number"===typeof a&&h>0&&h!==n&&J(Object(l.a)(Object(l.a)({},$),{},{aspect:h,height:a/h}))}),[h]),Object(a.jsxs)("div",{className:"card-image-cropper",children:[Object(a.jsxs)("div",{className:"card-image-source-input",children:[u,Object(a.jsxs)(V.a.Group,{onChange:function(e){return T(e.target.value)},value:N,children:[Object(a.jsx)(V.a.Button,{value:"external",children:Object(a.jsx)(X.a,{addonBefore:"Link",placeholder:"https://my-online-image...",value:U,onChange:function(e){var t=e.target.value;L(!0),T("external"),v(t),D(t)},maxLength:256},"key")}),Object(a.jsxs)(V.a.Button,{value:"internal",children:[Object(a.jsx)(X.a,{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){L(!0);var t=new FileReader;t.addEventListener("load",(function(){"string"===typeof t.result&&(P(t.result),T("internal"))})),t.readAsDataURL(e.target.files[0])}}}),Object(a.jsx)("div",{children:"internal"===N&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{className:"download-button",disabled:!(null===$||void 0===$?void 0:$.width)||!(null===$||void 0===$?void 0:$.height),onClick:function(){return s&&function(e,t){t&&e&&e.toBlob((function(e){if(null!==e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.download="cropPreview.png",n.href=URL.createObjectURL(e),n.click(),window.URL.revokeObjectURL(t)}}),"image/png",1)}(s,$)},children:"Download cropped image#3b9dff"}),Object(a.jsx)("span",{style:{color:"#FF6F6F"},children:"Offline images are not auto saved!"})]})})]})]})]}),Object(a.jsxs)("div",{className:"card-cropper",children:[B&&Object(a.jsx)(Q.FullView,{}),Object(a.jsx)(q.a,{src:"internal"===N?E:U,onImageLoaded:te,onImageError:function(){x(),y(void 0)},crop:W,onChange:function(e){return J(Object(l.a)(Object(l.a)({},e),{},{aspect:h}))},onComplete:function(e){return ee(e)},ruleOfThirds:!0,crossorigin:C},"".concat(N).concat(h))]})]})})),$=n(47),ee=(n(214),function(e){var t=e.defaultValue,n=void 0===t?[]:t,c=e.onChange,i=void 0===c?function(){}:c,o=Object(r.useState)(n),l=Object(f.a)(o,2),s=l[0],u=l[1],d=[-45,0,45,-90,0,90,-135,180,135],h=JSON.stringify(s);return Object(r.useEffect)((function(){i(s)}),[h]),Object(a.jsxs)("div",{className:"link-marker-chooser",children:[Object(a.jsx)("div",{className:"title",children:"Link Arrows"}),Object(a.jsx)("div",{className:"container",children:Object($.a)(Array(9)).map((function(e,t){var n="".concat(t+1);return"5"===n?Object(a.jsx)(G.a,{overlay:"Reset",children:Object(a.jsx)("div",{className:"link-marker-reset",onClick:function(){u([])},children:"R"})},"5"):Object(a.jsx)("div",{className:"link-marker-button marker-".concat(t+1," ").concat(s.includes(n)?"marker-checked":""),onClick:function(){u((function(e){var t=Object($.a)(e);return t.includes(n)?t=t.filter((function(e){return e!==n})):t.push(n),t}))},children:Object(a.jsx)("div",{className:"link-marker-icon link-marker-icon-".concat(t+1),style:{transform:"rotate(".concat(d[t],"deg)")}})},n)}))})]})}),te=n(53),ne=n(344),ae=(n(122),x.map((function(e){var t=e.color,n=e.name;return{label:n.toLocaleUpperCase(),value:n,props:{style:{color:t,fontWeight:"bold"}}}}))),re=j.map((function(e){var t=e.labelColor,n=e.name;return{label:n,value:n,props:{style:{backgroundColor:e.labelBackgroundColor,color:t}}}})),ce=[{name:"DARK",color:"#b41dda"},{name:"EARTH",color:"#8d8e8e"},{name:"FIRE",color:"#e51b23"},{name:"LIGHT",color:"#bfae32"},{name:"WATER",color:"#008ecd"},{name:"WIND",color:"#28ab35"},{name:"DIVINE",color:"#ef6300"},{name:"SPELL",color:"#1b8f83"},{name:"TRAP",color:"#c32a8c"}].map((function(e){var t=e.name;return{label:Object(a.jsx)("img",{alt:t,src:"".concat("/ygocarder-v1","/asset/image/attribute/attr-").concat(t.toLowerCase(),".png")}),value:t}})),ie=m.map((function(e){return{label:e,value:e}})),oe=Object($.a)(Array(14)).map((function(e,t){return{label:t,value:t}})),le=["no-sticker","gold","silver","beta","holo5","holo4","holo3","holo2","holo1"].map((function(e){return{label:"no-sticker"===e?Object(a.jsx)("span",{children:"NONE"}):Object(a.jsx)("img",{alt:e,src:"".concat("/ygocarder-v1","/asset/image/sticker/sticker-").concat(e.toLowerCase(),".png")}),value:e}})),se=[{label:"Strict",value:"strict"},{label:"Loose",value:"loose"},{label:"Very Loose",value:"veryLoose"}],ue=n(171),de=n(341);n(215);var fe=function(e){var t=e.targetId,n=void 0===t?"":t,c=e.onPick,i=void 0===c?function(){}:c,o=Object(r.useState)(null),l=Object(f.a)(o,2),s=l[0],u=l[1],d=function(e){var t=document.getElementById(n);if(t){var a=function(e,t){if(document.selection)return e.focus(),document.selection.createRange().text=t,{value:e.value,position:0};if(e.selectionStart||0===e.selectionStart){var n=e.selectionStart,a=e.selectionEnd;return e.value=e.value.substring(0,n)+t+e.value.substring(a,e.value.length),e.selectionStart=n+t.length,e.selectionEnd=n+t.length,e.focus(),{value:e.value,position:n+t.length}}return e.value+=t,{value:e.value,position:0}}(t,e).value;i(a)}};Object(r.useEffect)((function(){u(document.getElementById("char-picker"))}),[]);var h=Object(r.useCallback)((function(e){var t=e.target,n=e.left,a=e.top,r=e.transform;t.style.left="".concat(n,"px"),t.style.top="".concat(a,"px"),t.style.transform=r}),[]);return Object(a.jsxs)("div",{className:"char-picker-container",children:[Object(a.jsxs)("div",{id:"char-picker",className:"char-picker",children:[Object(a.jsx)("div",{className:"handler",children:Object(a.jsx)(de.a,{})}),["\u221e","\u2606","\u25cf","\xa9","\u2122","\u2c6f"].map((function(e){return Object(a.jsx)("button",{className:"ant-btn",onClick:function(){return d(e)},children:e},e)}))]}),Object(a.jsx)(ue.a,{target:s,container:null,edge:!1,draggable:!0,throttleDrag:0,onDrag:h})]})},he=n(347),be=n(340),pe=n(335),ve=n(114),je=n(342),me=n(343),ge=n(173),xe=(n(322),c.a.memo((function(e){var t=e.defaultType,n=e.defaultValue,c=e.onChange,i=Object(r.useState)(t),o=Object(f.a)(i,2),s=o[0],u=o[1],d=Object(r.useState)(n),h=Object(f.a)(d,2),b=h[0],p=h[1],v=Object(r.useState)(!1),j=Object(f.a)(v,2),m=j[0],g=j[1],x=Object(r.useState)(!1),O=Object(f.a)(x,2),w=O[0],C=O[1],y=Object(r.useState)(0),S=Object(f.a)(y,2),k=S[0],N=S[1],T=function(){return N((function(e){return e+1}))},R=Object(r.useRef)(Object(te.debounce)(c,250)).current,I=function(e){return function(t){p((function(n){var a=Object(l.a)(Object(l.a)({},n),{},Object(Y.a)({},e,t));return R("custom",a),a}))}};return Object(r.useEffect)((function(){0!==k&&R("custom",b)}),[k]),Object(a.jsx)("div",{className:"ant-input-group-wrapper name-color-input",children:Object(a.jsxs)("span",{className:"ant-input-wrapper ant-input-group",children:[Object(a.jsx)("span",{className:"ant-input-group-addon",children:"Name Color"}),Object(a.jsx)("span",{className:"ant-input-affix-wrapper",children:Object(a.jsxs)("div",{className:"ant-radio-group ant-radio-group-outline",children:[Object(a.jsxs)("label",{className:"ant-radio-wrapper ".concat("auto"===s?"ant-radio-wrapper-checked":""),onClick:function(){u("auto"),R("auto",b)},children:[Object(a.jsxs)("span",{className:"ant-radio ".concat("auto"===s?"ant-radio-checked":""),children:[Object(a.jsx)("input",{type:"radio",className:"ant-radio-input",value:"auto"}),Object(a.jsx)("span",{className:"ant-radio-inner"})]}),Object(a.jsx)("span",{children:"Auto"})]}),Object(a.jsxs)("label",{className:"ant-radio-wrapper ".concat("custom"===s?"ant-radio-wrapper-checked":""),onClick:function(){u("custom"),R("custom",b)},children:[Object(a.jsxs)("span",{className:"ant-radio ".concat("custom"===s?"ant-radio-checked":""),children:[Object(a.jsx)("input",{type:"radio",className:"ant-radio-input",value:"custom"}),Object(a.jsx)("span",{className:"ant-radio-inner"})]}),Object(a.jsxs)("div",{className:"style-picker",children:["Custom",Object(a.jsx)(he.a,{overlayClassName:"input-overlay style-picker-overlay",content:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"style-picker-mask",onClick:function(){return g(!1)}}),Object(a.jsx)("div",{className:"custom-style-picker",children:Object(a.jsxs)("div",{className:"custom-style-text",children:[Object(a.jsx)("h2",{children:"Text Color"}),Object(a.jsx)(ve.a,{color:b.fillStyle,onChange:function(e){u("custom"),p((function(t){return Object(l.a)(Object(l.a)({},t),{},{fillStyle:e.hex})})),T()}})]})})]}),visible:m,placement:"bottom",children:Object(a.jsxs)("div",{className:"picker-dropdown color-picker-dropdown",onClick:function(){return g((function(e){return!e}))},children:["Change Color ",m?Object(a.jsx)(je.a,{}):Object(a.jsx)(me.a,{})]})},"color-picker"),Object(a.jsx)(he.a,{overlayClassName:"input-overlay style-picker-overlay",content:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"style-picker-mask",onClick:function(){return C(!1)}}),Object(a.jsxs)("div",{className:"custom-style-picker",children:[Object(a.jsx)("h3",{className:"custom-style-expand",children:Object(a.jsx)(W.a,{value:"has-shadow",checked:b.hasShadow,onChange:function(){u("custom"),p((function(e){return Object(l.a)(Object(l.a)({},e),{},{hasShadow:!e.hasShadow})})),T()},children:"Has Shadow?"})}),b.hasShadow&&Object(a.jsxs)("div",{className:"custom-style-shadow",children:[Object(a.jsx)("h2",{children:"Position"}),Object(a.jsxs)("div",{className:"shadow-position",children:[Object(a.jsx)(ge.a,{axis:"xy",styles:{track:{backgroundColor:"#009ce0",width:100,height:100,gridRow:"span 3",position:"relative"},thumb:{backgroundColor:"#91d5ff",zIndex:10}},xmax:5,xmin:-5,ymax:5,ymin:-5,x:b.shadowOffsetX,y:b.shadowOffsetY,onChange:function(e){var t=e.x,n=e.y;p((function(e){return Object(l.a)(Object(l.a)(Object(l.a)({},e),e),{},{shadowOffsetX:t,shadowOffsetY:n})})),T()}}),Object(a.jsxs)("div",{className:"single-slider",children:["X Offset: ",Object(a.jsx)(be.a,{size:"small",value:b.shadowOffsetX,onChange:I("shadowOffsetX")})]}),Object(a.jsxs)("div",{className:"single-slider",children:["Y Offset: ",Object(a.jsx)(be.a,{size:"small",value:b.shadowOffsetY,onChange:I("shadowOffsetY")})]}),Object(a.jsxs)("div",{className:"single-slider",children:["Blur: ",Object(a.jsx)(pe.a,{value:b.shadowBlur,min:0,max:10,onChange:function(e){"number"===typeof e&&(p((function(t){return Object(l.a)(Object(l.a)({},t),{},{shadowBlur:e})})),T())}})]}),Object(a.jsx)("div",{})]}),Object(a.jsx)("h2",{children:"Color"}),Object(a.jsx)(ve.a,{color:b.shadowColor,onChange:function(e){p((function(t){return Object(l.a)(Object(l.a)({},t),{},{shadowColor:e.hex})})),T()}})]})]})]}),visible:w,placement:"bottom",children:Object(a.jsxs)("div",{className:"picker-dropdown shadow-picker-dropdown",onClick:function(){return C((function(e){return!e}))},children:["Change Shadow ",w?Object(a.jsx)(je.a,{}):Object(a.jsx)(me.a,{})]})},"shadow-picker")]})]})]})})]})})}),(function(){return!0}))),Oe=function(e){var t=e.onChange,n=e.value,r=e.optionList,c=e.children,i=["ant-radio-group ant-radio-group-outline checkbox-train",e.className].join(" ");return Object(a.jsxs)("div",{className:i,children:[c&&Object(a.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:c}),r.map((function(e){var r="".concat(e.value)==="".concat(n);return Object(a.jsxs)("label",Object(l.a)(Object(l.a)({},e.props),{},{className:"ant-radio-button-wrapper ".concat(r?"ant-radio-button-wrapper-checked":""),onClick:function(){t(e.value)},children:[Object(a.jsx)("span",{className:"ant-radio-button ".concat(r?"ant-radio-button-checked":""),children:Object(a.jsx)("span",{className:"ant-radio-button-inner"})}),Object(a.jsx)("span",{children:e.label})]}),e.value)}))]})},we=X.a.TextArea,Ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(a){t((function(t){var r;return Object(l.a)(Object(l.a)({},t),{},Object(Y.a)({},e,n("string"===typeof a||"number"===typeof a||Array.isArray(a)?a:null===a||void 0===a||null===(r=a.target)||void 0===r?void 0:r.value)))}))}},ye=function(e){var t=e.seeder,n=e.onGenerate;return Object(a.jsx)("span",{style:{marginLeft:10,paddingLeft:10,borderLeft:"1px solid #222"},children:Object(a.jsx)(G.a,{overlay:"Randomize",children:Object(a.jsx)(ne.a,{onClick:function(){return n(t())}})})})},Se=c.a.forwardRef((function(e,t){var n=e.currentCard,c=e.receivingCanvasRef,i=e.defaultCropInfo,o=e.onCardChange,s=e.onImageChange,u=e.onTainted,d=e.children,h=Object(r.useState)(!0),b=Object(f.a)(h,2),p=b[0],v=b[1],j=Object(r.useRef)(null),m=function(e){o((function(t){return e(t)}))},g=Ce("foil",m),x=Ce("attribute",m),y=Ce("subFamily",m),S=Object(te.debounce)(Ce("name",m),350),k=Ce("star",m),N=Ce("picture",m),T=Ce("linkMap",m),R=Ce("pendulumScaleRed",m),I=Ce("pendulumScaleBlue",m),E=Object(te.debounce)(Ce("pendulumEffect",m),350),P=Object(te.debounce)(Ce("effect",m),350),F=Ce("atk",m),A=Ce("def",m),B=Object(te.debounce)((function(e){m((function(t){return Object(l.a)(Object(l.a)({},t),{},{typeAbility:e.map((function(e){return"".concat(e)}))})}))}),350),L=Ce("setId",m),U=Ce("passcode",m),D=Ce("sticker",m),H=Ce("creator",m),Y=n.frame,G=n.foil,V=n.name,K=n.nameStyleType,J=n.nameStyle,q=n.picture,_=n.effect,Q=n.effectStyle,$=n.typeAbility,ne=n.isPendulum,ue=n.pendulumEffect,de=n.pendulumScaleRed,he=n.pendulumScaleBlue,be=n.atk,pe=n.def,ve=n.linkMap,je=n.attribute,me=n.subFamily,ge=n.star,Se=n.setId,ke=n.passcode,Ne=n.isFirstEdition,Te=n.creator,Re=n.sticker,Ie=O(n),Ee=w(n),Pe=C(n),Fe=Object(r.useState)($.join("/")),Ae=Object(f.a)(Fe,2),Be=Ae[0],Le=Ae[1],ze=Object(r.useState)(V),Me=Object(f.a)(ze,2),Ue=Me[0],De=Me[1],He=Object(r.useState)(_),Ye=Object(f.a)(He,2),Xe=Ye[0],Ge=Ye[1],We=Object(r.useState)(ue),Ve=Object(f.a)(We,2),Ke=Ve[0],Je=Ve[1],qe=Object(r.useState)(""),_e=Object(f.a)(qe,2),Qe=_e[0],Ze=_e[1],$e=Object(r.useRef)();return Object(r.useImperativeHandle)(t,(function(){return{forceCardData:function(e){var t;Le(e.typeAbility.join("/")),De(e.name),Ge(e.effect),Je(e.pendulumEffect),null===(t=j.current)||void 0===t||t.forceExternalSource(e.picture,e.pictureCrop)}}})),Object(a.jsxs)("div",{className:"card-info-panel",children:[d,Object(a.jsx)(fe,{targetId:Qe,onPick:function(e){var t,n,a;$e.current&&(null===(t=$e.current)||void 0===t||null===(n=t.props)||void 0===n||null===(a=n.onChange)||void 0===a||a.call(n,{target:{value:e}}))}}),Object(a.jsx)(Oe,{className:"foil-radio",value:G,onChange:g,optionList:ae,children:Object(a.jsx)("span",{children:"Foil"})}),Object(a.jsx)(Oe,{className:"frame-radio",value:Y,onChange:function(e){o((function(t){var n="".concat(e),a="spell"===n||"trap"===n,r="spell"===n?["Spell Card"]:"trap"===n?["Trap Card"]:t.typeAbility;return a&&Le(r[0]),Object(l.a)(Object(l.a)({},t),{},{frame:n,isPendulum:"link"!==n&&"token"!==n&&!a&&t.isPendulum,subFamily:a?"NO ICON":t.subFamily,attribute:a?"".concat(n).toUpperCase():t.attribute,typeAbility:"spell"===n?["Spell Card"]:"trap"===n?["Trap Card"]:t.typeAbility})}))},optionList:re}),Object(a.jsxs)("div",{className:"card-header custom-gap",children:[Object(a.jsx)(X.a,{id:"name",ref:"name"===Qe?$e:null,onFocus:function(){return Ze("name")},allowClear:!0,addonBefore:"Name",placeholder:"Card Name",value:Ue,className:"name-input",onChange:function(e){S(e),De(e.target.value)}}),Object(a.jsx)(xe,{defaultType:K,defaultValue:J,onChange:function(e,t){o((function(n){return Object(l.a)(Object(l.a)({},n),{},{nameStyleType:e,nameStyle:t})}))}}),Pe?Ee?null:Object(a.jsx)(Oe,{className:"checkbox-star-train",value:"".concat(ge),onChange:k,optionList:oe,children:Object(a.jsx)("span",{children:Ie?"Rank":"Level"})}):Object(a.jsx)(Oe,{value:me,onChange:y,optionList:ie,children:Object(a.jsx)("span",{children:"Icon"})}),Object(a.jsx)(Oe,{className:"checkbox-image-train",value:je,onChange:x,optionList:ce,children:Object(a.jsx)("span",{children:"Attribute"})})]}),Object(a.jsxs)("div",{className:"main-info",children:[Object(a.jsxs)("div",{className:"main-info-first",children:[Object(a.jsx)(X.a,{id:"set-id",ref:"set-id"===Qe?$e:null,onFocus:function(){return Ze("set-id")},allowClear:!0,className:"set-id-input",addonBefore:Object(a.jsxs)(a.Fragment,{children:["Set ID",Object(a.jsx)(ye,{seeder:z,onGenerate:L})]}),onChange:L,placeholder:"Set ID",value:Se}),Pe&&"link"!==Y&&"token"!==Y&&Object(a.jsxs)("div",{className:"pendulum-container",children:[Object(a.jsxs)("div",{className:"joined-row",children:[Object(a.jsx)(W.a,{onChange:function(e){return o((function(t){return Object(l.a)(Object(l.a)({},t),{},{isPendulum:e.target.checked})}))},checked:ne,children:"Is Pendulum?"}),ne&&Object(a.jsx)(W.a,{onChange:function(e){return v(e.target.checked)},checked:p,children:"Mirror Scale?"})]}),ne&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(X.a,{addonBefore:Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{style:{color:"#3b9dff"},children:"Blue"})," Scale"]}),value:he,onChange:function(e){I(e),p&&R(e)}},"blue-scale")}),Object(a.jsx)("div",{children:Object(a.jsx)(X.a,{addonBefore:Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{style:{color:"#ff6f6f"},children:"Red"})," Scale"]}),value:de,onChange:function(e){p&&I(e),R(e)}},"red-scale")}),Object(a.jsx)("div",{className:"joined-row",style:{position:"relative"},children:Object(a.jsx)(we,{id:"pendulum-effect",ref:"pendulum-effect"===Qe?$e:null,onFocus:function(){return Ze("pendulum-effect")},allowClear:!0,placeholder:"Pendulum effect",value:Ke,onChange:function(e){E(e),Je(e.target.value)},rows:6},"pendulum-effect")})]})]}),Object(a.jsx)(X.a,{addonBefore:"Type",id:"type",ref:"type"===Qe?$e:null,onFocus:function(){return Ze("type")},allowClear:!0,onChange:function(e){var t=e.target.value;Le(t),B(t.split("/").map((function(e){return e.trim()})).filter((function(e){return"string"===typeof e&&e.length>0})))},placeholder:"Type / Ability",style:{width:"100%"},value:Be}),Object(a.jsx)(Oe,{className:"checkbox-condense-train",value:"".concat(null===Q||void 0===Q?void 0:Q.condenseTolerant),onChange:function(e){return function(e){o((function(t){return Object(l.a)(Object(l.a)({},t),{},{effectStyle:Object(l.a)(Object(l.a)({},t.effectStyle),{},{condenseTolerant:e})})}))}(e)},optionList:se,children:Object(a.jsx)("span",{children:"Condense Threshold"})}),Object(a.jsx)(we,{id:"card-effect",ref:"card-effect"===Qe?$e:null,onFocus:function(){return Ze("card-effect")},allowClear:!0,placeholder:"Card effect",value:Xe,rows:10,onChange:function(e){P(e),Ge(e.target.value)}},"effect"),Object(a.jsxs)("div",{className:"card-footer-input",children:[Pe?Object(a.jsx)(X.a,{id:"atk",ref:"atk"===Qe?$e:null,onFocus:function(){return Ze("atk")},addonBefore:"ATK",allowClear:!0,value:be,onChange:F},"atk"):Object(a.jsx)("div",{}),Pe?Object(a.jsx)(X.a,{id:"def",ref:"def"===Qe?$e:null,onFocus:function(){return Ze("def")},addonBefore:"DEF",allowClear:!0,value:pe,onChange:A},"def"):Object(a.jsx)("div",{}),Object(a.jsx)(X.a,{id:"password",ref:"password"===Qe?$e:null,onFocus:function(){return Ze("password")},allowClear:!0,className:"password-input",addonBefore:Object(a.jsxs)(a.Fragment,{children:["Password",Object(a.jsx)(ye,{seeder:M,onGenerate:U})]}),onChange:U,placeholder:"Password",value:ke}),Object(a.jsx)(W.a,{className:"input-1st",onChange:function(e){return o((function(t){return Object(l.a)(Object(l.a)({},t),{},{isFirstEdition:e.target.checked})}))},checked:Ne,children:"Is 1st Edition?"}),Object(a.jsx)(X.a,{addonBefore:"Creator",id:"creator",ref:"creator"===Qe?$e:null,onFocus:function(){return Ze("creator")},allowClear:!0,className:"creator-input",onChange:H,placeholder:"Creator",value:Te}),Object(a.jsx)(Oe,{className:"sticker-input checkbox-image-train",value:Re,onChange:D,optionList:le,children:Object(a.jsx)("span",{children:"Sticker"})})]})]}),Object(a.jsx)("div",{className:"main-info-second",children:Object(a.jsx)(Z,{ref:j,noRedrawNumber:1,defaultExternalSource:q,defaultCropInfo:i,previewCanvasRef:c,onSourceChange:N,onImageChange:s,onTainted:u,ratio:ne?1.325:1,children:Ee?Object(a.jsx)(ee,{defaultValue:ve,onChange:T}):Object(a.jsx)("div",{})})})]},"pic")]})})),ke=n(345),Ne=(n(328),c.a.memo((function(){var e;return Object(a.jsxs)("div",{className:"app-header",children:[Object(a.jsx)("img",{alt:"app-logo",src:"".concat("/ygocarder-v1","/logo192.png"),width:48}),Object(a.jsxs)("div",{className:"app-description",children:[Object(a.jsxs)("h1",{children:["Yugioh Carder ",Object(a.jsxs)("small",{style:{fontFamily:"serif"},children:["v",null!==(e="1.0.26")?e:"unknown"," TCG"]})," - ",Object(a.jsx)("a",{className:"v2",href:"https://lauqerm.github.io/ygocarder",children:"V2 is available!"})]}),Object(a.jsxs)("div",{className:"app-contribution",children:[Object(a.jsxs)("span",{children:["GUI: ",Object(a.jsx)("b",{children:"Lauqerm"})]}),Object(a.jsxs)("span",{children:["Template: ",Object(a.jsx)("b",{children:"Grezar"})," and others (",Object(a.jsx)("a",{href:"https://www.deviantart.com/grezar/art/SKILL-UPDATE-Series-10-Card-Proxy-Template-686736691",target:"_blank",rel:"noreferrer",children:"Deviant Art"}),")"]}),Object(a.jsx)(he.a,{overlayClassName:"disclaimer-overlay",content:Object(a.jsxs)("div",{className:"disclaimer",children:[Object(a.jsx)("h2",{children:"Disclaimer"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:'This is a personal project, not an "official" card maker.'}),Object(a.jsx)("li",{children:"I holds no liability for cards created by this app, including picture, card text and any product that related to it."}),Object(a.jsx)("li",{children:"I do not own any of Yu-Gi-Oh card layers and fonts use in this project."}),Object(a.jsxs)("li",{children:["If you want to modify card layers, or use it in any public project, please contact ",Object(a.jsx)("a",{href:"https://www.deviantart.com/grezar",target:"_blank",rel:"noreferrer",children:"Grezar"})," directly."]})]})]}),children:Object(a.jsx)(ke.a,{className:"disclaimer-icon"})})]})]})]})}),(function(){return!0}))),Te=Object(a.jsx)(he.a,{overlayClassName:"disclaimer-overlay",style:{display:"inline-block"},content:Object(a.jsxs)("div",{className:"disclaimer",children:[Object(a.jsx)("h2",{children:"What is happening?"}),Object(a.jsx)("p",{children:'You are using an image host that does not get the "approval" needed to be draw to the app. Browsers see it as a potential security risk (even if it is not the case), and mark the canvas as "tainted".'}),Object(a.jsx)("h2",{children:"How does it affect me?"}),Object(a.jsxs)("p",{children:['A "tainted canvas" prevent all sort of automatic save. From then on you must save the card manually by right click it \u2192 "Save image as...". It is implying that this action is fully of your concern.',Object(a.jsx)("br",{}),'Furthemore, once it get tainted, it will remains tainted even if you switch to other "safe" image host.']}),Object(a.jsx)("h2",{children:"How do I fix it?"}),Object(a.jsxs)("p",{children:['Change to other safe and popular image host ("imgur" for example) ',Object(a.jsx)("b",{children:"then refresh the page"}),".",Object(a.jsx)("br",{}),"If you cannot afford to do that, the app will also work mostly just fine, you only need to manually save the card (and keep cautious)."]})]}),children:Object(a.jsx)(ke.a,{className:"disclaimer-icon"})}),Re=n(170),Ie=n.n(Re),Ee=n(346),Pe=[{fontSize:17,lineHeight:17,lineCount:6},{fontSize:14,lineHeight:14,lineCount:7},{fontSize:12,lineHeight:12,lineCount:8},{fontSize:11,lineHeight:11,lineCount:9},{fontSize:10,lineHeight:10,lineCount:10},{fontSize:9,lineHeight:9,lineCount:11},{fontSize:8,lineHeight:8,lineCount:12}],Fe=[{width:463,top:620,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89},{width:463,top:624,left:43.89}],Ae=[{fontSize:16.41,lineHeight:16.44,lineCount:5},{fontSize:16.41,lineHeight:16.44,lineCount:5}],Be=[{width:375,top:504.5,left:87.05},{width:375,top:504.5,left:87.05}],Le=[{fontSize:16.41,lineHeight:16.74,lineCount:8},{fontSize:13.46,lineHeight:14.28,lineCount:10}],ze=[{width:461,top:601,left:45},{width:461,top:601,left:45}],Me={small:{top:622,left:43,bracketSize:{char:18.71,bracketSpace:8.51,bracketOffsetTop:1.64},upperCaseSize:20,upperCaseScale:1,lowerCaseSize:16,lowerCaseScale:1.1,spaceScale:1,spaceSize:{frontSpace:5,char:21,behindSpace:15},iconSpace:0},medium:{top:620.8,left:43,bracketSize:{char:19.69,bracketSpace:8.51,bracketOffsetTop:1.64},upperCaseSize:21,upperCaseScale:1,lowerCaseSize:18,lowerCaseScale:.95,spaceScale:1,spaceSize:{frontSpace:5,char:23,behindSpace:15},iconSpace:0},large:{top:126,left:494,bracketSize:{char:25,bracketSpace:11,bracketOffsetTop:2},upperCaseSize:26,upperCaseScale:1.1,lowerCaseSize:23,lowerCaseScale:1,spaceScale:1.4,spaceSize:{frontSpace:5,char:23,behindSpace:15},iconSpace:32}},Ue=[{top:126,left:46,width:50,height:51},{top:116,left:226,width:99,height:32},{top:126,left:453,width:51,height:51},{top:305,left:35,width:33,height:99},{top:0,left:0,width:0,height:0},{top:305,left:482,width:32,height:99},{top:534,left:46,width:50,height:50},{top:562,left:226,width:99,height:33},{top:534,left:453,width:51,height:50}],De={gold:{art:{left:2}},platinum:{art:{left:1}}},He=function(e,t,n,a){if(e&&t){var r="".concat(t).split(""),c=0;r.forEach((function(t){c+="1"===t?.65*e.measureText(t).width:e.measureText(t).width}));var i=n-c/2;r.forEach((function(t){e.fillText(t,"1"===t?i-3:i,a),i+="1"===t?.65*e.measureText(t).width:e.measureText(t).width}))}},Ye={strict:{1:645,2:665,3:685},loose:{1:700,2:710,3:720},veryLoose:{1:740,2:770,3:800}},Xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Pe,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fe,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"strict",o=0,l="\u25cf",s=15,u="#@\u221e",d="\\s-",f=" ";if(e&&t){var h=function(){for(var h,b=D(t.trim()),p=null!==(h=Ye[i])&&void 0!==h?h:Ye.strict,v=n?{body:b,flavorCondition:"",material:""}:U(b,a),j=v.body,m=v.flavorCondition,g=v.material,x=(g.length>0?1:0)+(m.length>0?1:0),O=j.split("\n"),w=new RegExp("([".concat(u).concat(d,"])"),"g"),C=new RegExp(u,"g"),y=function(){var t,n=r[o],i=n.fontSize,d=n.lineHeight,h=n.lineCount,b=c[o],v=b.left,j=b.width,y=b.top,S=a?j-2:j,k=I(),N=1e3,T=Math.max(O.length,h);e.font="".concat(a?"italic":""," ").concat(i,"px MatrixBook"),e.textAlign="left";for(var R=function(t){var n=e.font,a=1.15*i;e.font=n.replace("MatrixBook","matrix").replace("".concat(i),"".concat(a)),t(),e.font=n},E=[];k.getIterateCount()>=0;){if(k.getIterateCount()<=0){N=k.getMedian();break}if((E=[],O.reduce((function(t,n){for(var a=k.getMedian()/1e3,r=S/a,c=n.split(w),i=1,o=[],u=0,d=function(t){var n=0;if(c[t]===l?n=s/a:C.test(c[t])?R((function(){n=e.measureText(c[t]).width})):n=e.measureText(c[t]).width,u+n>r){var d=o.join("").trim(),f=d.split(l);E.push({text:d,width:f.reduce((function(t,n){return t+e.measureText(n).width}),0)+(f.length-1)*s/a,isLast:!1}),u=n,o=[c[t]],i+=1}else u+=n,o.push(c[t])},f=0;f<c.length;f++)d(f);var h=o.join("").trim(),b=h.split(l);return E.push({text:h,width:b.reduce((function(t,n){return t+e.measureText(n).width}),0)+(b.length-1)*s/a,isLast:!0}),t+i}),0)+x)>T)k.searchDown();else{if(1e3===k.getMedian())break;N=k.reverseSearch()}}var P=function(e,t,n){e.beginPath(),e.arc(t+7,n-5.5,5.5,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.strokeStyle="#003300",e.stroke()};if(!(N<(null!==(t=p["".concat(O.length)])&&void 0!==t?t:p[3])&&o<r.length-1)){null===e||void 0===e||e.clearRect(0,0,549,750);var F=y+d;if(g.length>0){var A=e.measureText(g).width,B=Math.min(S/A,1);e.scale(B,1),e.fillText(g,v/B,F),F+=d,e.scale(1/B,1)}var L=N/1e3;if(E.forEach((function(t){var n=t.text,a=(t.width,t.isLast),r=a?Math.min(L,1):L;if(e.scale(r,1),a){var c=new RegExp("([".concat(l).concat(u,"])"),"g");n.split(c).reduce((function(t,n,a){var c=t;return a%2===0?(e.fillText(n,c/r,F),c+=e.measureText(n).width*r):n===l?(e.scale(1/r,1),P(e,c,F),c+=15,e.scale(r,1)):R((function(){e.fillText(n,c/r,F),c+=e.measureText(n).width*r})),c}),v)}else{var i=new RegExp("([".concat(l).concat(u).concat(f,"])"),"g"),o=n.split(i),s=new Set,h=0,b=0;o.forEach((function(t,n){t===f?o[n-2]===l?(s.add(n-2),h+=e.measureText(t).width*r):b+=1:t===l?h+=15:C.test(t)?R((function(){return h+=e.measureText(t).width*r})):h+=e.measureText(t).width*r}));var p=b>0?(S-h)/b:0;o.reduce((function(t,n,a){var c=t;return a%2===0?(e.fillText(n,c/r,F),c+=e.measureText(n).width*r):n===l?(e.scale(1/r,1),P(e,c,F),c+=15,e.scale(r,1),s.has(a)&&(e.fillText(f,c/r,F),c+=e.measureText(f).width*r)):n===f?s.has(a-2)||(c+=p):R((function(){e.fillText(n,c/r,F),c+=e.measureText(n).width*r})),c}),v)}e.scale(1/r,1),F+=d})),m.length>0){var z=e.measureText(m).width,M=Math.min(S/z,1);e.font="".concat(i,"px MatrixBook"),e.scale(M,1),e.fillText(m,v/M,F),F+=d,e.scale(1/M,1)}return"break"}o+=1};o<r.length;){if("break"===y())break}return{v:o}}();if("object"===typeof h)return h.v}return o},Ge=b,We=h,Ve=function(e,t,n,a,r){if(e&&t){e.textAlign="left";var c=t.split(""),i=a;return c.forEach((function(t){e.fillText(t,i,r),i+=e.measureText(t).width*(1+n/2)})),i}return 0},Ke=function(e,t,n,a,r){if(e&&t){e.textAlign="right";var c=t.split(""),i=a;return c.forEach((function(t,a){var o=c[c.length-a-1];e.fillText(o,i,r),i-=e.measureText(o).width*(1+n/2)})),i}return a},Je=function(e){e&&e.clearRect(0,0,We,Ge)},qe=function(e,t){if(e&&t){e.font="16px stone-serif-regular";var n=function(e,t,n,a){var r=t.split(n),c=r.map((function(t){return e.measureText(t).width})),i=e.measureText(n).width,o=c.reduce((function(e,t){return e+t}),0),l={splittedContent:r,splittedWidth:c,symbolWidth:i,totalCondensableWidth:o,condenseRatio:1};return o>0&&(l.condenseRatio=Math.min((a-(c.length-1)*i)/o,1)),l}(e,t,"\xa9",257),a=n.splittedContent,r=n.splittedWidth,c=n.symbolWidth,i=n.condenseRatio;i<1?(e.textAlign="left",e.scale(i,1),a.reduce((function(t,n,o){e.fillText(n,t/i,777);var l=t+r[o]*i;return o<a.length-1&&(e.scale(1/i,1),e.fillText("\xa9",l,777),l+=c,e.scale(i,1)),l}),239),e.scale(1/i,1)):(e.textAlign="right",Ke(e,t,-.15,496/i,777)),e.textAlign="left"}},_e=function(e,t,n,a){if(e&&void 0!==t)if("\u221e"===t)e.textAlign="right",e.font="bold 25px matrix",e.fillText(t,n+49.94,a);else{e.textAlign="left";var r="".concat(t).split("?"),c=r.reduce((function(t,n,a){e.font="25px MatrixBoldSmallCaps";var c=t+e.measureText(n).width;return a<r.length-1&&(e.font="25px matrix",c+=e.measureText("?").width),c}),0);if(c>0){var i=Math.min(49.94/c,1);e.scale(i,1),r.reduce((function(t,n,c,o){var l=o[o.length-1-c],s=t;return e.font="25px MatrixBoldSmallCaps",s-=e.measureText(l).width*i,e.fillText(l,s/i,a),c<r.length-1&&(e.font="bold 25px matrix",s-=e.measureText("?").width*i,e.fillText("?",s/i,a)),s}),n+49.94),e.scale(1/i,1)}}},Qe=function(e,t,n,a){return function(r){if(e){var c=n.top,i=n.bracketSize,o=i.char,l=i.bracketOffsetTop,s="left"===a?1:-1;return e.font="bold ".concat(o,"px stone-serif-bold"),e.textAlign=a,e.fillText(t,r,c-l),r+e.measureText(t).width*s}return r}},Ze=function(e,t,n){return function(a){return e?a+t.iconSpace*("left"===n?1:-1):a}},$e=function(e,t,n,a){return function(r){if(e){var c=n.top,i=n.bracketSize.bracketSpace,o="left"===a?1:-1;return e.font="bold ".concat(i,"px stone-serif-bold"),e.textAlign=a,e.fillText(t,r,c),r+e.measureText(t).width*o}return r}},et=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,c=a.top,i=a.spaceSize,o=i.frontSpace,l=i.char,s=i.behindSpace,u=a.upperCaseScale,d=a.upperCaseSize,f=a.lowerCaseScale,h=a.lowerCaseSize,b=a.spaceScale,p="left"===r?1:-1,v=function(e,t){var n=t;return e.font="bold ".concat(o,"px stone-serif-bold"),e.fillText(" ",n,c),n+=e.measureText(" ").width*p,e.font="oblique bold ".concat(l,"px stone-serif-bold"),e.scale(.65,1),e.fillText("/",n/.65,c),n+=.65*e.measureText("/").width*p,e.scale(1/.65,1),e.font="bold ".concat(s,"px stone-serif-bold"),e.fillText(" ",n,c),n+=e.measureText(" ").width*p};return function(a){var i=a;return e?(e.textAlign=r,n||"right"!==r||(i=v(e,i)),t.split("").forEach((function(t,n,a){var o="left"===r?a[n]:a[a.length-1-n];if(/[A-Z]/.test(o))e.font="bold ".concat(d,"px stone-serif-bold"),e.scale(u,1),e.fillText(o,i/u,c),i+=e.measureText(o).width*u*p,e.scale(1/u,1);else if(/\s/.test(o))e.font="bold ".concat(h,"px stone-serif-bold"),e.scale(b,1),e.fillText(o,i/b,c),i+=e.measureText(o).width*b*p,e.scale(1/b,1);else{var l=o.toLocaleUpperCase();e.font="bold ".concat(h,"px stone-serif-bold"),e.scale(f,1),e.fillText(l,i/f,c),i+=e.measureText(l).width*f*p,e.scale(1/f,1)}})),n||"left"!==r||(i=v(e,i)),i):i}},tt={},nt=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",new Promise((function(e){return e(!1)})));case 2:return e.abrupt("return",new Promise((function(e){var c;if(!0===(null===(c=tt[n])||void 0===c?void 0:c.ready)){var i=tt[n].image,o="number"===typeof a?a:a(i),l="number"===typeof r?r:r(i);t.drawImage(i,o,l),e(!0)}else{var s=new Image;s.src="/ygocarder-v1"+n,s.onload=function(){var c="number"===typeof a?a:a(s),i="number"===typeof r?r:r(s);t.drawImage(s,c,i),tt[n].ready=!0,e(!0)},s.onerror=function(){e(!1)},tt[n]={image:s,ready:!1}}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),at=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a,r,c,i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",new Promise((function(e){return e(!1)})));case 2:return e.abrupt("return",new Promise((function(e){var o;if(!0===(null===(o=tt[n])||void 0===o?void 0:o.ready)){var l=tt[n].image,s="number"===typeof a?a:a(l),u="number"===typeof r?r:r(l);t.drawImage(l,s,u,c,i),e(!0)}else{var d=new Image;d.src="/ygocarder-v1"+n,d.onload=function(){var o="number"===typeof a?a:a(d),l="number"===typeof r?r:r(d);t.drawImage(d,o,l,c,i),tt[n].ready=!0,e(!0)},d.onerror=function(){e(!1)},tt[n]={image:d,ready:!1}}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,i){return e.apply(this,arguments)}}(),rt=function(e,t,n,a){var c=t.artCanvas,i=t.previewCanvas,o=t.frameCanvas,s=t.specialFrameCanvas,f=t.attributeCanvas,h=t.creatorCanvas,b=t.effectCanvas,v=t.nameCanvas,j=t.passcodeCanvas,x=t.pendulumEffectCanvas,S=t.pendulumScaleCanvas,k=t.setIdCanvas,N=t.statCanvas,T=t.stickerCanvas,R=t.subFamilyCanvas,I=t.typeCanvas,E=n.frame,P=n.foil,F=n.name,A=n.nameStyleType,B=n.nameStyle,L=n.effect,z=n.effectStyle,M=n.typeAbility,U=n.isPendulum,H=n.pendulumEffect,Y=n.pendulumScaleBlue,X=n.pendulumScaleRed,G=n.atk,W=n.def,V=n.linkMap,K=n.attribute,J=n.subFamily,q=n.star,_=n.setId,Q=n.passcode,Z=n.isFirstEdition,ee=n.creator,te=n.sticker,ne=function(e){return"normal"===e.frame&&C(e)}(n),ae=O(n),re=w(n),ce=C(n),ie=a.isInitializing,oe=a.imageChangeCount,le=a.pendulumSize,se=void 0===le?"medium":le,ue=Object(r.useRef)({frame:function(){return Promise.resolve()},star:function(){return Promise.resolve()},attribute:function(){return Promise.resolve()},specialFrame:function(){return Promise.resolve()},sticker:function(){return Promise.resolve()}});Object(r.useEffect)((function(){if(e){var t,n=null===(t=c.current)||void 0===t?void 0:t.getContext("2d"),a=i.current;a&&n&&(n.clearRect(0,0,548,650),U?n.drawImage(a,38,144,474,470):n.drawImage(a,67,147,416,416))}}),[e,U,oe,c,i]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=o.current)||void 0===t?void 0:t.getContext("2d");ue.current.frame=Object(d.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Je(n),t=y(E),a="normal"!==P,e.next=5,nt(n,"/asset/image/frame/frame-".concat(t,".png"),0,0);case 5:if(!a){e.next=11;break}return r=De[P].art,e.next=9,nt(n,"/asset/image/frame/frame-art-".concat(P,".png"),r.left,120);case 9:return e.next=11,nt(n,"/asset/image/frame/frame-effect-".concat(P,".png"),0,580);case 11:case"end":return e.stop()}}),e)})))}}),[e,P,E,o]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=s.current)||void 0===t?void 0:t.getContext("2d");ue.current.specialFrame=Object(d.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Je(n),t="normal"!==P,a=y(E),!U||re){e.next=12;break}if(ae){e.next=7;break}return e.next=7,nt(n,"/asset/image/pendulum/overlay-pendulum-".concat(a,".png"),0,0);case 7:return e.next=9,nt(n,"/asset/image/frame/frame-pendulum-".concat(se,".png"),0,0);case 9:if(!t){e.next=12;break}return e.next=12,nt(n,"/asset/image/frame/frame-pendulum-".concat(se,"-").concat(P,".png"),0,0);case 12:return r=t?"/asset/image/frame/frame-border-".concat(P,".png"):"/asset/image/frame/frame-border.png",e.next=15,nt(n,r,0,0);case 15:if(U||!re){e.next=29;break}if(!t){e.next=21;break}return e.next=19,nt(n,"./asset/image/link/link-overlay-".concat(P,".png"),0,110);case 19:e.next=23;break;case 21:return e.next=23,nt(n,"/asset/image/link/link-overlay.png",66,146);case 23:if(!t){e.next=26;break}return e.next=26,nt(n,"/asset/image/link/link-overlay-arrow-".concat(P,".png"),0,110);case 26:return e.next=28,Promise.all(V.map((function(e){var a=Ue[parseInt(e)-1],r=a.left,c=a.top,i=a.height,o=a.width;return at(n,t?"/asset/image/link/link-arrow-".concat(e,"-").concat(P,".png"):"/asset/image/link/link-arrow-".concat(e,".png"),r,c,o,i)})));case 28:n&&(n.textAlign="right",n.scale(1.2,1),n.font="bold 24px Yugioh Rush Duel Numbers V4",n.fillText("".concat(V.length),505/1.2,746),n.scale(1/1.2,1),n.textAlign="left");case 29:case"end":return e.stop()}}),e)})))}}),[e,P,E,re,U,ae,V,se,s]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=f.current)||void 0===t?void 0:t.getContext("2d");ue.current.attribute=function(){return null===n||void 0===n||n.clearRect(0,0,549,100),nt(n,"/asset/image/attribute/attr-".concat(K.toLowerCase(),".png"),458,37)}}}),[e,K,f]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=R.current)||void 0===t?void 0:t.getContext("2d");ue.current.star=function(){if(null===n||void 0===n||n.clearRect(0,0,549,150),ce&&!re){var e=Math.min(13,null!==q&&void 0!==q?q:0),t=ae?"rank":"level",a=-36.3636,r=34*e+2.3636*(e-1),c=e<=12?ae?23:492:ae?(549-r)/2-34:(549-r)/2+r;return Promise.all(Object($.a)(Array(e)).map((function(){return a+=36.3636,nt(n,"/asset/image/sub-family/subfamily-".concat(t,".png"),c+(34+a)*(ae?1:-1),99)})))}if(!ce){var i=J.toUpperCase();return"NO ICON"!==i&&m.includes(i)?at(n,"/asset/image/sub-family/subfamily-".concat(i.toLowerCase(),".png"),(function(e){return 491-e.naturalWidth-7}),103,29,29):new Promise((function(e){return e(!0)}))}return new Promise((function(e){return e(!0)}))}}}),[e,re,ce,ae,q,J,R]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=S.current)||void 0===t?void 0:t.getContext("2d");null===n||void 0===n||n.clearRect(0,0,549,600),n&&U&&(n.font="".concat(43,"px MatrixBoldSmallCaps"),n.textAlign="left",He(n,null!==Y&&void 0!==Y?Y:0,57,575),He(n,null!==X&&void 0!==X?X:0,493,575))}}),[ie,Y,U,X,e,S]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=v.current)||void 0===t?void 0:t.getContext("2d");if(n){var a;n.clearRect(0,0,549,100),n.textAlign="left";var r="auto"===A?"normal"!==P?null!==(a=g[P])&&void 0!==a?a:p:Object(l.a)(Object(l.a)({},p),{},{fillStyle:!ce||re||ae?"#ffffff":"#000000"}):B;!function(e,t,n,a,r,c){if(e&&t){e.fillStyle=c.fillStyle,c.hasShadow&&(e.shadowColor=c.shadowColor,e.shadowOffsetY=c.shadowOffsetY,e.shadowOffsetX=c.shadowOffsetX,e.shadowBlur=c.shadowBlur);var i=D(t).split(/([^&A-Za-z0-9\-/\s()])/g),o=i.reduce((function(t,n,a){return e.font=a%2===0?"64.59px MatrixRegularSmallCaps":"54.59px matrix",t+e.measureText(n).width}),0);if(o>0){var l=Math.min(r/o,1);e.scale(l,1),i.reduce((function(t,n,r){return e.font=r%2===0?"64.59px MatrixRegularSmallCaps":"small-caps 54.59px matrix",e.fillText(n,t/l,a),t+e.measureText(n).width*l}),n),e.scale(1/l,1)}e.fillStyle=p.fillStyle,e.shadowColor=p.shadowColor,e.shadowOffsetY=p.shadowOffsetY,e.shadowOffsetX=p.shadowOffsetX,e.shadowBlur=p.shadowBlur}}(n,F,40.52,78,409,r)}}}),[e,P,ie,re,ce,ae,F,v,B,A]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=N.current)||void 0===t?void 0:t.getContext("2d");Je(n),ce&&(_e(n,G,343.51,747),re||_e(n,W,454.93,747))}}),[ie,G,W,re,ce,e,N]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=k.current)||void 0===t?void 0:t.getContext("2d");Je(n),n&&(n.fillStyle=ae&&!U?"#fff":"#000",n.font="15px stone-serif-regular",U?Ve(n,_,-.1,45,746):re?Ke(n,_,-.1,450,590):Ke(n,_,-.1,492,589))}}),[e,ie,re,U,ae,k,_]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=j.current)||void 0===t?void 0:t.getContext("2d");if(Je(n),n){n.fillStyle=ae&&!U?"#fff":"#000",n.font="15px stone-serif-regular";var a=Ve(n,Q,.1,25,777);Z&&(n.fillStyle=ae&&!U?"#fff":"#000",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:99;if(e){e.font="bold 16px palatino-linotype-bold";var n=t;e.fillText("1",n,777),n+=e.measureText("1").width-2,e.font="bold 12px palatino-linotype-bold",e.fillText("st",n,772),n+=e.measureText("st").width,e.font="bold 15px palatino-linotype-bold",e.fillText(" Edition",n,777)}}(n,Math.max(a+10,96)))}}}),[e,Z,ie,re,U,ae,Q,j]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=h.current)||void 0===t?void 0:t.getContext("2d");Je(n),n&&(n.fillStyle=ae&&!U?"#fff":"#000",qe(n,ee))}}),[ie,re,U,ae,ee,e,h]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=T.current)||void 0===t?void 0:t.getContext("2d");ue.current.sticker=function(){return Je(n),"no-sticker"===te?Promise.resolve():nt(n,"/asset/image/sticker/sticker-".concat(te.toLowerCase(),".png"),499,750)}}}),[e,te,T]);var de=Object(r.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";if(e){var a;null===e||void 0===e||e.clearRect(0,0,549,700);var r=null!==(a=Me[t])&&void 0!==a?a:Me.medium,c=r.left,i=J.toUpperCase(),o=[Qe(e,"[",r,n),$e(e," ",r,n)].concat(Object($.a)(M.map((function(t,a){return et(e,t,a===M.length-1,r,n)}))),["large"===t?"NO ICON"===i?function(e){return e+4*("left"===n?1:-1)}:Ze(e,r,n):function(e){return e+2},Qe(e,"]",r,n)]),l=("left"===n?o:o.reverse()).reduce((function(e,t){return t(e)}),c);e.textAlign="left",l>508&&"medium"===t&&de(e,"small",n)}}),[J,M]);return Object(r.useEffect)((function(){if(e){var t,n,a=null===(t=b.current)||void 0===t?void 0:t.getContext("2d"),r=null===(n=I.current)||void 0===n?void 0:n.getContext("2d");if(null===a||void 0===a||a.clearRect(0,0,549,750),ce){var c=Xe(a,L,!1,ne,void 0,void 0,null===z||void 0===z?void 0:z.condenseTolerant);de(r,0===c?"medium":"small")}else Xe(a,L,!1,!1,Le,ze,null===z||void 0===z?void 0:z.condenseTolerant),de(r,"large","right")}}),[ie,de,L,ce,ne,null===z||void 0===z?void 0:z.condenseTolerant,e,b,I]),Object(r.useEffect)((function(){if(e){var t,n=null===(t=x.current)||void 0===t?void 0:t.getContext("2d");null===n||void 0===n||n.clearRect(0,0,549,600),ce&&U&&Xe(n,H,!0,!1,Ae,Be,null===z||void 0===z?void 0:z.condenseTolerant)}}),[e,null===z||void 0===z?void 0:z.condenseTolerant,ie,ce,U,x,H]),{drawingPipeline:ue}},ct=b,it=h;var ot=function(){var e=Object(r.useState)(!0),t=Object(f.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(""),o=Object(f.a)(i,2),s=o[0],h=o[1],b=Object(r.useState)(v),p=Object(f.a)(b,2),j=p[0],m=p[1],g=Object(r.useState)("external"),x=Object(f.a)(g,2),O=x[0],w=x[1],C=Object(r.useRef)(null),y=Object(r.useRef)(null),S=Object(r.useRef)(null),k=Object(r.useRef)(null),N=Object(r.useRef)(null),T=Object(r.useRef)(null),R=Object(r.useRef)(null),I=Object(r.useRef)(null),E=Object(r.useRef)(null),F=Object(r.useRef)(null),B=Object(r.useRef)(null),L=Object(r.useRef)(null),z=Object(r.useRef)(null),M=Object(r.useRef)(null),U=Object(r.useRef)(null),D=Object(r.useRef)(null),Y=Object(r.useRef)(null),X=Object(r.useRef)(null),G=Object(r.useState)({previewCanvas:y,drawCanvas:S,frameCanvas:k,artCanvas:N,specialFrameCanvas:T,subFamilyCanvas:R,pendulumScaleCanvas:I,pendulumEffectCanvas:E,typeCanvas:F,effectCanvas:B,nameCanvas:L,attributeCanvas:z,statCanvas:M,setIdCanvas:U,passcodeCanvas:D,creatorCanvas:Y,stickerCanvas:X}),W=Object(f.a)(G,1)[0],V=j.name,K=j.pictureCrop,J=j.isPendulum,q=Object(r.useState)(0),_=Object(f.a)(q,2),Q=_[0],Z=_[1],$=rt(!0,W,j,{imageChangeCount:Q,isInitializing:n}).drawingPipeline;Object(r.useEffect)((function(){var e,t=null===(e=S.current)||void 0===e?void 0:e.getContext("2d");t&&(t.setTransform(1,0,0,1,0,0),t.imageSmoothingQuality="high",function(e){e&&e.clearRect(0,0,it,ct)}(t)),Ie.a.load({custom:{families:["stone-serif-bold","stone-serif-bold","stone-serif-regular","matrix","palatino-linotype-bold","MatrixBook","MatrixBoldSmallCaps","MatrixRegularSmallCaps","Yugioh Rush Duel Numbers V4"],urls:["asset/font.css"]},active:function(){try{var e=window.localStorage.getItem("ygocarder-v1-card-version"),t=window.localStorage.getItem("ygocarder-v1-card-data"),n=new URLSearchParams(window.location.search).get("data");n?m(A(n,!0)):null!==t&&"1.0.26"===e&&m(A(t))}catch(a){m(v)}c(!1)},inactive:function(){h("Font could not be loaded"),c(!1)}})}),[]);var ee=Object(r.useRef)(!1),te=Object(r.useRef)({currentPipeline:Promise.resolve(),queuedPipeline:!1}),ne=Object(r.useCallback)((function(){var e,t=S.current;if(t)try{var n=document.createElement("a");n.download="".concat(V,".png"),n.href=t.toDataURL("image/png"),n.click()}catch(a){ie(!0),alert('Could not save card, please manually save it by right click the card \u2192 Choose "Save image as..."')}null===(e=document.querySelector("#export-canvas-guard"))||void 0===e||e.classList.remove("guard-on")}),[V]),ae=Object(r.useState)(!1),re=Object(f.a)(ae,2),ce=re[0],ie=re[1];Object(r.useEffect)((function(){var e,t=!0;!1===n&&(localStorage.setItem("ygocarder-v1-card-data",JSON.stringify(j)),localStorage.setItem("ygocarder-v1-card-version",null!==(e="1.0.26")?e:"unknown"),Object(d.a)(u.a.mark((function e(){var n,a,r,c,i,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.current){e.next=14;break}return null===(n=document.getElementById("export-canvas-guard"))||void 0===n||n.setAttribute("style",""),null===(a=document.getElementById("save-button-waiting"))||void 0===a||a.setAttribute("style","display: block"),null===(r=document.getElementById("save-button-ready"))||void 0===r||r.setAttribute("style","display: none"),te.current.queuedPipeline=!0,e.next=8,te.current.currentPipeline;case 8:if(!t){e.next=14;break}return te.current.currentPipeline=oe({isPendulum:J}),te.current.queuedPipeline=!1,e.next=13,te.current.currentPipeline;case 13:t&&("string"===typeof(l=P(j))&&H("data",l),null===(c=document.getElementById("export-canvas-guard"))||void 0===c||c.setAttribute("style","display: none"),null===(i=document.getElementById("save-button-waiting"))||void 0===i||i.setAttribute("style","display: none"),null===(o=document.getElementById("save-button-ready"))||void 0===o||o.setAttribute("style","display: block"),ee.current&&(ee.current=!1,ne()));case 14:case"end":return e.stop()}}),e)})))());return function(){t=!1}}));var oe=Object(r.useRef)(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isPendulum,a=void 0!==n&&n,r=S.current,c=null===r||void 0===r?void 0:r.getContext("2d"),i=function(e,t){return new Promise((function(n){if(e.current&&t){var a=e.current.toDataURL("image/png");if(a){var r=new Image;r.src=a,r.onload=function(){t.drawImage(r,0,0),n(!0)},r.onerror=function(){return n(!1)}}else n(!1)}else n(!1)}))},!r||!c){e.next=16;break}return c.clearRect(0,0,549,800),e.next=8,Promise.all(Object.values($.current).map((function(e){return e()})));case 8:return e.next=10,i(k,c);case 10:return(o=y.current)&&c&&(a?c.drawImage(o,38,144,474,470):c.drawImage(o,67,147,416,416)),e.next=14,i(T,c);case 14:return e.next=16,Promise.all([L,z,R,I,E,F,B,M,U,D,Y,X].map((function(e){return i(e,c)})));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).current;return Object(a.jsx)("div",{id:"app",onDrop:function(){},style:{backgroundImage:'url("'.concat("/ygocarder-v1",'/asset/image/texture/debut-dark.png"), linear-gradient(180deg, #00000022, #00000044)')},children:Object(a.jsxs)("div",{className:"app-container",children:[n&&Object(a.jsx)("div",{className:"full-loading",children:s.length>0?Object(a.jsx)("span",{style:{color:"#e04040"},children:s}):"Loading fonts and scripts..."}),Object(a.jsxs)("div",{className:"card-preview-panel ".concat(ce?"export-tainted":"export-normal"),children:[Object(a.jsxs)("div",{className:"export-button",children:[ce?Object(a.jsxs)("div",{id:"save-button-tainted",children:['Manually save by right click the card \u2192 "Save image as..." ',Te]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"save-button",id:"save-button-waiting",disabled:!0,children:"Save"}),Object(a.jsx)("button",{className:"save-button",id:"save-button-ready",onClick:function(){return function(){var e;null===(e=document.querySelector("#export-canvas-guard"))||void 0===e||e.classList.add("guard-on"),!1===te.current.queuedPipeline?ne():ee.current=!0}()},children:"Save"})]}),Object(a.jsxs)("div",{className:"imexport",children:[Object(a.jsx)("button",{onClick:function(){"internal"===O&&window.alert("Cannot export card data if you use offline image"),window.prompt("Save card data for later use","".concat(P(j)))},children:"Export Card Data"}),Object(a.jsx)("button",{onClick:function(){var e=window.prompt("Paste your card data");if(e){var t,n=A(e,!0);m(n),null===(t=C.current)||void 0===t||t.forceCardData(n)}},children:"Import Card Data"})]})]}),Object(a.jsxs)("div",{className:"card-canvas-group",children:[Object(a.jsx)("canvas",{id:"export-canvas",ref:S,width:it,height:ct}),Object(a.jsxs)("div",{id:"export-canvas-guard",children:[Object(a.jsx)("div",{className:"canvas-guard-alert",children:"Generating..."}),Object(a.jsx)(Ee.a,{})]}),Object(a.jsx)("canvas",{id:"frameCanvas",ref:k,width:it,height:ct}),Object(a.jsx)("canvas",{id:"artCanvas",ref:N,width:it,height:650}),Object(a.jsx)("canvas",{id:"specialFrameCanvas",ref:T,width:it,height:ct}),Object(a.jsx)("canvas",{id:"nameCanvas",ref:L,width:it,height:100}),Object(a.jsx)("canvas",{id:"attributeCanvas",ref:z,width:it,height:100}),Object(a.jsx)("canvas",{id:"subFamilyCanvas",ref:R,width:it,height:150}),Object(a.jsx)("canvas",{id:"pendulumScaleCanvas",ref:I,width:it,height:600}),Object(a.jsx)("canvas",{id:"pendulumEffectCanvas",ref:E,width:it,height:600}),Object(a.jsx)("canvas",{id:"typeCanvas",ref:F,width:it,height:700}),Object(a.jsx)("canvas",{id:"effectCanvas",ref:B,width:it,height:750}),Object(a.jsx)("canvas",{id:"statCanvas",ref:M,width:it,height:ct}),Object(a.jsx)("canvas",{id:"setIdCanvas",ref:U,width:it,height:ct}),Object(a.jsx)("canvas",{id:"passcode",ref:D,width:it,height:ct}),Object(a.jsx)("canvas",{id:"creator",ref:Y,width:it,height:ct}),Object(a.jsx)("canvas",{id:"sticker",ref:X,width:it,height:ct}),Object(a.jsx)("canvas",{className:"crop-canvas",ref:y})]})]}),!1===n&&Object(a.jsxs)(Se,{ref:C,receivingCanvasRef:y.current,currentCard:j,onCardChange:m,defaultCropInfo:K,onImageChange:function(e,t){Z((function(e){return e+1})),w(t),e&&m((function(t){return Object(l.a)(Object(l.a)({},t),{},{pictureCrop:e})}))},onTainted:function(){return ie(!0)},children:[Object(a.jsx)(Ne,{}),Object(a.jsx)("br",{})]})]})})},lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,348)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(ot,{})}),document.getElementById("root")),lt()}},[[329,1,2]]]);
//# sourceMappingURL=main.59555e34.chunk.js.map
{"version":3,"sources":["model/canvas.ts","model/index.tsx","util/categorize.tsx","3rd/index.ts","util/condenser.ts","util/index.tsx","component/loading/index.tsx","component/card-picture/index.tsx","component/link-marker/index.tsx","page/input-panel/const.tsx","page/input-panel/char-picker/index.tsx","page/input-panel/style-picker/index.tsx","page/input-panel/input-train/index.tsx","page/input-panel/index.tsx","page/app-header/index.tsx","const/size.ts","const/position.ts","draw/text.ts","draw/util.ts","draw/predefine.ts","draw/type-ability.ts","draw/image.ts","service/master-seri.tsx","app.tsx","reportWebVitals.js","index.js"],"names":["CanvasConst","defaultTextStyle","fillStyle","shadowColor","shadowOffsetY","shadowOffsetX","shadowBlur","hasShadow","defaultCard","frame","foil","name","nameStyleType","nameStyle","attribute","subFamily","star","picture","pictureCrop","x","y","width","height","unit","aspect","linkMap","isPendulum","pendulumEffect","pendulumScaleRed","pendulumScaleBlue","typeAbility","effectStyle","condenseTolerant","effect","setId","atk","def","passcode","sticker","isFirstEdition","creator","frameType","labelColor","labelBackgroundColor","iconList","foilStyleMap","gold","platinum","foilList","color","textStyle","checkXyz","card","checkLink","checkMonster","getCardFrame","find","entry","toLowerCase","JSONCrush","e","n","r","o","includes","String","fromCharCode","push","t","unshift","replace","JSONCrushSwap","length","i","l","f","h","substr","a","charCodeAt","g","indexOf","d","encodeURI","encodeURIComponent","split","join","JSONUncrush","substring","pop","RegExp","createCondenser","minThreshold","maxThreshold","min","max","median","lastEffective","iterateCount","magnitude","reverseSearch","finish","Math","searchDown","reset","getMedian","setMedian","newMedian","setLastEffective","forceMedian","getLastEffective","applyLastEffective","getIterateCount","cardFieldShortenMap","_newKey","cardDataCondenser","shortenMap","crush","condensedCard","Object","keys","forEach","cardKey","cardValue","Array","isArray","newKey","curshedCard","JSON","stringify","reverseCardDataCondenser","normalizedCondensedCard","parse","decodeURIComponent","fullCard","fullKey","shortendValue","shortendKey","rebuildCardData","isCondensed","migrateCardData","migratedCard","clone","undefined","version","randomCharacter","charSet","result","charactersLength","charAt","floor","random","randomSetID","randomPassword","splitEffect","isNormal","effectBody","effectMaterial","materialRegex","materialReplacement","exec","material","effectFlavorCondition","flavorConditionRegex","flavorCondition","body","quoteConvert","text","normalizedString","insertUrlParam","key","value","window","history","pushState","searchParams","URLSearchParams","location","search","set","newurl","protocol","host","pathname","toString","path","Loading","FullView","className","size","ImageCropper","React","forwardRef","forwardedRef","noRedrawNumber","defaultExternalSource","previewCanvasRef","children","ratio","defaultCropInfo","onSourceChange","onImageChange","onTainted","useState","crossorigin","setCrossOrigin","sourceType","setSourceType","internalSource","setInternalSource","isLoading","setLoading","externalSource","setExternalSource","imgRef","useRef","crop","setCrop","completedCrop","setCompletedCrop","onLoad","useCallback","img","current","useEffect","image","canvas","ctx","getContext","scaleX","naturalWidth","scaleY","naturalHeight","pixelRatio","devicePixelRatio","boundingWidth","ceil","getBoundingClientRect","boundingHeight","renderRatio","setTransform","imageSmoothingQuality","drawImage","useImperativeHandle","forceExternalSource","source","cropInfo","Group","onChange","target","Button","addonBefore","placeholder","maxLength","type","accept","files","reader","FileReader","addEventListener","readAsDataURL","disabled","onClick","toBlob","blob","previewUrl","URL","createObjectURL","anchor","document","createElement","download","href","click","revokeObjectURL","generateDownload","style","src","onImageLoaded","onImageError","cropData","onComplete","ruleOfThirds","LinkMarkChooser","defaultValue","choosenArrow","setChoosenArrow","rotateMap","literalChoosenArrow","map","index","normalizedIndex","overlay","cur","newMap","filter","transform","foilButton","label","toLocaleUpperCase","props","fontWeight","frameButton","backgroundColor","attributeButton","alt","process","iconButton","starButton","stickerButton","condenseButton","CharPicker","targetId","onPick","setTarget","internalOnPick","char","inputTarget","getElementById","myField","myValue","selection","focus","createRange","position","selectionStart","startPos","endPos","selectionEnd","insertAtCursor","onDrag","left","top","id","EllipsisOutlined","container","edge","draggable","throttleDrag","StylePicker","memo","defaultType","undebouncedOnChange","setType","setValue","isColorPickerVisble","setColorPickerVisible","isShadowPickerVisble","setShadowPickerVisible","changeSignal","setChangeSignal","updateSignal","cnt","debounce","setCustomValue","inputValue","curValue","newStyle","overlayClassName","content","hex","visible","placement","CaretUpOutlined","CaretDownOutlined","checked","axis","styles","track","gridRow","thumb","zIndex","xmax","xmin","ymax","ymin","CheckboxTrain","optionList","combinedClass","isChecked","TextArea","Input","onChangeFactory","mutateFunction","valueTransform","RandomButton","seeder","onGenerate","marginLeft","paddingLeft","borderLeft","SyncOutlined","CardInputPanel","currentCard","receivingCanvasRef","onCardChange","isMirrorScale","setMirrorScale","imageCropperRef","setCard","mutateFunc","onFoilChange","onAttributeChange","onSubFamilyChange","onNameChange","onStarChange","onPictureChange","onLinkMapChange","onRedScaleChange","onBlueScaleChange","onPendulumEffectChange","onEffectChange","onATKChange","onDEFChange","onTypeAbilityChange","onSetIDChange","onPasscodeChange","onStickerChange","onCreatorChange","isXyz","isLink","isMonster","displayTypeAbility","setDisplayTypeAbility","displayName","setDisplayName","displayEffect","setDisplayEffect","displayPendulumEffect","setDisplayPendulumEffect","onlineCharPicker","setOnlineCharPicker","ref","forceCardData","frameValue","isST","newTypeAbility","toUpperCase","onFocus","allowClear","ev","rows","trim","onCondenseTolerantChange","AppHeader","fontFamily","rel","ExclamationCircleOutlined","taintedCanvasWarning","display","monsterFontList","fontSize","lineHeight","lineCount","monsterSizeList","pendulumFontList","pendulumSizeList","stFontList","stSizeList","typeSizeMap","small","bracketSize","bracketSpace","bracketOffsetTop","upperCaseSize","upperCaseScale","lowerCaseSize","lowerCaseScale","spaceScale","spaceSize","frontSpace","behindSpace","iconSpace","medium","large","arrowPositionList","foilPosition","art","drawScale","baseline","digitList","totalWidth","digit","measureText","accLeft","fillText","CondenseTolerantMap","strict","loose","veryLoose","drawEffect","isPendulumEffect","fontList","sizeList","effectSizeLevel","bulletSymbol","bulletSymbolWidth","specialSymbol","breakableSymbol","spaceSymbol","normalizedContent","tolerantPerSentence","additionalLineCount","sentencizeText","tokenizer","specialSymbolReg","basedWidth","condenser","effectiveRatio","maxLine","font","textAlign","switchFont","func","tempFont","largeSize","lineList","reduce","prev","curr","condenseRatio","hypoWidth","tokenizedText","currentLineCount","tokenSentence","tokenWidth","test","fullString","fullStringSplittedByBullet","isLast","drawBullet","beginPath","arc","PI","fill","lineWidth","strokeStyle","stroke","clearRect","actualWidth","scale","sigmoidRatio","splitter","spaceSeparatedText","spaceNextToBulletSet","Set","nonSpaceWidth","spaceCount","add","spaceWidth","has","CanvasHeight","CanvasWidth","fillTextLeftWithSpacing","str","letterSpacingRatio","charList","curLeft","fillTextRightWithSpacing","curRight","c","clearCanvas","drawCreatorText","symbol","maxWidth","splittedContent","splittedWidth","symbolWidth","totalCondensableWidth","returnBundle","measureWithSymbol","nextEdge","drawAD","nextWidth","arr","curText","drawBracketTemplate","alignment","bracketChar","alignmentOffset","drawIconSpaceTemplate","drawBracketSpaceTemplate","drawTextTemplate","spaceChar","drawSlashTemplate","baseOffset","totalOffset","upperChar","imageCacheMap","drawFromSource","sx","sy","Promise","resolve","ready","normalizedX","normalizedY","Image","onload","onerror","drawFromSourceWithSize","dw","dh","useMasterSeriDrawer","active","canvasMap","artCanvas","previewCanvas","frameCanvas","specialFrameCanvas","attributeCanvas","creatorCanvas","effectCanvas","nameCanvas","passcodeCanvas","pendulumEffectCanvas","pendulumScaleCanvas","setIdCanvas","statCanvas","stickerCanvas","subFamilyCanvas","typeCanvas","checkNormal","isInitializing","imageChangeCount","pendulumSize","drawingPipeline","specialFrame","previewCtx","cardType","hasFoil","foiledBorder","all","parseInt","counter","offset","normalizedSubFamily","splittedText","contentWidth","drawName","endOfPasscode","draw1stEdition","drawTypeAbility","textSize","instructionList","totalLeft","reverse","typeCtx","effectIndexSize","App","setInitializing","error","setError","cardInputRef","drawCanvasRef","frameCanvasRef","artCanvasRef","specialFrameCanvasRef","subFamilyCanvasRef","pendulumScaleCanvasRef","pendulumEffectCanvasRef","typeCanvasRef","effectCanvasRef","nameCanvasRef","attributeCanvasRef","statCanvasRef","setIdCanvasRef","passcodeCanvasRef","creatorCanvasRef","stickerCanvasRef","drawCanvas","setImageChangeCount","WebFont","load","custom","families","urls","localCardVersion","localStorage","getItem","localCardData","urlParam","get","inactive","pendingSave","exportRef","currentPipeline","queuedPipeline","canvasRef","link","toDataURL","setTainted","alert","querySelector","classList","remove","isTainted","relevant","setItem","setAttribute","onExport","exportProps","exportCtx","generateLayer","canvasLayer","layerData","layer","values","callDraw","currentlayer","onDrop","backgroundImage","onSave","prompt","cardData","decodedCard","LoadingOutlined","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.59555e34.chunk.js","sourcesContent":["export const CanvasConst = {\n    width: 549,\n    height: 800,\n};","export type TextStyleType = 'auto' | 'custom';\nexport type TextStyle = typeof defaultTextStyle;\nexport const defaultTextStyle = {\n    fillStyle: '#000000',\n    shadowColor: '#000000',\n    shadowOffsetY: 0,\n    shadowOffsetX: 0,\n    shadowBlur: 0,\n    hasShadow: false,\n};\n\nexport type CondenseType = 'strict' | 'loose';\n\nexport type Card = typeof defaultCard;\nexport const defaultCard = {\n    frame: 'fusion',\n    foil: 'normal',\n    name: 'Junko',\n    nameStyleType: 'auto' as TextStyleType,\n    nameStyle: {\n        fillStyle: '#000000',\n        shadowColor: '#000000',\n        shadowOffsetY: 0,\n        shadowOffsetX: 0,\n        shadowBlur: 0,\n        hasShadow: false,\n    } as TextStyle,\n    attribute: 'LIGHT',\n    subFamily: 'NO ICON',\n    star: 6,\n    picture: 'https://i.imgur.com/h5kXZeC.png',\n    pictureCrop: {\n        x: 0,\n        y: 12,\n        width: 269,\n        height: 269,\n        unit: 'px',\n        aspect: 1,\n    } as Partial<ReactCrop.Crop>,\n    linkMap: ['1', '3', '7', '9'] as string[],\n    isPendulum: false,\n    pendulumEffect: 'Once per turn: You can pay 800 LP, increase this card\\'s Pendulum Scale by 1.',\n    pendulumScaleRed: '4',\n    pendulumScaleBlue: '4',\n    typeAbility: ['Fairy', 'Fusion', 'Effect'] as string[],\n    effectStyle: {\n        condenseTolerant: 'strict' as CondenseType,\n    },\n    effect: `[2+ Effect Monsters on your field]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter.`,\n    setId: 'YGOC-EN001',\n    atk: '2000',\n    def: '2000',\n    passcode: '18111996',\n    sticker: 'holo5',\n    isFirstEdition: true,\n    creator: '©2020 Studio Dice/SHUEISHA TV TOKYO, KONAMI',\n};\n\nexport const frameType = [\n    { name: 'normal', labelColor: '#fff', labelBackgroundColor: '#c49c5e' },\n    { name: 'effect', labelColor: '#fff', labelBackgroundColor: '#b96c49' },\n    { name: 'fusion', labelColor: '#fff', labelBackgroundColor: '#8948a4' },\n    { name: 'synchro', labelColor: '#000', labelBackgroundColor: '#efefef' },\n    { name: 'xyz', labelColor: '#fff', labelBackgroundColor: '#000' },\n    { name: 'link', labelColor: '#fff', labelBackgroundColor: '#0c8ac6' },\n    { name: 'ritual', labelColor: '#fff', labelBackgroundColor: '#5e85c9' },\n    { name: 'spell', labelColor: '#fff', labelBackgroundColor: '#1b8f83' },\n    { name: 'trap', labelColor: '#fff', labelBackgroundColor: '#c32a8c' },\n    { name: 'token', labelColor: '#fff', labelBackgroundColor: '#6f6c6b' },\n];\n\nexport const iconList = [\n    'NO ICON',\n    'FIELD',\n    'CONTINUOUS',\n    'QUICK-PLAY',\n    'RITUAL',\n    'EQUIP',\n    'COUNTER',\n];\n\nexport const foilStyleMap: Record<string, TextStyle> = {\n    gold: {\n        fillStyle: '#b88c43',\n        shadowColor: '#FCC400',\n        shadowOffsetY: 1,\n        shadowOffsetX: 0,\n        shadowBlur: 1,\n        hasShadow: true,\n    },\n    platinum: {\n        fillStyle: '#CCCCCC',\n        shadowColor: '#FFFFFF',\n        shadowOffsetY: 1,\n        shadowOffsetX: 0,\n        shadowBlur: 1,\n        hasShadow: true,\n    },\n};\nexport const foilList = [\n    { name: 'normal', color: '#747b95', textStyle: defaultTextStyle },\n    { name: 'gold', color: '#cfa65f' },\n    { name: 'platinum', color: '#b1b1b1' },\n];\n\nexport const stickerList = [\n    'no-sticker',\n    'gold',\n    'silver',\n    'beta',\n    'holo5',\n    'holo4',\n    'holo3',\n    'holo2',\n    'holo1',\n];\n\nexport const attributeList = [\n    { name: 'DARK', color: '#b41dda' },\n    { name: 'EARTH', color: '#8d8e8e' },\n    { name: 'FIRE', color: '#e51b23' },\n    { name: 'LIGHT', color: '#bfae32' },\n    { name: 'WATER', color: '#008ecd' },\n    { name: 'WIND', color: '#28ab35' },\n    { name: 'DIVINE', color: '#ef6300' },\n    { name: 'SPELL', color: '#1b8f83' },\n    { name: 'TRAP', color: '#c32a8c' },\n];\n\nexport * from './canvas';\nexport type {\n    MasterDuelCanvas\n} from './card-seri';\n","import { Card, frameType } from '../model';\n\nexport const checkNormal = (card: Pick<Card, 'frame'>) => {\n    return card.frame === 'normal' && checkMonster(card);\n};\nexport const checkXyz = (card: Pick<Card, 'frame'>) => {\n    return card.frame === 'xyz';\n};\nexport const checkLink = (card: Pick<Card, 'frame' | 'typeAbility'>) => {\n    return card.frame === 'link' && checkMonster(card);\n};\nexport const checkMonster = (card: Pick<Card, 'frame'>) => {\n    return card.frame !== 'spell' && card.frame !== 'trap';\n};\n\nexport const getCardFrame = (frame: string) => {\n    return frameType.find(entry => entry.name === frame.toLowerCase())?.name ?? 'effect';\n};","// @ts-nocheck\n/* eslint-disable */\n// JSONCrush by Frank Force [MIT] https://github.com/KilledByAPixel/JSONCrush\n\"use strict\"\nexport const JSONCrush=(e,n=50)=>{for(var r=[],o=127;--o;)(48<=o&&57>=o||65<=o&&90>=o||97<=o&&122>=o||\"-_.!~*'()\".includes(String.fromCharCode(o)))&&r.push(String.fromCharCode(o));for(o=32;255>o;++o){var t=String.fromCharCode(o);\"\\\\\"==t||r.includes(t)||r.unshift(t)}e=e.replace(/\\u0001/g,\"\"),e=JSONCrushSwap(e),o=r.length,t=\"\";for(var i={},l=2;l<n;l++)for(var f=0;f<e.length-l;++f){var h=e.substr(f,l);if(!i[h]){var a=h.charCodeAt(0),g=h.charCodeAt(h.length-1);if(!(a=56320<=a&&57343>=a||55296<=g&&56319>=g)){for(a=1,g=e.indexOf(h,f+l);0<=g;++a)g=e.indexOf(h,g+l);1<a&&(i[h]=a)}}}for(;;){for(;o--&&e.includes(r[o]););if(0>o)break;n=r[o];var d=void 0;l=0,f=encodeURI(encodeURIComponent(n)).replace(/%../g,\"i\").length;for(let e in i)h=((h=i[e])-1)*encodeURI(encodeURIComponent(e)).replace(/%../g,\"i\").length-(h+1)*f,t.length||(h-=encodeURI(encodeURIComponent(\"\u0001\")).replace(/%../g,\"i\").length),0>=h?delete i[e]:h>l&&(d=e,l=h);if(!d)break;e=e.split(d).join(n)+n+d,t=n+t,l={};for(let r in i){for(i=r.split(d).join(n),f=0,h=e.indexOf(i);0<=h;++f)h=e.indexOf(i,h+i.length);1<f&&(l[i]=f)}i=l}return d=e,(r=t).length&&(d+=\"\u0001\"+r),encodeURIComponent(d+\"_\")},JSONUncrush=e=>{var n=(e=e.substring(0,e.length-1)).split(\"\u0001\");if(e=n[0],1<n.length){n=n[1];for(let r of n)e=(e=e.split(r)).join(e.pop())}return JSONCrushSwap(e,0)},JSONCrushSwap=(e,n=1)=>{const r=[['\"',\"'\"],[\"':\",\"!\"],[\",'\",\"~\"],[\"}\",\")\",\"\\\\\",\"\\\\\"],[\"{\",\"(\",\"\\\\\",\"\\\\\"]],o=(e,n)=>e.replace(new RegExp(`${(n[2]?n[2]:\"\")+n[0]}|${(n[3]?n[3]:\"\")+n[1]}`,\"g\"),e=>e===n[0]?n[1]:n[0]);if(n)for(n=0;n<r.length;++n)e=o(e,r[n]);else for(n=r.length;n--;)e=o(e,r[n]);return e}","import { clone } from 'ramda';\nimport { JSONCrush, JSONUncrush } from '../3rd';\nimport { Card, defaultCard } from '../model';\n\nexport const createCondenser = (minThreshold = 0, maxThreshold = 1000) => {\n    let min = minThreshold;\n    let max = maxThreshold;\n    let median = max;\n    let lastEffective = median;\n    let iterateCount = 30;\n    let magnitude = 100;\n\n    const reverseSearch = () => {\n        if (magnitude === 1) finish();\n        else {\n            median += magnitude;\n            magnitude /= 10;\n            median -= magnitude;\n        }\n\n        return Math.min(median, max);\n    };\n\n    const searchDown = () => {\n        median -= magnitude;\n        iterateCount -= 1;\n\n        return median;\n    };\n\n    const reset = (minThreshold = min, maxThreshold = max) => {\n        min = minThreshold;\n        max = maxThreshold;\n        median = maxThreshold;\n        iterateCount = 30;\n        magnitude = 100;\n        lastEffective = maxThreshold;\n    };\n\n    const getMedian = () => median;\n    const setMedian = (newMedian: number) => median = newMedian;\n\n    const setLastEffective = (forceMedian = median) => lastEffective = forceMedian;\n    const getLastEffective = () => lastEffective;\n    const applyLastEffective = () => {\n        median = lastEffective;\n        iterateCount = -1;\n        return median;\n    };\n\n    const getIterateCount = () => iterateCount;\n    const finish = () => iterateCount = -1;\n\n    return {\n        reset,\n        searchDown,\n        reverseSearch,\n        finish,\n        getMedian,\n        setMedian,\n        setLastEffective,\n        getLastEffective,\n        applyLastEffective,\n        getIterateCount,\n    };\n};\n\nconst cardFieldShortenMap: Record<keyof Card | string, string | Record<string, string>> = {\n    frame: 'fr',\n    foil: 'fo',\n    name: 'na',\n    nameStyleType: 'nst',\n    effectStyle: {\n        _newKey: 'es',\n        condenseTolerant: 'cdtl',\n    },\n    nameStyle: {\n        _newKey: 'ns',\n        fillStyle: 'nsfs',\n        shadowColor: 'nssc',\n        shadowOffsetY: 'nssoy',\n        shadowOffsetX: 'nssox',\n        shadowBlur: 'nssb',\n        hasShadow: 'nshs',\n    },\n    attribute: 'at',\n    subFamily: 'sf',\n    star: 'st',\n    picture: 'pt',\n    pictureCrop: {\n        _newKey: 'ptc',\n        x: 'ptx',\n        y: 'pty',\n        width: 'ptw',\n        height: 'pth',\n        unit: 'ptu',\n        aspect: 'pta',\n    },\n    linkMap: 'lm',\n    isPendulum: 'ip',\n    pendulumEffect: 'pe',\n    pendulumScaleRed: 'rs',\n    pendulumScaleBlue: 'bs',\n    typeAbility: 'ta',\n    effect: 'ef',\n    setId: 'si',\n    atk: 'atk',\n    def: 'def',\n    passcode: 'pc',\n    sticker: 'sti',\n    isFirstEdition: 'ife',\n    creator: 'cr',\n};\n\nexport const cardDataCondenser = (\n    card: Record<string, any>,\n    shortenMap: Record<string, any> = cardFieldShortenMap,\n    crush = true,\n) => {\n    const condensedCard: Record<string, any> = {};\n    Object.keys(card).forEach(cardKey => {\n        const cardValue = card[cardKey];\n\n        if (typeof cardValue === 'object' && cardValue !== null && !Array.isArray(cardValue)) {\n            const newKey = shortenMap[cardKey]?._newKey;\n\n            if (newKey) {\n                condensedCard[newKey] = cardDataCondenser(cardValue, shortenMap[cardKey], false);\n            }\n        } else {\n            const newKey = shortenMap[cardKey];\n\n            if (typeof newKey === 'string') condensedCard[newKey] = cardValue;\n        }\n    });\n\n    if (crush) {\n        const curshedCard = JSONCrush(JSON.stringify(condensedCard));\n\n        return curshedCard;\n    }\n    return condensedCard;\n};\n\nexport const reverseCardDataCondenser = (\n    condensedCard: Record<string, any> | string,\n    shortenMap: Record<string, any> = cardFieldShortenMap,\n) => {\n    const normalizedCondensedCard = typeof condensedCard === 'string'\n        ? JSON.parse(JSONUncrush(decodeURIComponent(condensedCard)))\n        : condensedCard;\n\n    const fullCard: Record<string, any> = {};\n    Object.keys(shortenMap).forEach(fullKey => {\n        const shortendValue = shortenMap[fullKey];\n\n        if (typeof shortendValue === 'object' && shortendValue !== null && !Array.isArray(shortendValue)) {\n            const shortendKey = shortendValue?._newKey;\n\n            if (shortendKey && normalizedCondensedCard[shortendKey]) {\n                fullCard[fullKey] = reverseCardDataCondenser(normalizedCondensedCard[shortendKey], shortenMap[fullKey]);\n            }\n        } else {\n            if (normalizedCondensedCard[shortendValue]) {\n                fullCard[fullKey] = normalizedCondensedCard[shortendValue];\n            }\n        }\n    });\n    return fullCard;\n};\n\nexport const rebuildCardData = (\n    card: Record<string, any> | string,\n    isCondensed = false,\n) => {\n    let fullCard: Record<string, any>;\n    if (isCondensed) {\n        fullCard = reverseCardDataCondenser(card);\n    } else {\n        fullCard = typeof card === 'string'\n            ? JSON.parse(card)\n            : card;\n    }\n\n    return migrateCardData(fullCard);\n};\n\n// Try to match old version card data with newer model\nconst migrateCardData = (card: Record<string, any>) => {\n    const migratedCard = clone(card);\n\n    if (migratedCard.effectStyle === undefined) {\n        migratedCard.effectStyle = {\n            ...defaultCard.effectStyle\n        };\n    }\n\n    if (migratedCard.version === undefined) {\n        migratedCard.version = 1;\n    }\n    return migratedCard;\n};","export const randomCharacter = (charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', length = 1) => {\n    let result           = '';\n    const charactersLength = charSet.length;\n    for ( let i = 0; i < length; i++) {\n        result += charSet.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n};\n\nexport const randomSetID = () => {\n    return `${randomCharacter('ABCDEFGHIJKLMNOPQRSTUVWXYZ', 4)}-EN${randomCharacter('0123456789', 3)}`;\n};\n\nexport const randomPassword = () => {\n    return `${randomCharacter('0123456789', 8)}`;\n};\n\nexport const splitEffect = (effect: string, isNormal = false) => {\n    let effectBody = effect;\n\n    let effectMaterial = '';\n    const materialRegex = /^(\\[([^\\]]*)\\]\\s*)/m;\n    const materialReplacement = materialRegex.exec(effectBody)?.[1];\n    const material = materialRegex.exec(effectBody)?.[2];\n    if (material && materialReplacement) {\n        effectMaterial = material;\n        effectBody = effectBody.replace(materialReplacement, '');\n    } else effectMaterial = '';\n\n    let effectFlavorCondition = '';\n    const flavorConditionRegex = /(\\n^[\\r\\t\\f\\v \\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]*\\([\\w\\W]+\\))\\s*$/m;\n    const flavorCondition = flavorConditionRegex.exec(effect)?.[1];\n    if (flavorCondition && isNormal) {\n        effectFlavorCondition = flavorCondition;\n        effectBody = effectBody.replace(flavorCondition, '');\n    } else effectFlavorCondition = '';\n\n    return {\n        material: effectMaterial,\n        body: effectBody,\n        flavorCondition: effectFlavorCondition\n    };\n};\n\nexport const quoteConvert = (text?: string) => {\n    let normalizedString = (text ?? '');\n    normalizedString = normalizedString.replace(/(^|[-\\u2014\\s([\"])'/g, '$1\\u2018')\n        .replace(/'/g, '\\u2019')\n        .replace(/(^|[-\\u2014/[(\\u2018\\s])\"/g, '$1\\u201c')\n        .replace(/\"/g, '\\u201d')\n        .replace(/--/g, '\\u2014');\n    return normalizedString;\n};\n\nexport function insertUrlParam(key: string, value: string) {\n    if (window.history.pushState) {\n        let searchParams = new URLSearchParams(window.location.search);\n        searchParams.set(key, value);\n        let newurl = window.location.protocol + '//' + window.location.host + window.location.pathname + '?' + searchParams.toString();\n        window.history.pushState({ path: newurl }, '', newurl);\n    }\n}\n\nexport * from './categorize';\nexport * from './condenser';","import { Spin } from 'antd';\nimport './loading.scss';\n\nexport const Loading = () => {\n    return <Spin />;\n};\nLoading.FullView = () => {\n    return <div className=\"loading-fullview\">\n        <Spin size=\"large\" />\n    </div>;\n};","import { Button, Input, Radio } from 'antd';\nimport React, { useState, useCallback, useRef, useEffect, useImperativeHandle } from 'react';\nimport ReactCrop from 'react-image-crop';\nimport { Loading } from '../loading';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport './card-picture.scss';\n\nfunction generateDownload(canvas: HTMLCanvasElement | null, crop: ReactCrop.Crop | null) {\n    if (!crop || !canvas) return;\n    canvas.toBlob(\n        (blob) => {\n            if (blob !== null) {\n                const previewUrl = window.URL.createObjectURL(blob);\n\n                const anchor = document.createElement('a');\n                anchor.download = 'cropPreview.png';\n                anchor.href = URL.createObjectURL(blob);\n                anchor.click();\n\n                window.URL.revokeObjectURL(previewUrl);\n            }\n        },\n        'image/png',\n        1\n    );\n}\n\nexport type ImageCropperRef = {\n    forceExternalSource: (pictureLink: string, cropInfo: Partial<ReactCrop.Crop>) => void,\n}\nexport type ImageCropper = {\n    noRedrawNumber?: number,\n    defaultExternalSource?: string,\n    previewCanvasRef?: HTMLCanvasElement | null,\n    children?: React.ReactNode,\n    ratio?: number,\n    defaultCropInfo: Partial<ReactCrop.Crop>,\n    onSourceChange?: (source: string) => void,\n    onImageChange?: (cropInfo: Partial<ReactCrop.Crop>, sourceType: 'internal' | 'external') => void,\n    onTainted: () => void,\n}\nexport const ImageCropper = React.forwardRef<ImageCropperRef, ImageCropper>(({\n    noRedrawNumber = 0,\n    defaultExternalSource = '',\n    previewCanvasRef,\n    children,\n    ratio = 1,\n    defaultCropInfo,\n    onSourceChange = () => { },\n    onImageChange = () => { },\n    onTainted = () => { },\n}: ImageCropper, forwardedRef) => {\n    const [crossorigin, setCrossOrigin] = useState<'anonymous' | 'use-credentials' | undefined>('anonymous');\n    const [sourceType, setSourceType] = useState<'internal' | 'external'>('external');\n    const [internalSource, setInternalSource] = useState('');\n    const [isLoading, setLoading] = useState(false);\n    const [externalSource, setExternalSource] = useState(defaultExternalSource);\n    const imgRef = useRef<HTMLImageElement | null>(null);\n    const [crop, setCrop] = useState<ReactCrop.Crop>(defaultCropInfo);\n    const [completedCrop, setCompletedCrop] = useState<ReactCrop.Crop | null>(null);\n\n    const onSelectFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files.length > 0) {\n            setLoading(true);\n            const reader = new FileReader();\n            reader.addEventListener('load', () => {\n                if (typeof reader.result === 'string') {\n                    setInternalSource(reader.result);\n                    setSourceType('internal');\n                }\n            });\n            reader.readAsDataURL(e.target.files[0]);\n        }\n    };\n\n    const onLoad = useCallback((img: HTMLImageElement) => {\n        setLoading(false);\n        imgRef.current = img;\n    }, []);\n\n    const onExternalSourceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const source = e.target.value;\n\n        setLoading(true);\n        setSourceType('external');\n        onSourceChange(source);\n        setExternalSource(source);\n    };\n\n    useEffect(() => {\n        const image = imgRef.current;\n        const canvas = previewCanvasRef;\n        const crop = completedCrop;\n        if (!crop || !canvas || !image) return;\n\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        const scaleX = image.naturalWidth / image.width;\n        const scaleY = image.naturalHeight / image.height;\n        const pixelRatio = window.devicePixelRatio;\n        const boundingWidth = Math.ceil(canvas.getBoundingClientRect().width);\n        const boundingHeight = Math.ceil(canvas.getBoundingClientRect().height);\n        const renderRatio = crop.aspect ?? 0;\n\n        canvas.width = (boundingWidth ?? 0) * pixelRatio;\n        canvas.height = (boundingHeight ?? 0) * pixelRatio;\n\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        ctx.imageSmoothingQuality = 'high';\n\n        ctx.drawImage(\n            image,\n            (crop.x ?? 0) * scaleX,\n            (crop.y ?? 0) * scaleY,\n            (crop.width ?? 0) * scaleX,\n            (crop.height ?? 0) * scaleY,\n            0,\n            0,\n            (boundingWidth ?? 0),\n            (boundingHeight ?? 0) / (renderRatio > 0 ? renderRatio : 1),\n        );\n        onImageChange(crop, sourceType);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [completedCrop, previewCanvasRef, noRedrawNumber]);\n\n    useImperativeHandle(forwardedRef, () => ({\n        forceExternalSource: (source, cropInfo) => {\n            const inUseSource = sourceType === 'internal' ? internalSource : externalSource;\n            if (inUseSource !== source) {\n                setLoading(true);\n                setSourceType('external');\n                onSourceChange(source);\n                setExternalSource(source);\n            }\n            setCrop(cropInfo);\n        }\n    }));\n\n    useEffect(() => {\n        const { height, aspect, width } = completedCrop ?? {};\n        if (typeof height === 'number' && typeof aspect === 'number' && typeof width === 'number' && (ratio > 0 && ratio !== aspect)) {\n            setCrop({\n                ...completedCrop,\n                aspect: ratio,\n                height: width / ratio,\n            });\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [ratio]);\n\n    return (\n        <div className=\"card-image-cropper\">\n            <div className=\"card-image-source-input\">\n                {children}\n                <Radio.Group onChange={e => setSourceType(e.target.value)} value={sourceType}>\n                    <Radio.Button value={'external'}>\n                        <Input key=\"key\"\n                            addonBefore=\"Link\" placeholder=\"https://my-online-image...\"\n                            value={externalSource}\n                            onChange={onExternalSourceChange} maxLength={256} />\n                    </Radio.Button>\n                    <Radio.Button value={'internal'}>\n                        <Input type=\"file\" accept=\"image/*\" onChange={onSelectFile} />\n                        <div>\n                            {sourceType === 'internal' && <>\n                                <Button\n                                    className=\"download-button\"\n                                    disabled={!completedCrop?.width || !completedCrop?.height}\n                                    onClick={() => previewCanvasRef && generateDownload(previewCanvasRef, completedCrop)}\n                                >\n                                    Download cropped image#3b9dff\n                                </Button>\n                                <span style={{ color: '#FF6F6F' }}>Offline images are not auto saved!</span>\n                            </>}\n                        </div>\n                    </Radio.Button>\n                </Radio.Group>\n            </div>\n            <div className=\"card-cropper\">\n                {isLoading && <Loading.FullView />}\n                <ReactCrop key={`${sourceType}${ratio}`}\n                    src={sourceType === 'internal' ? internalSource : externalSource}\n                    onImageLoaded={onLoad}\n                    onImageError={() => {\n                        onTainted();\n                        setCrossOrigin(undefined);\n                    }}\n                    crop={crop}\n                    onChange={cropData => setCrop({ ...cropData, aspect: ratio })}\n                    onComplete={cropData => setCompletedCrop(cropData)}\n                    ruleOfThirds={true}\n                    crossorigin={crossorigin}\n                />\n            </div>\n        </div>\n    );\n});\n","import { Tooltip } from 'antd';\nimport { useEffect, useState } from 'react';\nimport './link-marker.scss';\n\nexport type LinkMarkChooser = {\n    defaultValue?: string[],\n    onChange?: (value: string[]) => void,\n};\nexport const LinkMarkChooser = ({\n    defaultValue = [],\n    onChange = () => {},\n}: LinkMarkChooser) => {\n    const [choosenArrow, setChoosenArrow] = useState(defaultValue);\n    const rotateMap = [-45, 0, 45, -90, 0, 90, -135, 180, 135];\n\n    const literalChoosenArrow = JSON.stringify(choosenArrow);\n    useEffect(() => {\n        onChange(choosenArrow);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [literalChoosenArrow]);\n\n    return <div className=\"link-marker-chooser\">\n        <div className=\"title\">\n            Link Arrows\n        </div>\n        <div className=\"container\">\n            {[...Array(9)].map((entry, index) => {\n                const normalizedIndex = `${index + 1}`;\n\n                if (normalizedIndex === '5') return <Tooltip key=\"5\" overlay=\"Reset\">\n                    <div className=\"link-marker-reset\" onClick={() => {\n                        setChoosenArrow([]);\n                    }}>R</div>\n                </Tooltip>;\n\n                return <div key={normalizedIndex}\n                    className={`link-marker-button marker-${index + 1} ${choosenArrow.includes(normalizedIndex) ? 'marker-checked' : ''}`}\n                    onClick={() => {\n                        setChoosenArrow(cur => {\n                            let newMap = [...cur];\n\n                            if (newMap.includes(normalizedIndex)) newMap = newMap.filter(entry => entry !== normalizedIndex);\n                            else newMap.push(normalizedIndex);\n\n                            return newMap;\n                        });\n                    }}\n                >\n                    <div className={`link-marker-icon link-marker-icon-${index + 1}`} style={{ transform: `rotate(${rotateMap[index]}deg)` }} />\n                </div>;\n            })}\n        </div>\n    </div>;\n};","import { frameType, iconList, attributeList, stickerList, foilList } from '../../model';\nimport './input-panel.scss';\n\nexport const foilButton = foilList.map(({ color, name }) => ({\n    label: name.toLocaleUpperCase(),\n    value: name,\n    props: {\n        style: {\n            color,\n            fontWeight: 'bold',\n        } as React.CSSProperties,\n    }\n}));\nexport const frameButton = frameType.map(({ labelColor, name, labelBackgroundColor }) => ({\n    label: name,\n    value: name,\n    props: {\n        style: {\n            backgroundColor: labelBackgroundColor,\n            color: labelColor,\n        } as React.CSSProperties,\n    }\n}));\nexport const attributeButton = attributeList.map(({ name }) => ({\n    label: <img alt={name} src={`${process.env.PUBLIC_URL}/asset/image/attribute/attr-${name.toLowerCase()}.png`} />,\n    value: name,\n}));\nexport const iconButton = iconList.map(entry => ({\n    label: entry,\n    value: entry,\n}));\nexport const starButton = [...Array(14)].map((e, index) => ({ label: index, value: index }));\nexport const stickerButton = stickerList.map(name => ({\n    label: name === 'no-sticker'\n        ? <span>NONE</span>\n        : <img alt={name} src={`${process.env.PUBLIC_URL}/asset/image/sticker/sticker-${name.toLowerCase()}.png`} />,\n    value: name,\n}));\nexport const condenseButton = [\n    { label: 'Strict', value: 'strict' },\n    { label: 'Loose', value: 'loose' },\n    { label: 'Very Loose', value: 'veryLoose' },\n];","import { useCallback, useEffect, useState } from 'react';\nimport Moveable from 'react-moveable';\nimport { EllipsisOutlined } from '@ant-design/icons';\nimport './char-picker.scss';\n\nfunction insertAtCursor(myField: HTMLTextAreaElement, myValue: string) {\n    //IE support\n    if ((document as any).selection) {\n        myField.focus();\n        const sel = (document as any).selection.createRange();\n        sel.text = myValue;\n\n        return {\n            value: myField.value,\n            position: 0,\n        };\n    }\n    //MOZILLA and others\n    else if (myField.selectionStart || myField.selectionStart === 0) {\n        const startPos = myField.selectionStart;\n        const endPos = myField.selectionEnd;\n        myField.value = myField.value.substring(0, startPos)\n            + myValue\n            + myField.value.substring(endPos, myField.value.length);\n        myField.selectionStart = startPos + myValue.length;\n        myField.selectionEnd = startPos + myValue.length;\n        myField.focus();\n\n        return {\n            value: myField.value,\n            position: startPos + myValue.length,\n        };\n    } else {\n        myField.value += myValue;\n\n        return {\n            value: myField.value,\n            position: 0,\n        };\n    }\n}\n\nexport type CharPicker = {\n    targetId: string,\n    onPick?: (value: string) => void,\n}\nexport const CharPicker = ({\n    targetId = '',\n    onPick = () => {},\n}: CharPicker) => {\n    const [target, setTarget] = useState<HTMLElement | null>(null);\n    const internalOnPick = (char: string) => {\n        const inputTarget = document.getElementById(targetId) as HTMLTextAreaElement;\n        if (inputTarget) {\n            const { value } = insertAtCursor(inputTarget, char);\n\n            onPick(value);\n        }\n    };\n\n    useEffect(() => {\n        setTarget(document.getElementById('char-picker'));\n    }, []);\n\n    const onDrag = useCallback(({\n        target,\n        left, top,\n        transform,\n    }) => {\n        target!.style.left = `${left}px`;\n        target!.style.top = `${top}px`;\n        target!.style.transform = transform;\n    }, []);\n\n    return <div className=\"char-picker-container\">\n        {<div id={'char-picker'} className=\"char-picker\">\n            <div className=\"handler\">\n                <EllipsisOutlined />\n            </div>\n            {[\n                '∞',\n                '☆',\n                '●',\n                '©',\n                '™',\n                'Ɐ',\n            ].map(entry => {\n                return <button key={entry} className=\"ant-btn\" onClick={() => internalOnPick(entry)}>{entry}</button>;\n            })}\n        </div>}\n        <Moveable\n            target={target}\n            container={null}\n\n            /* Resize event edges */\n            edge={false}\n\n            /* draggable */\n            draggable={true}\n            throttleDrag={0}\n            onDrag={onDrag}\n        />\n    </div>;\n};","import { Checkbox, InputNumber, Popover, Slider } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { CompactPicker } from 'react-color';\nimport { CaretUpOutlined, CaretDownOutlined } from '@ant-design/icons';\nimport { defaultTextStyle, TextStyle, TextStyleType } from '../../../model';\nimport PowerSlider from 'react-input-slider';\nimport { debounce } from 'lodash';\nimport './style-picker.scss';\n\nexport type StylePicker = {\n    defaultType: TextStyleType,\n\tdefaultValue: TextStyle,\n\tonChange: (type: TextStyleType, style: TextStyle) => void,\n}\nexport const StylePicker = React.memo(({\n    defaultType,\n    defaultValue,\n    onChange: undebouncedOnChange,\n}: StylePicker) => {\n    const [type, setType] = useState(defaultType);\n    const [value, setValue] = useState(defaultValue);\n    const [isColorPickerVisble, setColorPickerVisible] = useState(false);\n    const [isShadowPickerVisble, setShadowPickerVisible] = useState(false);\n    const [changeSignal, setChangeSignal] = useState(0);\n    const updateSignal = () => setChangeSignal(cnt => cnt + 1);\n    const onChange = useRef(debounce(undebouncedOnChange, 250)).current;\n\n    const setCustomValue = <ValueType extends any>(key: keyof TextStyle) => {\n        return (inputValue: ValueType) => {\n            setValue(curValue => {\n                const newStyle = { ...curValue, [key]: inputValue };\n\n                onChange('custom', newStyle);\n                return newStyle;\n            });\n        };\n    };\n\n    useEffect(() => {\n        if (changeSignal !== 0) onChange('custom', value);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [changeSignal]);\n\n    return <div className=\"ant-input-group-wrapper name-color-input\">\n        <span className=\"ant-input-wrapper ant-input-group\">\n            <span className=\"ant-input-group-addon\">Name Color</span>\n            <span className=\"ant-input-affix-wrapper\">\n                <div className=\"ant-radio-group ant-radio-group-outline\">\n                    <label className={`ant-radio-wrapper ${type === 'auto' ? 'ant-radio-wrapper-checked' : ''}`} onClick={() => {\n                        setType('auto');\n                        onChange('auto', value);\n                    }}>\n                        <span className={`ant-radio ${type === 'auto' ? 'ant-radio-checked' : ''}`}>\n                            <input type=\"radio\" className=\"ant-radio-input\" value=\"auto\" />\n                            <span className=\"ant-radio-inner\" />\n                        </span>\n                        <span>Auto</span>\n                    </label>\n                    <label className={`ant-radio-wrapper ${type === 'custom' ? 'ant-radio-wrapper-checked' : ''}`} onClick={() => {\n                        setType('custom');\n                        onChange('custom', value);\n                    }}>\n                        <span className={`ant-radio ${type === 'custom' ? 'ant-radio-checked' : ''}`}>\n                            <input type=\"radio\" className=\"ant-radio-input\" value=\"custom\" />\n                            <span className=\"ant-radio-inner\" />\n                        </span>\n                        <div className=\"style-picker\">\n                            Custom\n                            <Popover key=\"color-picker\"\n                                overlayClassName=\"input-overlay style-picker-overlay\"\n                                content={<>\n                                    <div className=\"style-picker-mask\" onClick={() => setColorPickerVisible(false)} />\n                                    <div className={'custom-style-picker'}>\n                                        <div className=\"custom-style-text\">\n                                            <h2>Text Color</h2>\n                                            <CompactPicker color={value.fillStyle} onChange={color => {\n                                                setType('custom');\n                                                setValue(cur => {\n                                                    const newStyle = { ...cur, fillStyle: color.hex };\n\n                                                    return newStyle;\n                                                });\n                                                updateSignal();\n                                            }} />\n                                        </div>\n                                    </div>\n                                </>}\n                                visible={isColorPickerVisble}\n                                placement=\"bottom\"\n                            >\n                                <div className=\"picker-dropdown color-picker-dropdown\" onClick={() => setColorPickerVisible(cur => !cur)}>\n                                    Change Color {isColorPickerVisble ? <CaretUpOutlined /> : <CaretDownOutlined />}\n                                </div>\n                            </Popover>\n                            <Popover key=\"shadow-picker\"\n                                overlayClassName=\"input-overlay style-picker-overlay\"\n                                content={<>\n                                    <div className=\"style-picker-mask\" onClick={() => setShadowPickerVisible(false)} />\n                                    <div className={'custom-style-picker'}>\n                                        <h3 className=\"custom-style-expand\">\n                                            <Checkbox value={'has-shadow'} checked={value.hasShadow} onChange={() => {\n                                                setType('custom');\n                                                setValue(cur => {\n                                                    const newStyle = { ...cur, hasShadow: !cur.hasShadow };\n                    \n                                                    return newStyle;\n                                                });\n                                                updateSignal();\n                                            }}>Has Shadow?</Checkbox>\n                                        </h3>\n                                        {value.hasShadow && <div className=\"custom-style-shadow\">\n                                            <h2>Position</h2>\n                                            <div className=\"shadow-position\">\n                                                <PowerSlider axis=\"xy\"\n                                                    styles={{\n                                                        track: {\n                                                            backgroundColor: '#009ce0',\n                                                            width: 100,\n                                                            height: 100,\n                                                            gridRow: 'span 3',\n                                                            position: 'relative',\n                                                        },\n                                                        thumb: {\n                                                            backgroundColor: '#91d5ff',\n                                                            zIndex: 10,\n                                                        },\n                                                    }}\n                                                    xmax={5} xmin={-5}\n                                                    ymax={5} ymin={-5}\n                                                    x={value.shadowOffsetX}\n                                                    y={value.shadowOffsetY}\n                                                    onChange={({ x, y }) => {\n                                                        setValue(cur => {\n                                                            const newStyle = { ...cur,\n                                                                ...cur,\n                                                                shadowOffsetX: x,\n                                                                shadowOffsetY: y,\n                                                            };\n\n                                                            return newStyle;\n                                                        });\n                                                        updateSignal();\n                                                    }} />\n                                                <div className=\"single-slider\">\n                                                    X Offset: <InputNumber size=\"small\" value={value.shadowOffsetX} onChange={setCustomValue('shadowOffsetX')} />\n                                                </div>\n                                                <div className=\"single-slider\">\n                                                    Y Offset: <InputNumber size=\"small\" value={value.shadowOffsetY} onChange={setCustomValue('shadowOffsetY')} />\n                                                </div>\n                                                <div className=\"single-slider\">\n                                                    Blur: <Slider value={value.shadowBlur} min={0} max={10} onChange={(value: number) => {\n                                                        if (typeof value === 'number') {\n                                                            setValue(cur => {\n                                                                const newStyle = { ...cur, shadowBlur: value };\n\n                                                                return newStyle;\n                                                            });\n                                                            updateSignal();\n                                                        }\n                                                    }} />\n                                                </div>\n                                                <div />\n                                            </div>\n                                            <h2>Color</h2>\n                                            <CompactPicker color={value.shadowColor} onChange={color => {\n                                                let newStyle: TextStyle = defaultTextStyle;\n                                                setValue(cur => {\n                                                    newStyle = { ...cur, shadowColor: color.hex };\n\n                                                    return newStyle;\n                                                });\n                                                updateSignal();\n                                            }} />\n                                        </div>}\n                                    </div>\n                                </>}\n                                visible={isShadowPickerVisble}\n                                placement=\"bottom\"\n                            >\n                                <div className=\"picker-dropdown shadow-picker-dropdown\" onClick={() => setShadowPickerVisible(cur => !cur)}>\n                                    Change Shadow {isShadowPickerVisble ? <CaretUpOutlined /> : <CaretDownOutlined />}\n                                </div>\n                            </Popover>\n                        </div>\n                    </label>\n                </div>\n            </span>\n        </span>\n    </div>;\n}, () => true);\n","import React from 'react';\n\n\n\nexport type CheckboxTrain = {\n\tclassName?: string,\n\tvalue: string,\n\toptionList: { label: React.ReactNode, value: string | number, props?: React.LabelHTMLAttributes<HTMLLabelElement> }[],\n\tonChange: (value: string | number) => void,\n\tchildren?: React.ReactNode,\n}\nexport const CheckboxTrain = ({\n    onChange,\n    value,\n    optionList,\n    children,\n    className,\n}: CheckboxTrain) => {\n    const combinedClass = ['ant-radio-group ant-radio-group-outline checkbox-train', className].join(' ');\n\n    return <div className={combinedClass}>\n        {children && <label className=\"standalone-addon ant-input-group-addon\">{children}</label>}\n        {optionList.map(entry => {\n            const isChecked = `${entry.value}` === `${value}`;\n\n            return <label key={entry.value}\n                {...entry.props}\n                className={`ant-radio-button-wrapper ${isChecked ? 'ant-radio-button-wrapper-checked' : ''}`}\n                onClick={() => {\n                    onChange(entry.value);\n                }}\n            >\n                <span className={`ant-radio-button ${isChecked ? 'ant-radio-button-checked' : ''}`}>\n                    <span className=\"ant-radio-button-inner\"></span>\n                </span>\n                <span>{entry.label}</span>\n            </label>;\n        })}\n    </div>;\n};","import React, { useImperativeHandle, useRef, useState } from 'react';\nimport { Input, Checkbox, Tooltip } from 'antd';\nimport { Card, CondenseType, TextStyle, TextStyleType } from '../../model';\nimport { ImageCropper, LinkMarkChooser } from '../../component';\nimport { checkXyz, checkLink, checkMonster, randomPassword, randomSetID } from '../../util';\nimport { debounce } from 'lodash';\nimport { SyncOutlined } from '@ant-design/icons';\nimport { foilButton, frameButton, starButton, iconButton, attributeButton, stickerButton, condenseButton } from './const';\nimport { CharPicker } from './char-picker';\nimport { StylePicker } from './style-picker';\nimport { CheckboxTrain } from './input-train';\nimport { ImageCropperRef } from '../../component/card-picture';\nimport './input-panel.scss';\n\nconst { TextArea } = Input;\n\nconst onChangeFactory = (\n    key: string,\n    mutateFunction: (func: (card: Card) => Card) => void,\n    valueTransform: (value: any) => any = (value) => value,\n) => {\n    return (e: any) => {\n        mutateFunction(current => ({\n            ...current,\n            [key]: valueTransform(typeof e === 'string' || typeof e === 'number' || Array.isArray(e) ? e : e?.target?.value),\n        }));\n    };\n};\n\ntype RandomButton = {\n    seeder: () => string,\n    onGenerate: (value: string) => void,\n}\nconst RandomButton = ({\n    seeder,\n    onGenerate,\n}: RandomButton) => {\n    return <span style={{ marginLeft: 10, paddingLeft: 10, borderLeft: '1px solid #222' }}>\n        <Tooltip overlay=\"Randomize\">\n            <SyncOutlined onClick={() => onGenerate(seeder())} />\n        </Tooltip>\n    </span>;\n};\n\nexport type CardInputPanelRef = {\n    forceCardData: (card: Card) => void,\n}\nexport type CardInputPanel = {\n\tcurrentCard: Card,\n    receivingCanvasRef: HTMLCanvasElement | null,\n    defaultCropInfo: Partial<ReactCrop.Crop>,\n\tonCardChange: React.Dispatch<React.SetStateAction<Card>>,\n    onImageChange?: (cropInfo: Partial<ReactCrop.Crop>, sourceType: 'internal' | 'external') => void,\n    children?: React.ReactNode,\n} & {\n    onTainted: ImageCropper['onTainted']\n}\nexport const CardInputPanel = React.forwardRef<CardInputPanelRef, CardInputPanel>(({\n    currentCard,\n    receivingCanvasRef,\n    defaultCropInfo,\n    onCardChange,\n    onImageChange,\n    onTainted,\n    children,\n}: CardInputPanel, forwardedRef) => {\n    const [isMirrorScale, setMirrorScale] = useState(true);\n    const imageCropperRef = useRef<ImageCropperRef>(null);\n    const setCard = (mutateFunc: (card: Card) => Card) => {\n        onCardChange(currentCard => mutateFunc(currentCard));\n    };\n    const onFoilChange = onChangeFactory('foil', setCard);\n    const onFrameChange = (frameValue: number | string) => {\n        onCardChange(currentCard => {\n            const value = `${frameValue}`;\n            const isST = value === 'spell' || value === 'trap';\n            const newTypeAbility = value === 'spell'\n                ? ['Spell Card']\n                : value === 'trap' ? ['Trap Card'] : currentCard.typeAbility;\n            if (isST) setDisplayTypeAbility(newTypeAbility[0]);\n    \n            return {\n                ...currentCard,\n                frame: value,\n                isPendulum: value === 'link' || value === 'token' || isST ? false : currentCard.isPendulum,\n                subFamily: isST ? 'NO ICON' : currentCard.subFamily,\n                attribute: isST\n                    ? `${value}`.toUpperCase()\n                    : currentCard.attribute,\n                typeAbility: value === 'spell'\n                    ? ['Spell Card']\n                    : value === 'trap' ? ['Trap Card'] : currentCard.typeAbility,\n            };\n        });\n    };\n    const onAttributeChange = onChangeFactory('attribute', setCard);\n    const onSubFamilyChange = onChangeFactory('subFamily', setCard);\n    const onNameChange = debounce(onChangeFactory('name', setCard), 350);\n    const onNameColorChange = (type: TextStyleType, value: TextStyle) => {\n        onCardChange(currentCard => {\n            return {\n                ...currentCard,\n                nameStyleType: type,\n                nameStyle: value,\n            };\n        });\n    };\n    const onCondenseTolerantChange = (value: CondenseType) => {\n        onCardChange(currentCard => {\n            return {\n                ...currentCard,\n                effectStyle: {\n                    ...currentCard.effectStyle,\n                    condenseTolerant: value,\n                }\n            };\n        });\n    };\n    const onStarChange = onChangeFactory('star', setCard);\n    const onIsPendulumChange = (e: any) => onCardChange(currentCard => {\n        return { ...currentCard, isPendulum: e.target.checked };\n    });\n    const onPictureChange = onChangeFactory('picture', setCard);\n    const onLinkMapChange = onChangeFactory('linkMap', setCard);\n    const onRedScaleChange = onChangeFactory('pendulumScaleRed', setCard);\n    const onBlueScaleChange = onChangeFactory('pendulumScaleBlue', setCard);\n    const onPendulumEffectChange = debounce(onChangeFactory('pendulumEffect', setCard), 350);\n    const onEffectChange = debounce(onChangeFactory('effect', setCard), 350);\n    const onATKChange = onChangeFactory('atk', setCard);\n    const onDEFChange = onChangeFactory('def', setCard);\n    const onTypeAbilityChange = debounce((value: (string | number)[]) => {\n        setCard(current => ({\n            ...current,\n            typeAbility: value.map(entry => `${entry}`),\n        }));\n    }, 350);\n    const onSetIDChange = onChangeFactory('setId', setCard);\n    const onPasscodeChange = onChangeFactory('passcode', setCard);\n    const onStickerChange = onChangeFactory('sticker', setCard);\n    const onCreatorChange = onChangeFactory('creator', setCard);\n    const onFirstEditionChange = (e: any) => onCardChange(currentCard => {\n        return { ...currentCard, isFirstEdition: e.target.checked };\n    });\n\n    const {\n        frame, foil,\n        name, nameStyleType, nameStyle,\n        picture,\n        effect,\n        effectStyle,\n        typeAbility,\n        isPendulum, pendulumEffect, pendulumScaleRed, pendulumScaleBlue,\n        atk, def, linkMap,\n        attribute,\n        subFamily,\n        star,\n        setId,\n        passcode, isFirstEdition, creator, sticker,\n    } = currentCard;\n    const isXyz = checkXyz(currentCard);\n    const isLink = checkLink(currentCard);\n    const isMonster = checkMonster(currentCard);\n    const [displayTypeAbility, setDisplayTypeAbility] = useState(typeAbility.join('/'));\n    const [displayName, setDisplayName] = useState(name);\n    const [displayEffect, setDisplayEffect] = useState(effect);\n    const [displayPendulumEffect, setDisplayPendulumEffect] = useState(pendulumEffect);\n    const [onlineCharPicker, setOnlineCharPicker] = useState('');\n    const ref = useRef();\n    \n    useImperativeHandle(forwardedRef, () => ({\n        forceCardData: (card) => {\n            setDisplayTypeAbility(card.typeAbility.join('/'));\n            setDisplayName(card.name);\n            setDisplayEffect(card.effect);\n            setDisplayPendulumEffect(card.pendulumEffect);\n            imageCropperRef.current?.forceExternalSource(card.picture, card.pictureCrop);\n        }\n    }));\n\n    return <div className=\"card-info-panel\">\n        {children}\n        <CharPicker\n            targetId={onlineCharPicker}\n            onPick={value => {\n                if (ref.current) (ref.current as any)?.props?.onChange?.({\n                    target: { value }\n                });\n            }}\n        />\n        <CheckboxTrain className=\"foil-radio\" value={foil} onChange={onFoilChange} optionList={foilButton}>\n            <span>Foil</span>\n        </CheckboxTrain>\n        <CheckboxTrain className=\"frame-radio\" value={frame} onChange={onFrameChange} optionList={frameButton} />\n        <div className=\"card-header custom-gap\">\n            <Input\n                id=\"name\"\n                ref={onlineCharPicker === 'name' ? ref as any : null}\n                onFocus={() => setOnlineCharPicker('name')}\n                allowClear\n                addonBefore={'Name'}\n                placeholder=\"Card Name\"\n                value={displayName}\n                className=\"name-input\"\n                onChange={ev => {\n                    onNameChange(ev);\n                    setDisplayName(ev.target.value);\n                }}\n            />\n            <StylePicker defaultType={nameStyleType} defaultValue={nameStyle} onChange={onNameColorChange} />\n            {isMonster\n                ? !isLink\n                    ? <CheckboxTrain className=\"checkbox-star-train\" value={`${star}`} onChange={onStarChange} optionList={starButton}>\n                        <span>{isXyz ? 'Rank' : 'Level'}</span>\n                    </CheckboxTrain>\n                    : null\n                : <CheckboxTrain value={subFamily} onChange={onSubFamilyChange} optionList={iconButton}>\n                    <span>Icon</span>\n                </CheckboxTrain>\n            }\n            <CheckboxTrain className=\"checkbox-image-train\" value={attribute} onChange={onAttributeChange} optionList={attributeButton}>\n                <span>Attribute</span>\n            </CheckboxTrain>\n        </div>\n        <div key=\"pic\" className=\"main-info\">\n            <div className=\"main-info-first\">\n                <Input\n                    id=\"set-id\"\n                    ref={onlineCharPicker === 'set-id' ? ref as any : null}\n                    onFocus={() => setOnlineCharPicker('set-id')}\n                    allowClear\n                    className=\"set-id-input\"\n                    addonBefore={<>Set ID<RandomButton seeder={randomSetID} onGenerate={onSetIDChange} /></>}\n                    onChange={onSetIDChange}\n                    placeholder=\"Set ID\"\n                    value={setId}\n                />\n                {(isMonster && frame !== 'link' && frame !== 'token') && <div className=\"pendulum-container\">\n                    <div className=\"joined-row\">\n                        <Checkbox onChange={onIsPendulumChange} checked={isPendulum}>Is Pendulum?</Checkbox>\n                        {isPendulum && <Checkbox onChange={e => setMirrorScale(e.target.checked)} checked={isMirrorScale}>Mirror Scale?</Checkbox>}\n                    </div>\n                    {isPendulum && <>\n                        <div>\n                            <Input key=\"blue-scale\" addonBefore={<span>\n                                <span style={{ color: '#3b9dff' }}>Blue</span> Scale\n                            </span>}\n                            value={pendulumScaleBlue}\n                            onChange={e => {\n                                onBlueScaleChange(e);\n                                if (isMirrorScale) onRedScaleChange(e);\n                            }} />\n                        </div>\n                        <div>\n                            <Input key=\"red-scale\" addonBefore={<span>\n                                <span style={{ color: '#ff6f6f' }}>Red</span> Scale\n                            </span>}\n                            value={pendulumScaleRed}\n                            onChange={e => {\n                                if (isMirrorScale) onBlueScaleChange(e);\n                                onRedScaleChange(e);\n                            }} />\n                        </div>\n                        <div className=\"joined-row\" style={{ position: 'relative' }}>\n                            <TextArea key=\"pendulum-effect\"\n                                id=\"pendulum-effect\"\n                                ref={onlineCharPicker === 'pendulum-effect' ? ref as any : null}\n                                onFocus={() => setOnlineCharPicker('pendulum-effect')}\n                                allowClear\n                                placeholder=\"Pendulum effect\"\n                                value={displayPendulumEffect}\n                                onChange={ev => {\n                                    onPendulumEffectChange(ev);\n                                    setDisplayPendulumEffect(ev.target.value);\n                                }}\n                                rows={6}\n                            />\n                        </div>\n                    </>}\n                </div>}\n                <Input addonBefore=\"Type\"\n                    id=\"type\"\n                    ref={onlineCharPicker === 'type' ? ref as any : null}\n                    onFocus={() => setOnlineCharPicker('type')}\n                    allowClear\n                    onChange={ev => {\n                        const value = ev.target.value;\n\n                        setDisplayTypeAbility(value);\n                        onTypeAbilityChange(value\n                            .split('/')\n                            .map(entry => entry.trim())\n                            .filter(entry => typeof entry === 'string' && entry.length > 0));\n                    }}\n                    placeholder=\"Type / Ability\"\n                    style={{ width: '100%' }}\n                    value={displayTypeAbility}\n                />\n                <CheckboxTrain className=\"checkbox-condense-train\" value={`${effectStyle?.condenseTolerant}`}\n                    onChange={value => onCondenseTolerantChange(value as CondenseType)}\n                    optionList={condenseButton}\n                >\n                    <span>Condense Threshold</span>\n                </CheckboxTrain>\n                <TextArea key=\"effect\"\n                    id=\"card-effect\"\n                    ref={onlineCharPicker === 'card-effect' ? ref as any : null}\n                    onFocus={() => setOnlineCharPicker('card-effect')}\n                    allowClear\n                    placeholder=\"Card effect\"\n                    value={displayEffect}\n                    rows={10}\n                    onChange={ev => {\n                        onEffectChange(ev);\n                        setDisplayEffect(ev.target.value);\n                    }}\n                />\n                <div className=\"card-footer-input\">\n                    {isMonster\n                        ? <Input key=\"atk\"\n                            id=\"atk\"\n                            ref={onlineCharPicker === 'atk' ? ref as any : null}\n                            onFocus={() => setOnlineCharPicker('atk')}\n                            addonBefore=\"ATK\" allowClear value={atk} onChange={onATKChange} />\n                        : <div />}\n                    {isMonster\n                        ? <Input key=\"def\"\n                            id=\"def\"\n                            ref={onlineCharPicker === 'def' ? ref as any : null}\n                            onFocus={() => setOnlineCharPicker('def')}\n                            addonBefore=\"DEF\" allowClear value={def} onChange={onDEFChange} />\n                        : <div />\n                    }\n                    <Input\n                        id=\"password\"\n                        ref={onlineCharPicker === 'password' ? ref as any : null}\n                        onFocus={() => setOnlineCharPicker('password')}\n                        allowClear\n                        className=\"password-input\"\n                        addonBefore={<>Password<RandomButton seeder={randomPassword} onGenerate={onPasscodeChange} /></>}\n                        onChange={onPasscodeChange}\n                        placeholder=\"Password\"\n                        value={passcode}\n                    />\n                    <Checkbox\n                        className=\"input-1st\"\n                        onChange={onFirstEditionChange}\n                        checked={isFirstEdition}\n                    >\n                        Is 1st Edition?\n                    </Checkbox>\n                    <Input addonBefore=\"Creator\"\n                        id=\"creator\"\n                        ref={onlineCharPicker === 'creator' ? ref as any : null}\n                        onFocus={() => setOnlineCharPicker('creator')}\n                        allowClear\n                        className=\"creator-input\"\n                        onChange={onCreatorChange}\n                        placeholder=\"Creator\"\n                        value={creator}\n                    />\n                    <CheckboxTrain className=\"sticker-input checkbox-image-train\" value={sticker} onChange={onStickerChange} optionList={stickerButton}>\n                        <span>Sticker</span>\n                    </CheckboxTrain>\n                </div>\n            </div>\n            <div className=\"main-info-second\">\n                <ImageCropper\n                    ref={imageCropperRef}\n                    noRedrawNumber={1}\n                    defaultExternalSource={picture}\n                    defaultCropInfo={defaultCropInfo}\n                    previewCanvasRef={receivingCanvasRef}\n                    onSourceChange={onPictureChange}\n                    onImageChange={onImageChange}\n                    onTainted={onTainted}\n                    ratio={isPendulum ? 1.325 : 1}\n                >\n                    {isLink\n                        ? <LinkMarkChooser defaultValue={linkMap} onChange={onLinkMapChange} />\n                        : <div />}\n                </ImageCropper>\n            </div>\n        </div>\n    </div>;\n});","import React from 'react';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport { Popover } from 'antd';\nimport './app-header.scss';\n\nexport const AppHeader = React.memo(() => {\n    return <div className=\"app-header\">\n        <img alt=\"app-logo\" src={`${process.env.PUBLIC_URL}/logo192.png`} width={48} />\n        <div className=\"app-description\">\n            <h1>\n                Yugioh Carder <small style={{ fontFamily: 'serif' }}>\n                    v{process.env.REACT_APP_VERSION ?? 'unknown'} TCG\n                </small> - <a className=\"v2\" href=\"https://lauqerm.github.io/ygocarder\">V2 is available!</a></h1>\n            <div className=\"app-contribution\">\n                <span>GUI: <b>Lauqerm</b></span>\n                <span>Template: <b>Grezar</b> and others (<a\n                    href=\"https://www.deviantart.com/grezar/art/SKILL-UPDATE-Series-10-Card-Proxy-Template-686736691\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\">Deviant Art</a>)</span>\n                <Popover overlayClassName=\"disclaimer-overlay\" content={<div className=\"disclaimer\">\n                    <h2>Disclaimer</h2>\n                    <ul>\n                        <li>This is a personal project, not an \"official\" card maker.</li>\n                        <li>I holds no liability for cards created by this app, including picture, card text and any product that related to it.</li>\n                        <li>I do not own any of Yu-Gi-Oh card layers and fonts use in this project.</li>\n                        <li>If you want to modify card layers, or use it in any public project, please contact <a\n                            href=\"https://www.deviantart.com/grezar\"\n                            target=\"_blank\"\n                            rel=\"noreferrer\">Grezar</a> directly.</li>\n                    </ul>\n                </div>}>\n                    <ExclamationCircleOutlined className=\"disclaimer-icon\" />\n                </Popover>\n            </div>\n        </div>\n    </div>;\n}, () => true);\n\nexport const taintedCanvasWarning = <Popover\n    overlayClassName=\"disclaimer-overlay\"\n    style={{ display: 'inline-block' }}\n    content={<div className=\"disclaimer\">\n        <h2>What is happening?</h2>\n        <p>\n        You are using an image host that does not get the \"approval\" needed to be draw to the app. Browsers see it as a potential security risk (even if it is not the case), and mark the canvas as \"tainted\".\n        </p>\n        <h2>How does it affect me?</h2>\n        <p>\n        A \"tainted canvas\" prevent all sort of automatic save. From then on you must save the card manually by right click it → \"Save image as...\". It is implying that this action is fully of your concern.<br />\n        Furthemore, once it get tainted, it will remains tainted even if you switch to other \"safe\" image host.\n        </p>\n        <h2>How do I fix it?</h2>\n        <p>\n        Change to other safe and popular image host (\"imgur\" for example) <b>then refresh the page</b>.<br />\n        If you cannot afford to do that, the app will also work mostly just fine, you only need to manually save the card (and keep cautious).\n        </p>\n    </div>}>\n    <ExclamationCircleOutlined className=\"disclaimer-icon\" />\n</Popover>;","export type FontSize = {\n    fontSize: number,\n    lineHeight: number,\n    lineCount: number,\n};\nexport type BoxSize = {\n\twidth: number,\n\ttop: number,\n\tleft: number,\n};\n\nexport const monsterFontList: FontSize[] = [\n    { fontSize: 17, lineHeight: 17, lineCount: 6 },\n    { fontSize: 14, lineHeight: 14, lineCount: 7 },\n    { fontSize: 12, lineHeight: 12, lineCount: 8 },\n    { fontSize: 11, lineHeight: 11, lineCount: 9 },\n    { fontSize: 10, lineHeight: 10, lineCount: 10 },\n    { fontSize: 9, lineHeight: 9, lineCount: 11 },\n    { fontSize: 8, lineHeight: 8, lineCount: 12 },\n];\nexport const monsterSizeList: BoxSize[] = [\n    { width: 463, top: 620, left: 43.89 },\n    { width: 463, top: 624, left: 43.89 },\n    { width: 463, top: 624, left: 43.89 },\n    { width: 463, top: 624, left: 43.89 },\n    { width: 463, top: 624, left: 43.89 },\n    { width: 463, top: 624, left: 43.89 },\n    { width: 463, top: 624, left: 43.89 },\n];\nexport const monsterVanillaFontList: FontSize[] = [\n    { fontSize: 16.74, lineHeight: 17.01, lineCount: 6 },\n    { fontSize: 16.74, lineHeight: 17.01, lineCount: 7 },\n    { fontSize: 16.74, lineHeight: 17.01, lineCount: 8 },\n];\n\nexport const pendulumFontList: FontSize[] = [\n    { fontSize: 16.41, lineHeight: 16.44, lineCount: 5 },\n    { fontSize: 16.41, lineHeight: 16.44, lineCount: 5 },\n];\nexport const pendulumSizeList: BoxSize[] = [\n    { width: 375, top: 504.5, left: 87.05 },\n    { width: 375, top: 504.5, left: 87.05 },\n];\n\nexport const stFontList: FontSize[] = [\n    { fontSize: 16.41, lineHeight: 16.74, lineCount: 8 },\n    { fontSize: 13.46, lineHeight: 14.28, lineCount: 10 },\n];\nexport const stSizeList: BoxSize[] = [\n    { width: 461, top: 601, left: 45 },\n    { width: 461, top: 601, left: 45 },\n];\n\nexport type TypeSize = {\n\ttop: number,\n\tleft: number,\n    bracketSize: {\n        char: number,\n        bracketSpace: number,\n        bracketOffsetTop: number,\n    },\n    upperCaseSize: number,\n    upperCaseScale: number,\n    lowerCaseSize: number,\n    lowerCaseScale: number,\n    spaceScale: number,\n    spaceSize: {\n        frontSpace: number,\n        char: number,\n        behindSpace: number,\n    },\n    iconSpace: number,\n};\nexport const typeSizeMap: Record<string, TypeSize> = {\n    small: {\n        top: 622,\n        left: 43,\n        bracketSize: {\n            char: 18.71,\n            bracketSpace: 8.51,\n            bracketOffsetTop: 1.64,\n        },\n        upperCaseSize: 20,\n        upperCaseScale: 1,\n        lowerCaseSize: 16,\n        lowerCaseScale: 1.1,\n        spaceScale: 1,\n        spaceSize: {\n            frontSpace: 5,\n            char: 21,\n            behindSpace: 15,\n        },\n        iconSpace: 0,\n    },\n    medium: {\n        top: 620.80,\n        left: 43,\n        bracketSize: {\n            char: 19.69,\n            bracketSpace: 8.51,\n            bracketOffsetTop: 1.64,\n        },\n        upperCaseSize: 21,\n        upperCaseScale: 1,\n        lowerCaseSize: 18,\n        lowerCaseScale: 0.95,\n        spaceScale: 1,\n        spaceSize: {\n            frontSpace: 5,\n            char: 23,\n            behindSpace: 15,\n        },\n        iconSpace: 0,\n    },\n    large: {\n        top: 126,\n        left: 494,\n        bracketSize: {\n            char: 25,\n            bracketSpace: 11,\n            bracketOffsetTop: 2,\n        },\n        upperCaseSize: 26,\n        upperCaseScale: 1.1,\n        lowerCaseSize: 23,\n        lowerCaseScale: 1,\n        spaceScale: 1.4,\n        spaceSize: {\n            frontSpace: 5,\n            char: 23,\n            behindSpace: 15,\n        },\n        iconSpace: 32,\n    },\n};","export const arrowPositionList = [\n    { top: 126, left: 46, width: 50, height: 51 },\n    { top: 116, left: 226, width: 99, height: 32 },\n    { top: 126, left: 453, width: 51, height: 51 },\n    { top: 305, left: 35, width: 33, height: 99 },\n    { top: 0, left: 0, width: 0, height: 0 },   // Middle\n    { top: 305, left: 482, width: 32, height: 99 },\n    { top: 534, left: 46, width: 50, height: 50 },\n    { top: 562, left: 226, width: 99, height: 33 },\n    { top: 534, left: 453, width: 51, height: 50 },\n];\n\nexport const foilPosition: Record<string, {\n    art: { left: number }\n}> = {\n    gold: {\n        art: {\n            left: 2,\n        }\n    },\n    platinum: {\n        art: {\n            left: 1,\n        }\n    },\n};","import { FontSize, monsterFontList, BoxSize, monsterSizeList } from '../const';\nimport { CondenseType, defaultTextStyle, TextStyle } from '../model';\nimport { splitEffect, createCondenser, quoteConvert } from '../util';\n\nexport const drawName = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    value: string,\n    edge: number,\n    baseline: number,\n    maxWidth: number,\n    style: TextStyle,\n) => {\n    if (ctx && value) {\n        ctx.fillStyle = style.fillStyle;\n        if (style.hasShadow) {\n            ctx.shadowColor = style.shadowColor;\n            ctx.shadowOffsetY = style.shadowOffsetY;\n            ctx.shadowOffsetX = style.shadowOffsetX;\n            ctx.shadowBlur = style.shadowBlur;\n        }\n        const splittedText = quoteConvert(value).split(/([^&A-Za-z0-9\\-/\\s()])/g);\n        const contentWidth = splittedText\n            .reduce((prev, cur, index) => {\n                if (index % 2 === 0) ctx.font = '64.59px MatrixRegularSmallCaps';\n                else ctx.font = '54.59px matrix';\n\n                return prev + ctx.measureText(cur).width;\n            }, 0);\n\n        // ctx.fillText(value, edge, baseline, maxWidth);\n        if (contentWidth > 0) {\n            const condenseRatio = Math.min(maxWidth / contentWidth, 1);\n            ctx.scale(condenseRatio, 1);\n            splittedText\n                .reduce((prev, cur, index) => {\n                    if (index % 2 === 0) ctx.font = '64.59px MatrixRegularSmallCaps';\n                    else ctx.font = 'small-caps 54.59px matrix';\n    \n                    ctx.fillText(cur, prev / condenseRatio, baseline);\n                    return prev + ctx.measureText(cur).width * condenseRatio;\n                }, edge);\n            ctx.scale(1 / condenseRatio, 1);\n        }\n        ctx.fillStyle = defaultTextStyle.fillStyle;\n        ctx.shadowColor = defaultTextStyle.shadowColor;\n        ctx.shadowOffsetY = defaultTextStyle.shadowOffsetY;\n        ctx.shadowOffsetX = defaultTextStyle.shadowOffsetX;\n        ctx.shadowBlur = defaultTextStyle.shadowBlur;\n    }\n};\n\nexport const drawScale = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    value: string,\n    edge: number,\n    baseline: number,\n) => {\n    if (ctx && value) {\n        const digitList = `${value}`.split('');\n        let totalWidth = 0;\n\n        digitList.forEach(digit => {\n            totalWidth += (digit === '1' ? ctx.measureText(digit).width * 0.65 : ctx.measureText(digit).width);\n        });\n        let accLeft = edge - totalWidth / 2;\n\n        digitList.forEach(digit => {\n            ctx.fillText(digit, digit === '1' ? accLeft - 3 : accLeft, baseline);\n            accLeft += (digit === '1' ? ctx.measureText(digit).width * 0.65 : ctx.measureText(digit).width);\n        });\n    }\n};\n\nconst CondenseTolerantMap = {\n    strict: {\n        '1': 645,\n        '2': 665,\n        '3': 685,\n    },\n    loose: {\n        '1': 700,\n        '2': 710,\n        '3': 720,\n    },\n    veryLoose: {\n        '1': 740,\n        '2': 770,\n        '3': 800,\n    }\n};\nexport const drawEffect = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    content: string,\n    isPendulumEffect = false,\n    isNormal = false,\n    fontList: FontSize[] = monsterFontList,\n    sizeList: BoxSize[] = monsterSizeList,\n    condenseTolerant: CondenseType = 'strict',\n) => {\n    let effectSizeLevel = 0;\n    const bulletSymbol = '●';\n    const bulletSymbolWidth = 15;\n    const specialSymbol = '#@∞';\n    const breakableSymbol = '\\\\s-';\n    const spaceSymbol = ' ';\n    if (ctx && content) {\n        const normalizedContent = quoteConvert(content.trim());\n        const tolerantPerSentence: Record<string, number> = CondenseTolerantMap[condenseTolerant] ?? CondenseTolerantMap['strict'];\n        const {\n            body: effectBody,\n            flavorCondition: effectFlavorCondition,\n            material: effectMaterial,\n        } = isPendulumEffect\n            ? {\n                body: normalizedContent,\n                flavorCondition: '',\n                material: '',\n            }\n            : splitEffect(normalizedContent, isNormal);\n\n        const additionalLineCount = (effectMaterial.length > 0 ? 1 : 0) + (effectFlavorCondition.length > 0 ? 1 : 0);\n        const sentencizeText = effectBody.split('\\n');\n        \n        const tokenizer = new RegExp(`([${specialSymbol}${breakableSymbol}])`, 'g');\n        const specialSymbolReg = new RegExp(specialSymbol, 'g');\n\n        while (effectSizeLevel < fontList.length) {\n            const { fontSize, lineHeight, lineCount } = fontList[effectSizeLevel];\n            const { left, width: basedWidth, top } = sizeList[effectSizeLevel];\n            const width = isNormal ? basedWidth - 2 : basedWidth;\n            const condenser = createCondenser();\n            let effectiveRatio = 1000;\n\n            const maxLine = Math.max(sentencizeText.length, lineCount);\n\n            ctx.font = `${isNormal ? 'italic' : ''} ${fontSize}px MatrixBook`;\n            ctx.textAlign = 'left';\n\n            const switchFont = (func: () => void) => {\n                const tempFont = ctx.font;\n                const largeSize = fontSize * 1.15;\n                ctx.font = tempFont.replace('MatrixBook', 'matrix').replace(`${fontSize}`, `${largeSize}`);\n                func();\n                ctx.font = tempFont;\n            };\n\n            // [CREATE SENTENCE ON EACH LINE]\n            let lineList: { text: string, width: number, isLast: boolean }[] = [];\n            const createSentence = () => {\n                lineList = [];\n\n                return sentencizeText.reduce((prev, curr) => {\n                    // The width is \"expand\" based on condense ratio so all the calculate does not need to be scaled\n                    const condenseRatio = condenser.getMedian() / 1000;\n                    const hypoWidth = width / condenseRatio;\n                    const tokenizedText = curr.split(tokenizer);\n                    let currentLineCount = 1;\n                    let tokenSentence: string[] = [];\n                    let totalWidth = 0;\n\n                    for (let cnt = 0; cnt < tokenizedText.length; cnt++) {\n                        let tokenWidth = 0;\n                        /**\n                         * If bullet symbol is met, it will become \"wider\" based on condense ratio\n                         * so that when the whole line is condense, bullet symbol's width become\n                         * \"normal\", as if it were not condensed\n                         */\n                        if (tokenizedText[cnt] === bulletSymbol) tokenWidth = bulletSymbolWidth / condenseRatio;\n                        /**\n                         * Some special symbol required different font\n                         */\n                        else if (specialSymbolReg.test(tokenizedText[cnt])) {\n                            switchFont(() => {\n                                tokenWidth = ctx.measureText(tokenizedText[cnt]).width;\n                            });\n                        } else tokenWidth = ctx.measureText(tokenizedText[cnt]).width;\n                        if (totalWidth + tokenWidth > hypoWidth) {\n                            // If the next token cause overflow, wrap it down\n                            const fullString = tokenSentence.join('').trim();\n                            // Calculate the line width as if the bullet is wider\n                            const fullStringSplittedByBullet = fullString.split(bulletSymbol);\n                            lineList.push({\n                                text: fullString,\n                                width: fullStringSplittedByBullet.reduce((prev, curr) => prev + ctx.measureText(curr).width, 0)\n                                    + (fullStringSplittedByBullet.length - 1) * bulletSymbolWidth / condenseRatio,\n                                isLast: false,\n                            });\n                            totalWidth = tokenWidth;\n                            tokenSentence = [tokenizedText[cnt]];\n                            currentLineCount += 1;\n                        } else {\n                            totalWidth += tokenWidth;\n                            tokenSentence.push(tokenizedText[cnt]);\n                        }\n                    }\n\n                    const fullString = tokenSentence.join('').trim();\n                    const fullStringSplittedByBullet = fullString.split(bulletSymbol);\n                    lineList.push({\n                        text: fullString,\n                        width: fullStringSplittedByBullet.reduce((prev, curr) => prev + ctx.measureText(curr).width, 0)\n                            + (fullStringSplittedByBullet.length - 1) * bulletSymbolWidth / condenseRatio,\n                        isLast: true,\n                    });\n    \n                    return prev + currentLineCount;\n                }, 0) + additionalLineCount;\n            };\n\n            // [FIND SUITABLE CONDENSE RATIO]\n            while (condenser.getIterateCount() >= 0) {\n                if (condenser.getIterateCount() <= 0) {\n                    // When out of iteration, return the concluded median\n                    effectiveRatio = condenser.getMedian();\n                    break;\n                } else {\n                    const lineCount = createSentence();\n\n                    if (lineCount > maxLine) {\n                        // If overflow, lower the median and apply it\n                        condenser.searchDown();\n                    } else {\n                        if (condenser.getMedian() === 1000) break;\n                        else effectiveRatio = condenser.reverseSearch();\n                    }\n                }\n            }\n\n            // [START DRAWING]\n            const drawBullet = (ctx: CanvasRenderingContext2D, edge: number, baseline: number) => {\n                ctx.beginPath();\n                ctx.arc(edge + 7, baseline - 5.5, 5.5, 0, 2 * Math.PI, false);\n                ctx.fill();\n                ctx.lineWidth = 1;\n                ctx.strokeStyle = '#003300';\n                ctx.stroke();\n            };\n            const tolerantValue = tolerantPerSentence[`${sentencizeText.length}`] ?? tolerantPerSentence['3'];\n            if ((effectiveRatio < tolerantValue)\n            && effectSizeLevel < fontList.length - 1) {\n                effectSizeLevel += 1;\n            } else {\n                ctx?.clearRect(0, 0, 549, 750);\n                let baseline = top + lineHeight;\n                if (effectMaterial.length > 0) {\n                    let actualWidth = ctx.measureText(effectMaterial).width;\n                    let condenseRatio = Math.min(width / actualWidth, 1);\n\n                    ctx.scale(condenseRatio, 1);\n                    ctx.fillText(effectMaterial, left / condenseRatio, baseline);\n                    baseline += lineHeight;\n                    ctx.scale(1 / condenseRatio, 1);\n                }\n\n                /**\n                 * Is it last line?\n                 * * Yes:\n                 *   * Draw text with predefined ratio (factor in special symbol and effect bullet)\n                 * * No:\n                 *   * Calculate total meaningful content width (text, special symbol, effect bullet)\n                 *   * Calculate space content by subtract total width with meaningful content width\n                 *   * Distribute space content to each individual space\n                 *   * Draw text with predefined ratio and widened space\n                 */\n                const sigmoidRatio = effectiveRatio / 1000; // Fancy way to force ratio in to 0-1 range\n                lineList.forEach(({\n                    text,\n                    width: actualWidth,\n                    isLast,\n                }) => {\n                    const condenseRatio = isLast\n                        ? Math.min(sigmoidRatio, 1)\n                        : sigmoidRatio;\n\n                    ctx.scale(condenseRatio, 1);\n                    if (isLast) {\n                        const splitter = new RegExp(`([${bulletSymbol}${specialSymbol}])`, 'g');\n                        const splittedText = text.split(splitter);\n\n                        splittedText.reduce((prev, cur, index) => {\n                            let edge = prev;\n\n                            // Normal text\n                            if (index % 2 === 0) {\n                                ctx.fillText(cur, edge / condenseRatio, baseline);\n                                edge += ctx.measureText(cur).width * condenseRatio;\n                            } else {\n                                // Special bullet\n                                if (cur === bulletSymbol) {\n                                    ctx.scale(1 / condenseRatio, 1);\n                                    drawBullet(ctx, edge, baseline);\n                                    edge += 15;\n                                    ctx.scale(condenseRatio, 1);\n                                } else {\n                                    switchFont(() => {\n                                        ctx.fillText(cur, edge / condenseRatio, baseline);\n                                        edge += ctx.measureText(cur).width * condenseRatio;\n                                    });\n                                }\n                            }\n\n                            return edge;\n                        }, left);\n                    } else {\n                        /**\n                         * This regex split string into two types:\n                         * * Normal text, that is, any words or characters (EVEN empty string) that can be draw normally without any proccessing\n                         * * Special character that need special procession before they can be draw\n                         * \n                         * By nature of the regex, the result will guaranteed to look like this:\n                         * \n                         * `[normal, special, normal, special, normal, special, ...]`\n                         * \n                         * It is easy to see that normal text will always stand at odd indices, while special text stand at even ones\n                         */\n                        const splitter = new RegExp(`([${bulletSymbol}${specialSymbol}${spaceSymbol}])`, 'g');\n                        const spaceSeparatedText = text.split(splitter);\n                        const spaceNextToBulletSet: Set<number> = new Set();\n                        let nonSpaceWidth = 0;\n                        let spaceCount = 0;\n\n                        spaceSeparatedText.forEach((entry, index) => {\n                            if (entry === spaceSymbol) {\n                                /**\n                                 * Space right next to bullet is treated differently and do not count toward space counter, also their position is\n                                 * saved\n                                 */\n                                if (spaceSeparatedText[index - 2] === bulletSymbol) {\n                                    spaceNextToBulletSet.add(index - 2);\n                                    nonSpaceWidth += ctx.measureText(entry).width * condenseRatio;\n                                } else {\n                                    spaceCount += 1;\n                                }\n                            } else if (entry === bulletSymbol) {\n                                nonSpaceWidth += 15;\n                            } else if (specialSymbolReg.test(entry)) {\n                                switchFont(() => nonSpaceWidth += ctx.measureText(entry).width * condenseRatio);\n                            } else {\n                                nonSpaceWidth += ctx.measureText(entry).width * condenseRatio;\n                            }\n                        });\n                        // Split text by \"space\", then distribute remaining width to those spaces, resulting in \"widen\" space\n                        const spaceWidth = spaceCount > 0 ? (width - nonSpaceWidth) / spaceCount : 0;\n\n                        spaceSeparatedText.reduce((prev, cur, index) => {\n                            let edge = prev;\n\n                            // Normal text\n                            if (index % 2 === 0) {\n                                ctx.fillText(cur, edge / condenseRatio, baseline);\n                                edge += ctx.measureText(cur).width * condenseRatio;\n                            } else {\n                                // Special bullet\n                                if (cur === bulletSymbol) {\n                                    ctx.scale(1 / condenseRatio, 1);\n                                    drawBullet(ctx, edge, baseline);\n                                    edge += 15;\n                                    ctx.scale(condenseRatio, 1);\n                                    /**\n                                     * If this bullet is followed by a white space, we draw this white space with normal condensed font size instead of\n                                     * auto-distributed size because bullet naturally form a list. So we must guarantee the space between bullet and\n                                     * the text next to it must be the same accross all the line so it look perfectly aligned.\n                                     */\n                                    if (spaceNextToBulletSet.has(index)) {\n                                        ctx.fillText(spaceSymbol, edge / condenseRatio, baseline);\n                                        edge += ctx.measureText(spaceSymbol).width * condenseRatio;\n                                    }\n                                } else if (cur === spaceSymbol) {\n                                    /**\n                                     * Since we already has special treatment for space next to bullet, ignore it for normal space processing.\n                                     */\n                                    if (!spaceNextToBulletSet.has(index - 2)) edge += spaceWidth;\n                                } else {\n                                    switchFont(() => {\n                                        ctx.fillText(cur, edge / condenseRatio, baseline);\n                                        edge += ctx.measureText(cur).width * condenseRatio;\n                                    });\n                                }\n                            }\n\n                            return edge;\n                        }, left);\n                    }\n                    ctx.scale(1 / condenseRatio, 1);\n                    baseline += lineHeight;\n                });\n\n                if (effectFlavorCondition.length > 0) {\n                    let actualWidth = ctx.measureText(effectFlavorCondition).width;\n                    let condenseRatio = Math.min(width / actualWidth, 1);\n\n                    ctx.font = `${fontSize}px MatrixBook`;\n                    ctx.scale(condenseRatio, 1);\n                    ctx.fillText(effectFlavorCondition, left / condenseRatio, baseline);\n                    baseline += lineHeight;\n                    ctx.scale(1 / condenseRatio, 1);\n                }\n                break;\n            }\n        }\n\n        return effectSizeLevel;\n    }\n    return effectSizeLevel;\n};","import { CanvasConst } from 'src/model';\n\nconst { height: CanvasHeight, width: CanvasWidth } = CanvasConst;\n\nexport const measureWithSymbol = (\n    ctx: CanvasRenderingContext2D,\n    content: string,\n    symbol: string,\n    maxWidth: number,\n) => {\n    const splittedContent = content.split(symbol);\n    const splittedWidth = splittedContent.map(entry => ctx.measureText(entry).width);\n    const symbolWidth = ctx.measureText(symbol).width;\n    const totalCondensableWidth = splittedWidth.reduce((prev, curr) => prev + curr, 0);\n    const returnBundle = {\n        splittedContent,\n        splittedWidth,\n        symbolWidth,\n        totalCondensableWidth,\n        condenseRatio: 1,\n    };\n\n    if (totalCondensableWidth > 0) {\n        // Calculate as if the \"symbol\" always appear as full width\n        returnBundle.condenseRatio = Math.min((maxWidth - (splittedWidth.length - 1) * symbolWidth) / totalCondensableWidth, 1);\n    }\n\n    return returnBundle;\n};\n\nexport const fillTextLeftWithSpacing = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    str: string,\n    letterSpacingRatio: number,\n    edge: number,\n    baseline: number,\n) => {\n    if (ctx && str) {\n        ctx.textAlign = 'left';\n        const charList = str.split('');\n        let curLeft = edge;\n\n        charList.forEach(char => {\n            ctx.fillText(char, curLeft, baseline);\n            curLeft += ctx.measureText(char).width * (1 + (letterSpacingRatio / 2));\n        });\n\n        return curLeft;\n    }\n    return 0;\n};\nexport const fillTextRightWithSpacing = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    str: string,\n    letterSpacingRatio: number,\n    edge: number,\n    baseline: number,\n) => {\n    if (ctx && str) {\n        ctx.textAlign = 'right';\n        const charList = str.split('');\n        let curRight = edge;\n\n        charList.forEach((c, index) => {\n            const char = charList[charList.length - index - 1];\n            ctx.fillText(char, curRight, baseline);\n            curRight -= ctx.measureText(char).width * (1 + (letterSpacingRatio / 2));\n        });\n        return curRight;\n    };\n    return edge;\n};\n\nexport const fillTextLeftWithLimit = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    content: string,\n    edge: number,\n    baseline: number,\n    maxWidth: number,\n) => {\n    if (ctx) {\n        const contentWidth = ctx.measureText(content).width;\n\n        if (contentWidth > 0) {\n            const condenseRatio = Math.min(maxWidth / contentWidth, 1);\n            ctx.scale(condenseRatio, 1);\n            ctx.fillText(content, edge / condenseRatio, baseline);\n            ctx.scale(1 / condenseRatio, 1);\n            ctx.fillStyle = '#000000';\n        }\n    }\n};\n\nexport const clearCanvas = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n) => {\n    if (ctx) {\n        ctx.clearRect(0, 0, CanvasWidth, CanvasHeight);\n    };\n};","import { fillTextRightWithSpacing, measureWithSymbol } from './util';\n\nexport const draw1stEdition = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    edge = 99,\n) => {\n    if (ctx) {\n        ctx.font = 'bold 16px palatino-linotype-bold';\n\n        let left = edge;\n        ctx.fillText('1', left, 777);\n        left += ctx.measureText('1').width - 2;\n\n        ctx.font = 'bold 12px palatino-linotype-bold';\n        ctx.fillText('st', left, 777 - 5);\n        left += ctx.measureText('st').width;\n\n        ctx.font = 'bold 15px palatino-linotype-bold';\n        ctx.fillText(' Edition', left, 777);\n    }\n};\n\nexport const drawCreatorText = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    content: string,\n) => {\n    if (ctx && content) {\n        ctx.font = '16px stone-serif-regular';\n\n        const uncondensableSymbol = '©';\n        const {\n            splittedContent,\n            splittedWidth,\n            symbolWidth,\n            condenseRatio,\n        } = measureWithSymbol(ctx, content, uncondensableSymbol, 257);\n\n        if (condenseRatio < 1) {\n            ctx.textAlign = 'left';\n            ctx.scale(condenseRatio, 1);\n            splittedContent.reduce((prev, cur, index) => {\n                // Fill condense text at the current edge\n                ctx.fillText(cur, prev / condenseRatio, 777);\n                // Increase edge equal to the draw text (condense ratio factored)\n                let nextEdge = prev + splittedWidth[index] * condenseRatio;\n                if (index < splittedContent.length - 1) {\n                    // Restore 1:1 ratio\n                    ctx.scale(1 / condenseRatio, 1);\n                    // Increase edge equal to the character \"©\" (condense ratio is 1 so no factored)\n                    ctx.fillText(uncondensableSymbol, nextEdge, 777);\n                    nextEdge += symbolWidth;\n                    // Restore condense ratio\n                    ctx.scale(condenseRatio, 1);\n                }\n                return nextEdge;\n            }, 496 - 257);\n            ctx.scale(1 / condenseRatio, 1);\n        } else {\n            ctx.textAlign = 'right';\n            fillTextRightWithSpacing(ctx, content, -0.15, 496 / condenseRatio, 777);\n        }\n        ctx.textAlign = 'left';\n    }\n};\n\nexport const drawAD = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    value: string | number,\n    edge: number,\n    baseline: number,\n) => {\n    if (ctx && value !== undefined) {\n        if (value === '∞') {\n            ctx.textAlign = 'right';\n            ctx.font = 'bold 25px matrix';\n            ctx.fillText(value, edge + 49.94, baseline);\n        } else {\n            ctx.textAlign = 'left';\n            const tokenizedText = `${value}`.split('?');\n\n            let totalWidth = tokenizedText.reduce((prev, curr, index) => {\n                ctx.font = '25px MatrixBoldSmallCaps';\n                let nextWidth = prev + ctx.measureText(curr).width;\n\n                if (index < tokenizedText.length - 1) {\n                    ctx.font = '25px matrix';\n                    nextWidth += ctx.measureText('?').width;\n                }\n\n                return nextWidth;\n            }, 0);\n\n            if (totalWidth > 0) {\n                const condenseRatio = Math.min(49.94 / totalWidth, 1);\n\n                ctx.scale(condenseRatio, 1);\n                tokenizedText.reduce((prev, curr, index, arr) => {\n                    const curText = arr[arr.length - 1 - index];\n                    let nextEdge = prev;\n                    ctx.font = '25px MatrixBoldSmallCaps';\n                    nextEdge -= ctx.measureText(curText).width * condenseRatio;\n                    ctx.fillText(curText, nextEdge / condenseRatio, baseline);\n\n                    if (index < tokenizedText.length - 1) {\n                        ctx.font = 'bold 25px matrix';\n                        nextEdge -= ctx.measureText('?').width * condenseRatio;\n                        ctx.fillText('?', nextEdge / condenseRatio, baseline);\n                    }\n    \n                    return nextEdge;\n                }, edge + 49.94);\n                ctx.scale(1 / condenseRatio, 1);\n            }\n        }\n    }\n};","import { TypeSize } from '../const';\n\ntype Aligment = 'left' | 'right';\nexport const drawBracketTemplate = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    content: string,\n    size: TypeSize,\n    alignment: Aligment,\n) => {\n    return (edge: number) => {\n        if (ctx) {\n            const {\n                top: baseline,\n                bracketSize: { char: bracketChar, bracketOffsetTop }\n            } = size;\n            const alignmentOffset = alignment === 'left' ? 1 : -1;\n\n            ctx.font = `bold ${bracketChar}px stone-serif-bold`;\n            ctx.textAlign = alignment;\n            ctx.fillText(content, edge, baseline - bracketOffsetTop);\n            return edge + ctx.measureText(content).width * alignmentOffset;\n        }\n        return edge;\n    };\n};\nexport const drawIconSpaceTemplate = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    size: TypeSize,\n    alignment: Aligment,\n) => {\n    return (edge: number) => {\n        if (ctx) {\n            const { iconSpace } = size;\n            const alignmentOffset = alignment === 'left' ? 1 : -1;\n\n            return edge + iconSpace * alignmentOffset;\n        }\n        return edge;\n    };\n};\nexport const drawBracketSpaceTemplate = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    content: string,\n    size: TypeSize,\n    alignment: Aligment,\n) => {\n    return (edge: number) => {\n        if (ctx) {\n            const { top: baseline, bracketSize: { bracketSpace } } = size;\n            const alignmentOffset = alignment === 'left' ? 1 : -1;\n\n            ctx.font = `bold ${bracketSpace}px stone-serif-bold`;\n            ctx.textAlign = alignment;\n            ctx.fillText(content, edge, baseline);\n            return edge + ctx.measureText(content).width * alignmentOffset;\n        }\n        return edge;\n    };\n};\nexport const drawTextTemplate = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    content: string,\n    isLast = false,\n    size: TypeSize,\n    alignment: Aligment,\n) => {\n    const {\n        top: baseline,\n        spaceSize: { frontSpace, char: spaceChar, behindSpace },\n        upperCaseScale,\n        upperCaseSize,\n        lowerCaseScale,\n        lowerCaseSize,\n        spaceScale,\n    } = size;\n    const alignmentOffset = alignment === 'left' ? 1 : -1;\n    const drawSlashTemplate = (\n        ctx: CanvasRenderingContext2D,\n        baseOffset: number,\n    ) => {\n        let totalOffset = baseOffset;\n        ctx.font = `bold ${frontSpace}px stone-serif-bold`;\n        ctx.fillText(' ', totalOffset, baseline);\n        totalOffset += ctx.measureText(' ').width * alignmentOffset;\n\t\n        ctx.font = `oblique bold ${spaceChar}px stone-serif-bold`;\n        ctx.scale(0.65, 1);\n        ctx.fillText('/', totalOffset / 0.65, baseline);\n        totalOffset += ctx.measureText('/').width * 0.65 * alignmentOffset;\n        ctx.scale(1 / 0.65, 1);\n\t\n        ctx.font = `bold ${behindSpace}px stone-serif-bold`;\n        ctx.fillText(' ', totalOffset, baseline);\n        totalOffset += ctx.measureText(' ').width * alignmentOffset;\n        return totalOffset;\n    };\n\n    return (left: number) => {\n        let totalOffset = left;\n        if (ctx) {\n            ctx.textAlign = alignment;\n\n            if (!isLast && alignment === 'right') totalOffset = drawSlashTemplate(ctx, totalOffset);\n            content\n                .split('')\n                .forEach((c, index, arr) => {\n                    const char = alignment === 'left' ? arr[index] : arr[arr.length - 1 - index];\n                    if (/[A-Z]/.test(char)) {\n                        ctx.font = `bold ${upperCaseSize}px stone-serif-bold`;\n                        ctx.scale(upperCaseScale, 1);\n                        ctx.fillText(char, totalOffset / upperCaseScale, baseline);\n                        totalOffset += ctx.measureText(char).width * upperCaseScale * alignmentOffset;\n                        ctx.scale(1 / upperCaseScale, 1);\n                    } else if (/\\s/.test(char)) {\n                        ctx.font = `bold ${lowerCaseSize}px stone-serif-bold`;\n                        ctx.scale(spaceScale, 1);\n                        ctx.fillText(char, totalOffset / spaceScale, baseline);\n                        totalOffset += ctx.measureText(char).width * spaceScale * alignmentOffset;\n                        ctx.scale(1 / spaceScale, 1);\n                    } else {\n                        const upperChar = char.toLocaleUpperCase();\n                        ctx.font = `bold ${lowerCaseSize}px stone-serif-bold`;\n                        ctx.scale(lowerCaseScale, 1);\n                        ctx.fillText(upperChar, totalOffset / lowerCaseScale, baseline);\n                        totalOffset += ctx.measureText(upperChar).width * lowerCaseScale * alignmentOffset;\n                        ctx.scale(1 / lowerCaseScale, 1);\n                    }\n                });\n            if (!isLast && alignment === 'left') totalOffset = drawSlashTemplate(ctx, totalOffset);\n            return totalOffset;\n        }\n        return totalOffset;\n    };\n};","const imageCacheMap: Record<string, {\n    image: HTMLImageElement,\n    ready: boolean,\n}> = {};\n\nexport const drawFromSource = async (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    source: string,\n    sx: number | ((image: HTMLImageElement) => number),\n    sy: number | ((image: HTMLImageElement) => number),\n) => {\n    if (!ctx) return new Promise<boolean>(resolve => resolve(false));\n    return new Promise<boolean>(resolve => {\n        if (imageCacheMap[source]?.ready === true) {\n            const img = imageCacheMap[source].image;\n            let normalizedX = typeof sx === 'number' ? sx : sx(img);\n            let normalizedY = typeof sy === 'number' ? sy : sy(img);\n            ctx.drawImage(img, normalizedX, normalizedY);\n            resolve(true);\n        } else {\n            const img = new Image();\n            img.src = process.env.PUBLIC_URL + source;\n            img.onload = () => {\n                let normalizedX = typeof sx === 'number' ? sx : sx(img);\n                let normalizedY = typeof sy === 'number' ? sy : sy(img);\n                ctx.drawImage(img, normalizedX, normalizedY);\n                imageCacheMap[source].ready = true;\n                resolve(true);\n            };\n            img.onerror = () => {\n                resolve(false);\n            };\n            imageCacheMap[source] = {\n                image: img,\n                ready: false,\n            };\n        }\n    });\n};\n\nexport const drawFromSourceWithSize = async (\n    ctx: CanvasRenderingContext2D | null | undefined,\n    source: string,\n    sx: number | ((image: HTMLImageElement) => number),\n    sy: number | ((image: HTMLImageElement) => number),\n    dw: number, dh: number,\n) => {\n    if (!ctx) return new Promise<boolean>(resolve => resolve(false));\n    return new Promise<boolean>(resolve => {\n        if (imageCacheMap[source]?.ready === true) {\n            const img = imageCacheMap[source].image;\n            let normalizedX = typeof sx === 'number' ? sx : sx(img);\n            let normalizedY = typeof sy === 'number' ? sy : sy(img);\n            ctx.drawImage(img, normalizedX, normalizedY, dw, dh);\n            resolve(true);\n        } else {\n            const img = new Image();\n            img.src = process.env.PUBLIC_URL + source;\n            img.onload = () => {\n                let normalizedX = typeof sx === 'number' ? sx : sx(img);\n                let normalizedY = typeof sy === 'number' ? sy : sy(img);\n                ctx.drawImage(img, normalizedX, normalizedY, dw, dh);\n                imageCacheMap[source].ready = true;\n                resolve(true);\n            };\n            img.onerror = () => {\n                resolve(false);\n            };\n            imageCacheMap[source] = {\n                image: img,\n                ready: false,\n            };\n        }\n    });\n};","import { useCallback, useEffect, useRef } from 'react';\nimport {\n    arrowPositionList,\n    foilPosition,\n    pendulumFontList,\n    pendulumSizeList,\n    stFontList,\n    stSizeList,\n    typeSizeMap\n} from 'src/const';\nimport {\n    clearCanvas,\n    draw1stEdition,\n    drawAD,\n    drawBracketSpaceTemplate,\n    drawBracketTemplate,\n    drawCreatorText,\n    drawEffect,\n    drawFromSource,\n    drawFromSourceWithSize,\n    drawIconSpaceTemplate,\n    drawName,\n    drawScale,\n    drawTextTemplate,\n    fillTextLeftWithSpacing,\n    fillTextRightWithSpacing\n} from 'src/draw';\nimport { Card, defaultTextStyle, foilStyleMap, iconList, MasterDuelCanvas } from 'src/model';\nimport { checkLink, checkMonster, checkNormal, checkXyz, getCardFrame } from 'src/util';\n\n\ntype DrawerProp = {\n    imageChangeCount: number,\n    pendulumSize?: 'medium',\n    isInitializing: boolean,\n}\nexport const useMasterSeriDrawer = (active: boolean, canvasMap: MasterDuelCanvas, card: Card, props: DrawerProp) => {\n    const {\n        artCanvas,\n        previewCanvas,\n        frameCanvas,\n        specialFrameCanvas,\n        attributeCanvas,\n        creatorCanvas,\n        effectCanvas,\n        nameCanvas,\n        passcodeCanvas,\n        pendulumEffectCanvas,\n        pendulumScaleCanvas,\n        setIdCanvas,\n        statCanvas,\n        stickerCanvas,\n        subFamilyCanvas,\n        typeCanvas,\n    } = canvasMap;\n    const {\n        frame, foil,\n        name, nameStyleType, nameStyle,\n        effect,\n        effectStyle,\n        typeAbility,\n        isPendulum, pendulumEffect, pendulumScaleBlue, pendulumScaleRed,\n        atk, def, linkMap,\n        attribute,\n        subFamily,\n        star,\n        setId,\n        passcode, isFirstEdition, creator, sticker,\n    } = card;\n    const isNormal = checkNormal(card);\n    const isXyz = checkXyz(card);\n    const isLink = checkLink(card);\n    const isMonster = checkMonster(card);\n    const {\n        isInitializing,\n        imageChangeCount,\n        pendulumSize = 'medium',\n    } = props;\n\n    const drawingPipeline = useRef<Record<string, () => Promise<any>>>({\n        frame: () => Promise.resolve(),\n        star: () => Promise.resolve(),\n        attribute: () => Promise.resolve(),\n        specialFrame: () => Promise.resolve(),\n        sticker: () => Promise.resolve(),\n    });\n\n    useEffect(() => {\n        if (active) {\n            const ctx = artCanvas.current?.getContext('2d');\n            const previewCtx = previewCanvas.current;\n            if (previewCtx && ctx) {\n                ctx.clearRect(0, 0, 548, 650);\n                if (isPendulum) {\n                    ctx.drawImage(previewCtx, 38, 144, 474, 470);\n                } else {\n                    ctx.drawImage(previewCtx, 67, 147, 416, 416);\n                }\n            }\n        }\n    }, [active, isPendulum, imageChangeCount, artCanvas, previewCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = frameCanvas.current?.getContext('2d');\n\n            drawingPipeline.current.frame = async () => {\n                clearCanvas(ctx);\n                const cardType = getCardFrame(frame);\n                const hasFoil = foil !== 'normal';\n\n                await drawFromSource(ctx, `/asset/image/frame/frame-${cardType}.png`, 0, 0);\n                if (hasFoil) {\n                    const { art } = foilPosition[foil];\n\n                    await drawFromSource(ctx, `/asset/image/frame/frame-art-${foil}.png`, art.left, 120);\n                    await drawFromSource(ctx, `/asset/image/frame/frame-effect-${foil}.png`, 0, 580);\n                }\n            };\n        }\n    }, [active, foil, frame, frameCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = specialFrameCanvas.current?.getContext('2d');\n\n            drawingPipeline.current.specialFrame = async () => {\n                clearCanvas(ctx);\n                const hasFoil = foil !== 'normal';\n\n                const cardType = getCardFrame(frame);\n                if (isPendulum && !isLink) {\n                    if (!isXyz) await drawFromSource(ctx, `/asset/image/pendulum/overlay-pendulum-${cardType}.png`, 0, 0);\n                    await drawFromSource(ctx, `/asset/image/frame/frame-pendulum-${pendulumSize}.png`, 0, 0);\n                    if (hasFoil) await drawFromSource(ctx, `/asset/image/frame/frame-pendulum-${pendulumSize}-${foil}.png`, 0, 0);\n                }\n\n                const foiledBorder = !hasFoil ? '/asset/image/frame/frame-border.png' : `/asset/image/frame/frame-border-${foil}.png`;\n                await drawFromSource(ctx, foiledBorder, 0, 0);\n                if (!isPendulum && isLink) {\n                    if (hasFoil) await drawFromSource(ctx, `./asset/image/link/link-overlay-${foil}.png`, 0, 110);\n                    else await drawFromSource(ctx, '/asset/image/link/link-overlay.png', 66, 146);\n                    if (hasFoil) await drawFromSource(ctx, `/asset/image/link/link-overlay-arrow-${foil}.png`, 0, 110);\n\n                    await Promise.all(linkMap\n                        .map(entry => {\n                            const { left, top, height, width } = arrowPositionList[parseInt(entry) - 1];\n                            if (hasFoil) return drawFromSourceWithSize(ctx, `/asset/image/link/link-arrow-${entry}-${foil}.png`, left, top, width, height);\n                            else return drawFromSourceWithSize(ctx, `/asset/image/link/link-arrow-${entry}.png`, left, top, width, height);\n                        })\n                    );\n                    if (ctx) {\n                        ctx.textAlign = 'right';\n                        ctx.scale(1.2, 1);\n                        ctx.font = 'bold 24px Yugioh Rush Duel Numbers V4';\n                        ctx.fillText(`${linkMap.length}`, 505 / 1.2, 746);\n                        ctx.scale(1 / 1.2, 1);\n                        ctx.textAlign = 'left';\n                    }\n                }\n            };\n        }\n    }, [active, foil, frame, isLink, isPendulum, isXyz, linkMap, pendulumSize, specialFrameCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = attributeCanvas.current?.getContext('2d');\n            drawingPipeline.current.attribute = () => {\n                ctx?.clearRect(0, 0, 549, 100);\n\n                return drawFromSource(ctx, `/asset/image/attribute/attr-${attribute.toLowerCase()}.png`, 458, 37);\n            };\n        }\n    }, [active, attribute, attributeCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = subFamilyCanvas.current?.getContext('2d');\n            drawingPipeline.current.star = () => {\n                ctx?.clearRect(0, 0, 549, 150);\n                if (isMonster && !isLink) {\n                    let counter = Math.min(13, star ?? 0);\n                    let type = isXyz ? 'rank' : 'level';\n                    let offset = 0 - (34 + 2.3636);\n                    let totalWidth = 34 * counter + 2.3636 * (counter - 1);\n                    let edge = counter <= 12\n                        ? isXyz\n                            ? 57 - 34\n                            : 492\n                        : isXyz\n                            ? (549 - totalWidth) / 2 - 34\n                            : (549 - totalWidth) / 2 + totalWidth;\n\n                    return Promise.all([...Array(counter)]\n                        .map(() => {\n                            offset += (34 + 2.3636);\n                            return drawFromSource(\n                                ctx,\n                                `/asset/image/sub-family/subfamily-${type}.png`,\n                                edge + (34 + offset) * (isXyz ? 1 : -1),\n                                99,\n                            );\n                        })\n                    );\n                } else if (!isMonster) {\n                    const normalizedSubFamily = subFamily.toUpperCase();\n                    const hasSTIcon = normalizedSubFamily !== 'NO ICON' && iconList.includes(normalizedSubFamily);\n\n                    return hasSTIcon\n                        ? drawFromSourceWithSize(ctx, `/asset/image/sub-family/subfamily-${normalizedSubFamily.toLowerCase()}.png`,\n                            (image) => 491 - image.naturalWidth - 7,\n                            103,\n                            29, 29)\n                        : new Promise(resolve => resolve(true));\n                };\n                return new Promise(resolve => resolve(true));\n            };\n        }\n    }, [active, isLink, isMonster, isXyz, star, subFamily, subFamilyCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const fontSize = 43;\n            const ctx = pendulumScaleCanvas.current?.getContext('2d');\n\n            ctx?.clearRect(0, 0, 549, 600);\n            if (ctx && isPendulum) {\n                ctx.font = `${fontSize}px MatrixBoldSmallCaps`;\n                ctx.textAlign = 'left';\n\n                drawScale(ctx, pendulumScaleBlue ?? 0, 57, 532 + fontSize);\n                drawScale(ctx, pendulumScaleRed ?? 0, 493, 532 + fontSize);\n            }\n        }\n    }, [isInitializing, pendulumScaleBlue, isPendulum, pendulumScaleRed, active, pendulumScaleCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = nameCanvas.current?.getContext('2d');\n            if (ctx) {\n                ctx.clearRect(0, 0, 549, 100);\n                ctx.textAlign = 'left';\n                const style = nameStyleType === 'auto'\n                    ? foil !== 'normal'\n                        ? foilStyleMap[foil] ?? defaultTextStyle\n                        : { ...defaultTextStyle, fillStyle: (!isMonster || isLink || isXyz) ? '#ffffff' : '#000000' }\n                    : nameStyle;\n\n                drawName(ctx, name, 40.52, 78, 409, style);\n            }\n        }\n    }, [active, foil, isInitializing, isLink, isMonster, isXyz, name, nameCanvas, nameStyle, nameStyleType]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = statCanvas.current?.getContext('2d');\n            clearCanvas(ctx);\n            if (isMonster) {\n                drawAD(ctx, atk, 343.51, 747);\n                if (!isLink) {\n                    drawAD(ctx, def, 454.93, 747);\n                }\n            }\n        }\n    }, [isInitializing, atk, def, isLink, isMonster, active, statCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = setIdCanvas.current?.getContext('2d');\n            clearCanvas(ctx);\n            if (ctx) {\n                if (isXyz && !isPendulum) ctx.fillStyle = '#fff';\n                else ctx.fillStyle = '#000';\n                ctx.font = '15px stone-serif-regular';\n\n                if (isPendulum) {\n                    fillTextLeftWithSpacing(ctx, setId, -0.1, 45, 746);\n                } else if (isLink) {\n                    fillTextRightWithSpacing(ctx, setId, -0.1, 450, 590);\n                } else fillTextRightWithSpacing(ctx, setId, -0.1, 492, 589);\n            }\n        }\n    }, [active, isInitializing, isLink, isPendulum, isXyz, setIdCanvas, setId]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = passcodeCanvas.current?.getContext('2d');\n            clearCanvas(ctx);\n            if (ctx) {\n                if (isXyz && !isPendulum) ctx.fillStyle = '#fff';\n                else ctx.fillStyle = '#000';\n                ctx.font = '15px stone-serif-regular';\n\n                const endOfPasscode = fillTextLeftWithSpacing(ctx, passcode, 0.1, 25, 777);\n                if (isFirstEdition) {\n                    if (isXyz && !isPendulum) ctx.fillStyle = '#fff';\n                    else ctx.fillStyle = '#000';\n\n                    draw1stEdition(ctx, Math.max(endOfPasscode + 10, 96));\n                }\n            }\n        }\n    }, [active, isFirstEdition, isInitializing, isLink, isPendulum, isXyz, passcode, passcodeCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = creatorCanvas.current?.getContext('2d');\n            clearCanvas(ctx);\n            if (ctx) {\n                if (isXyz && !isPendulum) ctx.fillStyle = '#fff';\n                else ctx.fillStyle = '#000';\n\n                drawCreatorText(ctx, creator);\n            }\n        }\n    }, [isInitializing, isLink, isPendulum, isXyz, creator, active, creatorCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = stickerCanvas.current?.getContext('2d');\n            drawingPipeline.current.sticker = () => {\n                clearCanvas(ctx);\n\n                if (sticker === 'no-sticker') return Promise.resolve();\n                return drawFromSource(ctx, `/asset/image/sticker/sticker-${sticker.toLowerCase()}.png`, 499, 750);\n            };\n        }\n    }, [active, sticker, stickerCanvas]);\n\n    const drawTypeAbility = useCallback((\n        ctx: CanvasRenderingContext2D | null | undefined,\n        textSize: 'small' | 'medium' | 'large',\n        alignment: 'left' | 'right' = 'left',\n    ) => {\n        if (ctx) {\n            ctx?.clearRect(0, 0, 549, 700);\n            const size = typeSizeMap[textSize] ?? typeSizeMap['medium'];\n            const { left } = size;\n            const normalizedSubFamily = subFamily.toUpperCase();\n            const instructionList = [\n                drawBracketTemplate(ctx, '[', size, alignment),\n                drawBracketSpaceTemplate(ctx, ' ', size, alignment),\n                ...typeAbility.map((entry, index) => drawTextTemplate(\n                    ctx,\n                    entry,\n                    index === typeAbility.length - 1,\n                    size, alignment)),\n                textSize === 'large'\n                    ? normalizedSubFamily === 'NO ICON'\n                        ? (edge: number) => edge + 4 * (alignment === 'left' ? 1 : -1)\n                        : drawIconSpaceTemplate(ctx, size, alignment)\n                    : (edge: number) => edge + 2,\n                drawBracketTemplate(ctx, ']', size, alignment),\n            ];\n            const totalLeft = (alignment === 'left'\n                ? instructionList\n                : instructionList.reverse()).reduce((prev, curr) => {\n                return curr(prev);\n            }, left);\n            ctx.textAlign = 'left';\n            if (totalLeft > 508 && textSize === 'medium') drawTypeAbility(ctx, 'small', alignment);\n        }\n    }, [subFamily, typeAbility]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = effectCanvas.current?.getContext('2d');\n            const typeCtx = typeCanvas.current?.getContext('2d');\n            ctx?.clearRect(0, 0, 549, 750);\n            if (isMonster) {\n                const effectIndexSize = drawEffect(ctx, effect, false, isNormal, undefined, undefined, effectStyle?.condenseTolerant);\n                drawTypeAbility(typeCtx, effectIndexSize === 0\n                    ? 'medium'\n                    : 'small');\n            } else {\n                drawEffect(\n                    ctx,\n                    effect,\n                    false,\n                    false,\n                    stFontList,\n                    stSizeList,\n                    effectStyle?.condenseTolerant,\n                );\n                drawTypeAbility(typeCtx, 'large', 'right');\n            }\n        }\n    }, [isInitializing, drawTypeAbility, effect, isMonster, isNormal, effectStyle?.condenseTolerant, active, effectCanvas, typeCanvas]);\n\n    useEffect(() => {\n        if (active) {\n            const ctx = pendulumEffectCanvas.current?.getContext('2d');\n            ctx?.clearRect(0, 0, 549, 600);\n            if (isMonster && isPendulum) {\n                drawEffect(\n                    ctx,\n                    pendulumEffect,\n                    true,\n                    false,\n                    pendulumFontList,\n                    pendulumSizeList,\n                    effectStyle?.condenseTolerant,\n                );\n            }\n        }\n    }, [active, effectStyle?.condenseTolerant, isInitializing, isMonster, isPendulum, pendulumEffectCanvas, pendulumEffect]);\n\n    return {\n        drawingPipeline,\n    };\n};","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport './app.scss';\nimport 'antd/dist/antd.css';\nimport {\n    CanvasConst,\n    Card,\n    defaultCard,\n} from './model';\nimport {\n    cardDataCondenser,\n    insertUrlParam,\n    rebuildCardData,\n} from './util';\nimport { AppHeader, CardInputPanel, CardInputPanelRef, taintedCanvasWarning } from './page';\nimport WebFont from 'webfontloader';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { useMasterSeriDrawer } from './service';\n\nconst { height: CanvasHeight, width: CanvasWidth } = CanvasConst;\nconst clearCanvas = (\n    ctx: CanvasRenderingContext2D | null | undefined,\n) => {\n    if (ctx) {\n        ctx.clearRect(0, 0, CanvasWidth, CanvasHeight);\n    };\n};\n\nfunction App() {\n    const [isInitializing, setInitializing] = useState(true);\n    const [error, setError] = useState('');\n    const [currentCard, setCard] = useState<Card>(defaultCard);\n    const [sourceType, setSourceType] = useState<'internal' | 'external'>('external');\n\n    const cardInputRef = useRef<CardInputPanelRef>(null);\n    const previewCanvasRef = useRef<HTMLCanvasElement>(null);\n    const drawCanvasRef = useRef<HTMLCanvasElement>(null);\n    const frameCanvasRef = useRef<HTMLCanvasElement>(null);\n    const artCanvasRef = useRef<HTMLCanvasElement>(null);\n    const specialFrameCanvasRef = useRef<HTMLCanvasElement>(null);\n    const subFamilyCanvasRef = useRef<HTMLCanvasElement>(null);\n    const pendulumScaleCanvasRef = useRef<HTMLCanvasElement>(null);\n    const pendulumEffectCanvasRef = useRef<HTMLCanvasElement>(null);\n    const typeCanvasRef = useRef<HTMLCanvasElement>(null);\n    const effectCanvasRef = useRef<HTMLCanvasElement>(null);\n    const nameCanvasRef = useRef<HTMLCanvasElement>(null);\n    const attributeCanvasRef = useRef<HTMLCanvasElement>(null);\n    const statCanvasRef = useRef<HTMLCanvasElement>(null);\n    const setIdCanvasRef = useRef<HTMLCanvasElement>(null);\n    const passcodeCanvasRef = useRef<HTMLCanvasElement>(null);\n    const creatorCanvasRef = useRef<HTMLCanvasElement>(null);\n    const stickerCanvasRef = useRef<HTMLCanvasElement>(null);\n    const [canvasMap] = useState({\n        previewCanvas: previewCanvasRef,\n        drawCanvas: drawCanvasRef,\n        frameCanvas: frameCanvasRef,\n        artCanvas: artCanvasRef,\n        specialFrameCanvas: specialFrameCanvasRef,\n        subFamilyCanvas: subFamilyCanvasRef,\n        pendulumScaleCanvas: pendulumScaleCanvasRef,\n        pendulumEffectCanvas: pendulumEffectCanvasRef,\n        typeCanvas: typeCanvasRef,\n        effectCanvas: effectCanvasRef,\n        nameCanvas: nameCanvasRef,\n        attributeCanvas: attributeCanvasRef,\n        statCanvas: statCanvasRef,\n        setIdCanvas: setIdCanvasRef,\n        passcodeCanvas: passcodeCanvasRef,\n        creatorCanvas: creatorCanvasRef,\n        stickerCanvas: stickerCanvasRef,\n    });\n\n    const {\n        name,\n        pictureCrop,\n        isPendulum,\n    } = currentCard;\n\n    const [imageChangeCount, setImageChangeCount] = useState(0);\n    const { drawingPipeline } = useMasterSeriDrawer(true, canvasMap, currentCard, {\n        imageChangeCount,\n        isInitializing,\n    });\n\n    // const drawRefrenceImage = useCallback(async (ctx: CanvasRenderingContext2D | null | undefined) => {\n    //     let leftOffset = -5;\n    //     let topOffset = 150;\n    // let leftOffset = -4;\n    // let topOffset = 300;\n    // let leftOffset = -300;\n    // let topOffset = -7;\n    // let leftOffset = -1;\n    // let topOffset = 100;\n    // await drawFromSourceWithSize(ctx, '/asset/image/MP19-EN-C-1E.png', -leftOffset, -topOffset, 541, 800 * (541 / 549));\n    // }, []);\n\n    useEffect(() => {\n        const ctx = drawCanvasRef.current?.getContext('2d');\n        if (ctx) {\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\n            ctx.imageSmoothingQuality = 'high';\n            clearCanvas(ctx);\n        }\n\n        // let fontLoaded = false;\n        WebFont.load({\n            custom: {\n                families: [\n                    'stone-serif-bold',\n                    'stone-serif-bold',\n                    'stone-serif-regular',\n                    'matrix',\n                    'palatino-linotype-bold',\n                    'MatrixBook',\n                    'MatrixBoldSmallCaps',\n                    'MatrixRegularSmallCaps',\n                    'Yugioh Rush Duel Numbers V4',\n                ],\n                urls: ['asset/font.css']\n            },\n            active: () => {\n                try {\n                    const localCardVersion = window.localStorage.getItem('ygocarder-v1-card-version');\n                    const localCardData = window.localStorage.getItem('ygocarder-v1-card-data');\n\n                    const urlParam = (new URLSearchParams(window.location.search)).get('data');\n                    if (urlParam) {\n                        setCard(rebuildCardData(urlParam, true) as any);\n                    } else if (localCardData !== null && localCardVersion === process.env.REACT_APP_VERSION) {\n                        setCard(rebuildCardData(localCardData) as any);\n                    }\n                } catch (e) {\n                    setCard(defaultCard);\n                }\n                setInitializing(false);\n            },\n            inactive: () => {\n                setError('Font could not be loaded');\n                setInitializing(false);\n            },\n        });\n    }, []);\n\n    const pendingSave = useRef(false);\n    const exportRef = useRef({\n        currentPipeline: Promise.resolve(),\n        queuedPipeline: false,\n    });\n\n    const download = useCallback(() => {\n        const canvasRef = drawCanvasRef.current;\n        if (canvasRef) try {\n            var link = document.createElement('a');\n            link.download = `${name}.png`;\n            link.href = canvasRef.toDataURL('image/png');\n            link.click();\n        } catch (e) {\n            setTainted(true);\n            alert('Could not save card, please manually save it by right click the card → Choose \"Save image as...\"');\n        }\n        document.querySelector('#export-canvas-guard')?.classList.remove('guard-on');\n    }, [name]);\n    const [isTainted, setTainted] = useState(false);\n    const onSave = () => {\n        document.querySelector('#export-canvas-guard')?.classList.add('guard-on');\n        if (exportRef.current.queuedPipeline === false) {\n            download();\n        } else pendingSave.current = true;\n    };\n\n    useEffect(() => {\n        let relevant = true;\n        if (isInitializing === false) {\n            localStorage.setItem('ygocarder-v1-card-data', JSON.stringify(currentCard));\n            localStorage.setItem('ygocarder-v1-card-version', process.env.REACT_APP_VERSION ?? 'unknown');\n\n            /**\n             * Run export pipeline\n             * - While it is running, every effect just mark pipeline as queued, then wait the current pipeline\n             * - If the pipeline is complete and there is no effect, run another pipeline and remove the queue\n             */\n            (async () => {\n                const canvasRef = drawCanvasRef.current;\n                if (canvasRef) {\n                    document.getElementById('export-canvas-guard')?.setAttribute('style', '');\n                    document.getElementById('save-button-waiting')?.setAttribute('style', 'display: block');\n                    document.getElementById('save-button-ready')?.setAttribute('style', 'display: none');\n\n                    exportRef.current.queuedPipeline = true;\n                    await exportRef.current.currentPipeline;\n\n                    if (relevant) {\n                        exportRef.current.currentPipeline = onExport({ isPendulum });\n                        exportRef.current.queuedPipeline = false;\n\n                        await exportRef.current.currentPipeline;\n                        if (relevant) {\n                            const condensedCard = cardDataCondenser(currentCard);\n                            if (typeof condensedCard === 'string') insertUrlParam('data', condensedCard);\n\n                            document.getElementById('export-canvas-guard')?.setAttribute('style', 'display: none');\n                            document.getElementById('save-button-waiting')?.setAttribute('style', 'display: none');\n                            document.getElementById('save-button-ready')?.setAttribute('style', 'display: block');\n\n                            if (pendingSave.current) {\n                                pendingSave.current = false;\n                                download();\n                            }\n                        }\n                    }\n                }\n            })();\n        }\n\n        return () => {\n            relevant = false;\n        };\n    });\n\n    const onExport = useRef(async (exportProps: {\n        isPendulum: boolean,\n    }) => {\n        const {\n            isPendulum = false\n        } = exportProps;\n        const canvasRef = drawCanvasRef.current;\n        const exportCtx = canvasRef?.getContext('2d');\n        const generateLayer = (canvasLayer: React.RefObject<HTMLCanvasElement>, ctx: CanvasRenderingContext2D | null | undefined) => {\n            return new Promise<boolean>(resolve => {\n                if (canvasLayer.current && ctx) {\n                    const layerData = canvasLayer.current.toDataURL('image/png');\n\n                    if (layerData) {\n                        var layer = new Image();\n                        layer.src = layerData;\n                        layer.onload = () => {\n                            ctx.drawImage(layer, 0, 0);\n                            resolve(true);\n                        };\n                        layer.onerror = () => resolve(false);\n                    } else resolve(false);\n                } else resolve(false);\n            });\n        };\n\n        if (canvasRef && exportCtx) {\n            exportCtx.clearRect(0, 0, 549, 800);\n            await Promise.all(Object\n                .values(drawingPipeline.current)\n                .map(callDraw => {\n                    return callDraw();\n                }));\n            await generateLayer(frameCanvasRef, exportCtx);\n            const previewCtx = previewCanvasRef.current;\n            if (previewCtx && exportCtx) {\n                if (isPendulum) {\n                    exportCtx.drawImage(previewCtx, 38, 144, 474, 470);\n                } else {\n                    exportCtx.drawImage(previewCtx, 67, 147, 416, 416);\n                }\n            }\n            await generateLayer(specialFrameCanvasRef, exportCtx);\n            await Promise.all([\n                nameCanvasRef,\n                attributeCanvasRef,\n                subFamilyCanvasRef,\n                pendulumScaleCanvasRef,\n                pendulumEffectCanvasRef,\n                typeCanvasRef,\n                effectCanvasRef,\n                statCanvasRef,\n                setIdCanvasRef,\n                passcodeCanvasRef,\n                creatorCanvasRef,\n                stickerCanvasRef,\n            ].map(currentlayer => generateLayer(currentlayer, exportCtx)));\n            // await drawRefrenceImage(exportCtx);\n        }\n    }).current;\n\n    return (\n        <div id=\"app\"\n            onDrop={() => { }}\n            style={{\n                backgroundImage: `url(\"${process.env.PUBLIC_URL}/asset/image/texture/debut-dark.png\"), linear-gradient(180deg, #00000022, #00000044)`,\n            }}\n        >\n            <div className={'app-container'}>\n                {isInitializing && <div className=\"full-loading\">\n                    {error.length > 0 ? <span style={{ color: '#e04040' }}>\n                        {error}\n                    </span> : 'Loading fonts and scripts...'}\n                </div>}\n                {/* <div className=\"card-filter-panel\">\n                </div> */}\n                <div className={`card-preview-panel ${isTainted ? 'export-tainted' : 'export-normal'}`}>\n                    <div className=\"export-button\">\n                        {!isTainted\n                            ? <>\n                                <button className=\"save-button\" id=\"save-button-waiting\" disabled>Save</button>\n                                <button className=\"save-button\" id=\"save-button-ready\" onClick={() => onSave()}>Save</button>\n                            </>\n                            : <div id=\"save-button-tainted\">\n                                Manually save by right click the card → \"Save image as...\" {taintedCanvasWarning}\n                            </div>}\n                        <div className=\"imexport\">\n                            <button onClick={() => {\n                                if (sourceType === 'internal') window.alert('Cannot export card data if you use offline image');\n\n                                window.prompt('Save card data for later use', `${cardDataCondenser(currentCard)}`);\n                            }}>Export Card Data</button>\n                            <button onClick={() => {\n                                const cardData = window.prompt('Paste your card data');\n\n                                if (cardData) {\n                                    const decodedCard = rebuildCardData(cardData, true) as Card;\n                                    setCard(decodedCard);\n                                    cardInputRef.current?.forceCardData(decodedCard);\n                                }\n                            }}>Import Card Data</button>\n                        </div>\n                    </div>\n                    <div className=\"card-canvas-group\">\n                        <canvas id=\"export-canvas\" ref={drawCanvasRef} width={CanvasWidth} height={CanvasHeight} />\n                        <div id=\"export-canvas-guard\">\n                            <div className=\"canvas-guard-alert\">Generating...</div>\n                            <LoadingOutlined />\n                        </div>\n                        <canvas id=\"frameCanvas\" ref={frameCanvasRef} width={CanvasWidth} height={CanvasHeight} />\n                        <canvas id=\"artCanvas\" ref={artCanvasRef} width={CanvasWidth} height={650} />\n                        <canvas id=\"specialFrameCanvas\" ref={specialFrameCanvasRef} width={CanvasWidth} height={CanvasHeight} />\n                        <canvas id=\"nameCanvas\" ref={nameCanvasRef} width={CanvasWidth} height={100} />\n                        <canvas id=\"attributeCanvas\" ref={attributeCanvasRef} width={CanvasWidth} height={100} />\n                        <canvas id=\"subFamilyCanvas\" ref={subFamilyCanvasRef} width={CanvasWidth} height={150} />\n                        <canvas id=\"pendulumScaleCanvas\" ref={pendulumScaleCanvasRef} width={CanvasWidth} height={600} />\n                        <canvas id=\"pendulumEffectCanvas\" ref={pendulumEffectCanvasRef} width={CanvasWidth} height={600} />\n                        <canvas id=\"typeCanvas\" ref={typeCanvasRef} width={CanvasWidth} height={700} />\n                        <canvas id=\"effectCanvas\" ref={effectCanvasRef} width={CanvasWidth} height={750} />\n                        <canvas id=\"statCanvas\" ref={statCanvasRef} width={CanvasWidth} height={CanvasHeight} />\n                        <canvas id=\"setIdCanvas\" ref={setIdCanvasRef} width={CanvasWidth} height={CanvasHeight} />\n                        <canvas id=\"passcode\" ref={passcodeCanvasRef} width={CanvasWidth} height={CanvasHeight} />\n                        <canvas id=\"creator\" ref={creatorCanvasRef} width={CanvasWidth} height={CanvasHeight} />\n                        <canvas id=\"sticker\" ref={stickerCanvasRef} width={CanvasWidth} height={CanvasHeight} />\n                        <canvas className=\"crop-canvas\" ref={previewCanvasRef} />\n                    </div>\n                </div>\n                {isInitializing === false && <CardInputPanel\n                    ref={cardInputRef}\n                    receivingCanvasRef={previewCanvasRef.current}\n                    currentCard={currentCard}\n                    onCardChange={setCard}\n                    defaultCropInfo={pictureCrop}\n                    onImageChange={(cropInfo, sourceType) => {\n                        setImageChangeCount(cnt => cnt + 1);\n                        setSourceType(sourceType);\n                        if (cropInfo) setCard(curr => ({\n                            ...curr,\n                            pictureCrop: cropInfo,\n                        }));\n                    }}\n                    onTainted={() => setTainted(true)}\n                >\n                    <AppHeader /><br />\n                </CardInputPanel>}\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n            getCLS(onPerfEntry);\n            getFID(onPerfEntry);\n            getFCP(onPerfEntry);\n            getLCP(onPerfEntry);\n            getTTFB(onPerfEntry);\n        });\n    }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}